<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="nodejs,">





  <link rel="alternate" href="/atom.xml" title="Yalhu" type="application/atom+xml">






<meta name="description" content="2018.8.9   基础123456789101112131415161718192021222324252627282930313233343536373839404142## 配置信息### 获取  npm config list     npm config ls -l # 全部信息   npm config get registry # 特定/指定设置### 设置npm config s">
<meta name="keywords" content="nodejs">
<meta property="og:type" content="article">
<meta property="og:title" content="Npm使用">
<meta property="og:url" content="http://yoursite.com/sum/server/npm使用/index.html">
<meta property="og:site_name" content="Yalhu">
<meta property="og:description" content="2018.8.9   基础123456789101112131415161718192021222324252627282930313233343536373839404142## 配置信息### 获取  npm config list     npm config ls -l # 全部信息   npm config get registry # 特定/指定设置### 设置npm config s">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2022-09-02T06:36:01.344Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Npm使用">
<meta name="twitter:description" content="2018.8.9   基础123456789101112131415161718192021222324252627282930313233343536373839404142## 配置信息### 获取  npm config list     npm config ls -l # 全部信息   npm config get registry # 特定/指定设置### 设置npm config s">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/sum/server/npm使用/">





  <title>Npm使用 | Yalhu</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yalhu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">yalhu's blob</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/sum/server/npm使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yalhu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/robbot.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yalhu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Npm使用</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-09T08:00:00+08:00">
                2018-08-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2022-09-02T14:36:01+08:00">
                2022-09-02
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/sum/" itemprop="url" rel="index">
                    <span itemprop="name">sum</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/sum/server/" itemprop="url" rel="index">
                    <span itemprop="name">server</span>
                  </a>
                </span>

                
                
              
            </span>
          
          
          
            
          

          
          
             <span id="/sum/server/npm使用/" class="leancloud_visitors" data-flag-title="Npm使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5,800
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  26
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p style="text-align:right">2018.8.9 </p>

<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 配置信息</span></span><br><span class="line"><span class="comment">### 获取  </span></span><br><span class="line">npm config list     </span><br><span class="line">npm config ls -l <span class="comment"># 全部信息   </span></span><br><span class="line">npm config get registry <span class="comment"># 特定/指定设置</span></span><br><span class="line"><span class="comment">### 设置</span></span><br><span class="line">npm config <span class="built_in">set</span> proxy http://proxy.company.com:8080 </span><br><span class="line">npm config <span class="built_in">set</span> https-proxy http://proxy.company.com:8080 </span><br><span class="line">npm config <span class="built_in">set</span> http-proxy http://proxy.company.com:8080</span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line">npm config <span class="built_in">set</span> disturl https://npm.taobao.org/dist</span><br><span class="line"><span class="comment">### 删除</span></span><br><span class="line">npm config delete proxy</span><br><span class="line">npm config delete http-proxy</span><br><span class="line">npm config delete https-proxy</span><br><span class="line"></span><br><span class="line"><span class="comment">## npm 安装/管理/升级包</span></span><br><span class="line">npm -g install npm@4.0.2</span><br><span class="line">npm install npm@latest -g <span class="comment"># latest</span></span><br><span class="line">npm i element-ui -S <span class="comment"># 简写</span></span><br><span class="line"><span class="comment">### 更新</span></span><br><span class="line"><span class="comment"># npm update [-g] [&lt;pkg&gt;...] # 更新</span></span><br><span class="line">npm install npm@latest -g <span class="comment"># npm 更新</span></span><br><span class="line">npm update @xes/x-cli -g --registry=https://npm.xesv5.com</span><br><span class="line"></span><br><span class="line"><span class="comment">### 包信息</span></span><br><span class="line"><span class="comment"># npm view &lt;packageName&gt; versions --json</span></span><br><span class="line">npm view @xes/x-cli version</span><br><span class="line">npm info express</span><br><span class="line"></span><br><span class="line"><span class="comment">## 发包</span></span><br><span class="line">npm login</span><br><span class="line">npm adduser</span><br><span class="line"></span><br><span class="line"><span class="comment">## others</span></span><br><span class="line"><span class="comment">### 缓存</span></span><br><span class="line">npm cache clear --force</span><br><span class="line">npm get cache <span class="comment"># 获取缓存目录</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### </span></span><br><span class="line">npm config <span class="built_in">set</span> sass_binary_site https://npm.taobao.org/mirrors/node-sass/</span><br><span class="line">npm config <span class="built_in">set</span> unsafe-perm <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="node多版本控制"><a href="#node多版本控制" class="headerlink" title="node多版本控制"></a>node多版本控制</h2><p>mac/lunix： nvm<br>windows: nvm-windows<br>n</p>
<p>windows <code>nvm use xxx</code> 报错：<code>node vv16.15.0 (64-bit) is not installed or cannot be found.</code><br>解决：cmd用管理员身份打开执行。<br>PS: 安装的时候会指定NVM_SYMLINK变量（nodejs），use的时候会创建一个软连接。<br>&lt;!–<br>卸载nodejs不重要。use 的时候，会覆盖掉吧。<br>但是nrm 没有删除掉，install的时候报错。所以去用户目录下把.nrmrc 文件删掉了。<br>把之前重复设置的nodejs 环境变量也删掉了；现在是NVM_SYMLINK变量，会添加到环境变量PATH中。</p>
<p>原始.npmrc 配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">electron_mirror=https://npm.taobao.org/mirrors/electron/</span><br><span class="line">registry=https://registry.npmjs.org/</span><br><span class="line">//registry.npmjs.org/:_authToken=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</span><br><span class="line">home=https://npm.taobao.org</span><br></pre></td></tr></table></figure></p>
<p>–&gt;</p>
<p>nvm 配置在nvm安装目录下settings.txt。可以设置源。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root: D:\Program Files\nvm</span><br><span class="line">path: D:\Program Files\nodejs</span><br><span class="line"></span><br><span class="line">node_mirror: https://npm.taobao.org/mirrors/node/</span><br><span class="line">npm_mirror: https://npm.taobao.org/mirrors/npm/</span><br></pre></td></tr></table></figure></p>
<h2 id="改变全局模块-缓存路劲"><a href="#改变全局模块-缓存路劲" class="headerlink" title="改变全局模块/缓存路劲"></a>改变全局模块/缓存路劲</h2><p># <a href="https://blog.csdn.net/Candy_mi/article/details/80764319" target="_blank" rel="noopener">安装npm cnpm踩坑记录</a><br>## 3. 改变原有的环境变量（配置npm的全局模块的存放路径以及cache的路径）<br>(1)先在C:\Program Files\nodejs目录下新建”global”和”cache”两个文件夹<br>(2)输入以下命令改变npm配置<br>npm config set prefix “C:\Program Files\nodejs\global”<br>npm config set cache “C:\Program Files\nodejs\cache”</p>
<p>## 4.配置环境变量<br>(1）我的电脑右键点击属性进入该页面—点击高级系统设置—点击环境变量进入该页面<br>(2)修改用户变量PATH：把”C:\Program Files\nodejs\global”加到后面，用分号隔开。<br>(3)新增系统变量NODE_PATH：设置成“C:\Program Files\nodejs\node_global\node_modules”。<br>tip:由于前面已经更改了原有的环境变量，所以安装cnmp时会自己安装到C:\Program Files\nodejs\global\node_modules目录下面,所以cnpm的环境变量也许要更改（如下步骤很重要）<br>(4)修改系统变量path:把“C:\Program Files\nodejs\global\node_modules\cnpm“加到后面</p>
<p>## 5.安装cnmp<br>安装命令：npm install -g cnpm –registry=<a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a></p>
<p>## 6.cmd检测是否安装成功（cnpm -v），如下就算成功</p>
<h2 id="设置cnpm"><a href="#设置cnpm" class="headerlink" title="设置cnpm"></a>设置cnpm</h2><!-- \$_PS: 装axios的时候镜像也没有用，用yarn就ojbk了      -->
<p># <a href="https://www.jianshu.com/p/2c0df2c25b29" target="_blank" rel="noopener">npm的设置cnpm</a><br>淘宝 npm 地址： <a href="http://npm.taobao.org/" target="_blank" rel="noopener">http://npm.taobao.org/</a><br>如何使用<br>有很多方法来配置npm的registry地址，下面根据不同情境列出几种比较常用的方法。以淘宝npm镜像安装express举例：<br>## 1.临时使用<br>npm –registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a> install express</p>
<p>## 2.持久使用<br>npm config set registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a></p>
<p>// 配置后可通过下面方式来验证是否成功<br>npm config get registry<br>// 或<br>npm info express</p>
<p>## 3.通过cnpm使用<br>npm install -g cnpm –registry=<a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a><br>// 使用<br>cnpm install express</p>
<p>## 4.关闭npm的https<br>npm config set strict-ssl false</p>
<h2 id="设置镜像"><a href="#设置镜像" class="headerlink" title="设置镜像"></a>设置镜像</h2><!-- \# [使用npm安装一些包失败了的看过来（npm国内镜像介绍）](https://cnodejs.org/topic/4f9904f9407edba21468f31e)         -->
<p>这个也是网上搜的，亲自试过，非常好用！<br>镜像使用方法（三种办法任意一种都能解决问题，建议使用第三种，将配置写死，下次用的时候配置还在）:</p>
<p>## 1.通过config命令<br>npm config set registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a><br>npm info underscore （如果上面配置正确这个命令会有字符串response）</p>
<p>## 2.命令行指定<br>npm –registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a> info underscore </p>
<p>## 3.编辑 ~/.npmrc 加入下面内容<br>registry = <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a></p>
<p>搜索镜像: <a href="https://npm.taobao.org" target="_blank" rel="noopener">https://npm.taobao.org</a><br>建立或使用镜像,参考: <a href="https://github.com/cnpm/cnpmjs.org" target="_blank" rel="noopener">https://github.com/cnpm/cnpmjs.org</a></p>
<h3 id="nrm"><a href="#nrm" class="headerlink" title="nrm"></a>nrm</h3><p>nrm(npm registry manager )是npm的镜像源管理工具，有时候国外资源太慢，使用这个就可以快速地在 npm 源间切换<br><code>npm install -g nrm</code><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nrm ls</span><br><span class="line">nrm add xx https://registry.x.com</span><br><span class="line">nrm use xx</span><br></pre></td></tr></table></figure></p>
<p># <a href="https://www.cnblogs.com/mingc/p/8714472.html" target="_blank" rel="noopener">npm 安装 electron 超时</a><br>在用户目录的 .npmrc 文件里添加一行<br>electron_mirror=<a href="https://npm.taobao.org/mirrors/electron/" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/electron/</a><br>指定 Electron 二进制文件的国内镜像（上面路径里最后一个正斜杠 “/“ 别丢了）。</p>
<h2 id="为Npm设代理"><a href="#为Npm设代理" class="headerlink" title="为Npm设代理"></a>为Npm设代理</h2><p># <a href="http://geek100.com/2574.html" target="_blank" rel="noopener">Node.js安装npm包出现网络错误的2种解决方案</a>     </p>
<p>为npm更换镜像后，我在公司安装npm包还是链接超时。后来在同事的提醒下，知道公司所有的网络链接都要通过公司代理服务器的。所以尝试着为npm设置了下proxy，设置方法如下：</p>
<p>第一个是http，第二个是https<br>npm config set proxy <a href="http://proxy.company.com" target="_blank" rel="noopener">http://proxy.company.com</a><br>npm config set https-proxy <a href="http://proxy.company.com" target="_blank" rel="noopener">http://proxy.company.com</a></p>
<p>上面proxy代理地址可根据你公司电脑ie里默认设置的代理服务器来填写。如ie里没有设置代理服务器，那么就需要知道公司的代理服务器地址。</p>
<p>通过为npm设置公司代理服务器的方式，npm终于能顺利连接了。</p>
<h2 id="NPM查看包的版本信息"><a href="#NPM查看包的版本信息" class="headerlink" title="NPM查看包的版本信息"></a>NPM查看包的版本信息</h2><!-- \# [NPM查看包的版本信息](https://www.jianshu.com/p/f72edc057212) -->
<h3 id="查看npmjs服务器上的包的版本信息"><a href="#查看npmjs服务器上的包的版本信息" class="headerlink" title="查看npmjs服务器上的包的版本信息"></a>查看npmjs服务器上的包的版本信息</h3><p><code>npm view pkg version</code> 查看服务器上包pkg的最新的版本信息<br>npm view gulp version # 4.0.0</p>
<p><code>npm view pgk versions</code> 查看npmjs服务器上包pkg的所有的版本信息<br>npm view gulp versions</p>
<p><code>npm info pkg</code> 查看npmjs服务器上包pkg的最新的版本信息,和npm view pkg version的功能类似,但比npm view pkg version提供的信息更丰富</p>
<p><code>npm info gulp</code>查看本地安装包的版本信息</p>
<p><code>npm ls pkg</code> 查看某个项目下包pkg的版本信息,注意该命令需要在某个项目下执行<br>npm ls webpack<br><a href="mailto:webapp_backend@1.0.0" target="_blank" rel="noopener">webapp_backend@1.0.0</a> /本地的项目路径<br>└── <a href="mailto:webpack@3.12.0" target="_blank" rel="noopener">webpack@3.12.0</a> </p>
<p><code>npm ls pkg -g</code> 查看本地全局安装的pkg版本<br>npm ls webpack -g<br>/Users/mac/.nvm/versions/node/v8.8.0/lib<br>└── <a href="mailto:webpack@4.29.6" target="_blank" rel="noopener">webpack@4.29.6</a> </p>
<h2 id="版本号"><a href="#版本号" class="headerlink" title="版本号"></a>版本号</h2><p>#31 <a href="https://juejin.cn/post/6944914658469871630" target="_blank" rel="noopener">npm 版本号</a><br><!-- 1.0.0-alpha.1和1.0.0-beta，哪个版本更大？ --><br>npm版本号遵循semver规范。版本号格式为<strong>major.minor.patch</strong>。其中major、minor、patch必须是非0的开头的非负数。<br>此外，版本号还可以带上预发布和build metadata。</p>
<h3 id="版本号的扩展"><a href="#版本号的扩展" class="headerlink" title="版本号的扩展"></a>版本号的扩展</h3><p>#### 预发布<br>在patch后加上”-“和一串由”.”连接的标识符。格式为<code>major.minor.patch-{identifier}.{identifier}.{identifier}</code>。<br>identifier必须是数字、大小写字母或连字符组成的非空字符串。比如：1.0.3-alpha.1<br>#### build metadata<br>在patch或预发布后面加上”+”和一串由”.”连接的标识符。格式为<code>major.minor.patch+{identifier}.{identifier}.{identifier}</code>或者 <code>major.minor.patch{pre-release}+{identifier}.{identifier}.{identifier}</code>。如：1.0.3-alpha.1+001，1.0.0-beta+exp.sha.5114f85</p>
<h3 id="版本号大小比较"><a href="#版本号大小比较" class="headerlink" title="版本号大小比较"></a>版本号大小比较</h3><p>版本号大小比较是从左到右依次比较major、minor、patch、pre-release。 build-metadata对优先级无影响 。预发布版本优先级低于正式版本</p>
<!-- 
版本号升级与标签之间的关系？
执行npm install package或npm update package等同于执行npm install package@latest或npm update package@latest。用户当前版本低于latest标签下的最高版本时，升级时会安装latest标签下的最高版本。用户当前版本高于latest标签下的最高版本，而低于其他标签下的版本时，会安装其他标签下的版本。

 -->
<p>安装semver工具测一测<br><code>npm install --save semver</code><br>semver规范<br><!-- END: #31 --></p>
<!-- \# 32 [npm 语义化版本控制](https://segmentfault.com/a/1190000018714929) -->
<h3 id="版本运算符"><a href="#版本运算符" class="headerlink" title="版本运算符"></a>版本运算符</h3><p>版本运算符指定了一定范围的版本。<br>主要有~、^、-、&lt;、&lt;=、&gt;、&gt;=、=版本运算符。</p>
<p>~ 版本号 —– 指定主版本号或者次版本号相同<br><!-- 
如果minor版本号指定了，那么minor版本号不变，而patch版本号任意
如果minor和patch版本号未指定，那么minor和patch版本号任意
如：~1.1.2，表示>=1.1.2 <1.2.0，可以是1.1.2，1.1.3，1.1.4，…，1.1.n
如：~1.1，表示>=1.1.0 <1.2.0，可以是同上
如：~1，表示>=1.0.0 <2.0.0，可以是1.0.0，1.0.1，1.0.2，…，1.0.n，1.1.n，1.2.n，…，1.n.n
 --><br>^ 版本号 — 第一个非零 版本号相同<br>&lt;!–<br>兼容某个版本<br>版本号中最左边的非0数字的右侧可以任意<br>如果缺少某个版本号，则这个版本号的位置可以任意 如：^1.1.2 ，表示&gt;=1.1.2 &lt;2.0.0，可以是1.1.2，1.1.3，…，1.1.n，1.2.n，…，1.n.n</p>
<p>如：^0.2.3 ，表示&gt;=0.2.3 &lt;0.3.0，可以是0.2.3，0.2.4，…，0.2.n<br>如：^0.0，表示 &gt;=0.0.0 &lt;0.1.0，可以是0.0.0，0.0.1，…，0.0.n<br> –&gt;<br>~ vs ^: 同一个版本号，^ 能匹配的范围大些，更加激进。<br><!-- ~指定的是相似版本。^ 可理解成兼容版本。 --><br>- 指定精确范围<br>分组 ||: <code>npm i vue@&quot;^0.7 || ~2&quot; # 安装 2.6.10</code></p>
<p>x的位置表示任意版本<br><em>标识符 任意版本<br>“”(空字符串) 匹配任何版本，和</em>一样</p>
<h3 id="版本号变更规则"><a href="#版本号变更规则" class="headerlink" title="版本号变更规则"></a>版本号变更规则</h3><ol>
<li>版本号只升不降，不得在数字前加0，比如 2.01.2 不允许的；</li>
<li>0.y.z，处于开发阶段的版本；</li>
<li>第一个正式版版本往往命名为 1.0.0；</li>
<li>先行版本必须在补丁版本之后添加，比如 2.3.7-0,0表示先行版本，和补丁版本用-分隔；</li>
<li>版本的比较依次比较主版本→次版本→补丁版本→先行版本，直到第一个能得出比较结果为止；</li>
<li>不小心把一个不兼容的改版当成了次版本号发行了该怎么办？一旦发现自己破坏了语义化版本控制的规范，就要修正这个问题，并发行一个新的次版本号来更正这个问题并且恢复向下兼容。即使是这种情况，也不能去修改已发行的版本。</li>
</ol>
<h3 id="npm-version"><a href="#npm-version" class="headerlink" title="npm version"></a>npm version</h3><p>git 和 npm version 结合</p>
<h4 id="手动更改版本号"><a href="#手动更改版本号" class="headerlink" title="手动更改版本号"></a>手动更改版本号</h4><p>执行 <code>npm version &lt;version&gt; -m &#39;xx %s xx&#39;</code>改变npm版本的同时，会执行一次 git commt -m ‘xx %s xx’并用版本号打一个tag，%s 会替换成版本号，前提是版本库是干净的（clean）。</p>
<h4 id="自动更新版本"><a href="#自动更新版本" class="headerlink" title="自动更新版本"></a>自动更新版本</h4><p>在 .git/hooks目录内，新建post-commit,输入以下内容：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">COMMIT_MSG=<span class="string">"<span class="variable">$(git log --pretty=format:"%s" -1 head)</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$COMMIT_MSG</span>"</span> | grep  -q  <span class="string">"^[0-9]"</span></span><br><span class="line"><span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">   <span class="comment"># 自动修改 patch</span></span><br><span class="line">  <span class="built_in">echo</span> $(npm version patch)</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<!-- END: #32 -->
<h2 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h2><p>常用的版本号标签有latest（默认），alpha（内测）， beta （公测）， next（下一个）， rc（ 候选）， experimental（实验）。<br>给版本号添加标签的方式有两种。一种是在发布时指定标签，如<code>npm publish --tag alpha</code>。另一个种是发布后执行命令<code>npm dist-tag add your-npm-package@1.0.2-1 alpha</code>。<br><!-- END: #31 --><br><!-- gamma, trial, stable, csp(内容安全版本    js库常用), latest 
trial: 试用版本 本软件通常都有时间限制，过期之后用户如果希望继续使用，一般得交纳一定的费用进行注册或购买。有些试用版软件还在功能上做了一定的限制。
--></p>
<p>一般不要通过<code>npm unpublsh -f</code> 删除发布的包<!-- 同名的包24h 后才可以再次发布 --><br>可以通过设置tag的方式去及时更新<br><!-- x-cli 更新到wx-betat. 切换tag-0.0.79后，重新安装也会报错 --></p>
<h3 id="npm-tag"><a href="#npm-tag" class="headerlink" title="npm tag"></a>npm tag</h3><p>发布测试包，不希望检测更新，或避免用户安装测试包。<br><!-- \# [npm之version和tag](https://www.jianshu.com/p/91902bae5572) --></p>
<blockquote>
<p>不小心把测试版发布成了正式版，我该怎么办？只能跑路了吗？<br><!-- 虽然自从leftpad事件之后，NPM取消了npm unpublish和npm publish -f操作，但是我们错误地把测试版发布成正式版之后，不要惊慌，要稳住，因为我们能赢。 --><br>version：<br>发布到npm后，每一个版本号都对应了其资源文件，而且是不可修改的。npm中的版本号类似于git中的tag。</p>
</blockquote>
<p>tag：<br>一般情况下，我们可以不指定tag，<strong>这时默认就会用latest这个tag</strong>，所有发布或者安装都是最新的正式版。<br>而指定tag之后，我们可以在这个tag上发布一个更新的版本，用户安装的时候如果也指定这个tag，则会安装这个tag下的最新版。<br><!-- 因此，npm中的tag类似于git中的branch。 --></p>
<!-- 总结一下
version一旦发布，是不可变的；
而tag更像一个渠道，只要用户选择了这个渠道，就可以一直更新这个渠道的最新版。
也因此，version和tag是相互独立的。 -->
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前的tag和对应的version。</span></span><br><span class="line">npm dist-tag ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看my-package发布过的所有版本号。</span></span><br><span class="line">npm view my-package versions</span><br><span class="line"></span><br><span class="line"><span class="comment"># 给my-package设置tag，对应到版本version。</span></span><br><span class="line">npm dist-tag add my-package@version tag</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># beta版本每次发布也需要更改包版本的！</span></span><br><span class="line">npm publish --tag beta <span class="comment"># 测试版</span></span><br><span class="line">npm info <span class="comment"># 查看信息</span></span><br></pre></td></tr></table></figure>
<h2 id="npm发包"><a href="#npm发包" class="headerlink" title="npm发包"></a>npm发包</h2><h3 id="发包时机脚本"><a href="#发包时机脚本" class="headerlink" title="发包时机脚本"></a>发包时机脚本</h3><!-- $_PS: package.json:script -> prepublish -->
<p>可以通过设置prepublish在发布前执行脚本<br><!-- [NPM-脚本](https://cloud.tencent.com/developer/section/1490270) --><br>对于以下脚本，npm 支持 package.json 文件的“scripts”属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">prepublish：在包打包和发布之前运行，以及在npm install没有任何参数的本地运行。（见下文）</span><br><span class="line">prepare：在打包和发布包之前运行，在npm install没有任何参数的本地运行（见下文）。这是在之后运行prepublish，但是之前prepublishOnly。</span><br><span class="line">prepublishOnly：在准备和包装之前运行，仅打开npm publish。（见下文。）</span><br><span class="line">prepack：前运行压缩包包装（上npm pack，npm publish并安装git的依赖时）</span><br><span class="line">postpack：在生成tarball之后运行并移动到其最终目标。</span><br><span class="line">publish，postpublish：发布包后运行。</span><br><span class="line">preinstall：在安装软件包之前运行</span><br><span class="line">install，postinstall：安装软件包后运行。</span><br><span class="line">preuninstall，uninstall：在卸载软件包之前运行。</span><br><span class="line">postuninstall：在卸载软件包后运行。</span><br><span class="line">preversion：在碰撞包版本之前运行。</span><br><span class="line">version：运行AFTER碰撞包版本，但提交之前。</span><br><span class="line">postversion：运行AFTER碰撞包版本，然后提交。</span><br><span class="line">pretest，test，posttest：由npm test命令运行。</span><br><span class="line">prestop，stop，poststop：由npm stop命令运行。</span><br><span class="line">prestart，start，poststart：由npm start命令运行。</span><br><span class="line">prerestart，restart，postrestart：按npm restart命令运行。注意：npm restart如果没有restart提供脚本，将运行停止和启动脚本。</span><br><span class="line">preshrinkwrap，shrinkwrap，postshrinkwrap：由npm shrinkwrap命令运行。</span><br></pre></td></tr></table></figure></p>
<p>此外，可以通过运行执行任意脚本<code>npm run-script &lt;stage&gt;</code>。前置和后名称匹配的命令将这些运行以及（例如premyscript，myscript， postmyscript）。可以运行依赖项的脚本<code>npm explore &lt;pkg&gt; -- npm run &lt;stage&gt;</code>。</p>
<h3 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h3><!-- [npm publish过滤部分文件](https://blog.csdn.net/add_you/article/details/88828561)
[npm publish过滤部分文件](https://www.jianshu.com/p/6c2f5c31bfe6)
 -->
<p>方法一：使用 .gitignore 设置忽略哪些文件</p>
<p>方法二：使用 .npmignore设置忽略哪些文件<br>.npmignore的写法跟.gitignore 的规则完全一样。<br>若同时使用了.npmignore和.gitignore，只有.npmignore会生效，优先级比较高。</p>
<p>方法三：使用package.json的files字段选择发布哪些文件<br>直接在package.json中files字段设置发布哪些文件或目录。<br>这个优先级高于.npmignore和.gitignore。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 默认被忽略：</span><br><span class="line">.*.swp</span><br><span class="line">._*</span><br><span class="line">.DS_Store</span><br><span class="line">.git</span><br><span class="line">.hg</span><br><span class="line">.npmrc</span><br><span class="line">.lock-wscript</span><br><span class="line">.svn</span><br><span class="line">.wafpickle-*</span><br><span class="line">config.gypi</span><br><span class="line">CVS</span><br><span class="line">npm-debug.log</span><br><span class="line">node_modules/</span><br><span class="line"></span><br><span class="line"># 默认被包含，即便设置忽略也无效</span><br><span class="line">package.json</span><br><span class="line">README (and its variants)</span><br><span class="line">CHANGELOG (and its variants)</span><br></pre></td></tr></table></figure>
<!-- \# 51 [一文搞定 npm 包发布与管理](https://juejin.cn/post/6920231981834108942#heading-4) -->
<h3 id="发布版本"><a href="#发布版本" class="headerlink" title="发布版本"></a>发布版本</h3><p>npm version</p>
<h4 id="3-1-发布稳定版本"><a href="#3-1-发布稳定版本" class="headerlink" title="3.1 发布稳定版本"></a>3.1 发布稳定版本</h4><p>更新版本号共有以下选项（major | minor | patch | premajor | preminor | prepatch | prerelease) ，注意项目的git status 必须是clear，才能使用这些命令。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># major 主版本号，并且不向下兼容  1.0.0 -&gt; 2.0.0</span></span><br><span class="line">$ npm version major</span><br><span class="line"><span class="comment"># minor 次版本号，有新功能且向下兼容  1.0.0 -&gt; 1.1.0</span></span><br><span class="line">$ npm version minor</span><br><span class="line"><span class="comment"># patch 修订号，修复一些问题、优化等  1.0.0 -&gt; 1.0.1</span></span><br><span class="line">$ npm version patch</span><br><span class="line"></span><br><span class="line"><span class="comment"># premajor 预备主版本  1.0.0 -&gt; 2.0.0-0</span></span><br><span class="line">$ npm version premajor</span><br><span class="line"><span class="comment"># preminor 预备次版本  1.0.0 -&gt; 1.1.0-0</span></span><br><span class="line">$ npm version preminor</span><br><span class="line"><span class="comment"># prepatch 预备修订号版本  1.0.0 -&gt; 1.0.1-0</span></span><br><span class="line">$ npm version prepatch</span><br><span class="line"><span class="comment"># prerelease 预发布版本  1.0.0 -&gt; 1.0.0-0</span></span><br><span class="line">$ npm version prerelease</span><br></pre></td></tr></table></figure></p>
<p>版本号更新后，我们就可以进行版本的发布<code>npm publish</code></p>
<h4 id="3-2-预发布版本"><a href="#3-2-预发布版本" class="headerlink" title="3.2 预发布版本"></a>3.2 预发布版本</h4><p>很多时候一些新改动，并不能直接发布到稳定版本上（稳定版本的意思就是使用 npm install demo 即可下载的最新版本），这时可以发布一个 “预发布版本“，不会影响到稳定版本。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发布一个 prelease 版本，tag=beta</span></span><br><span class="line">$ npm version prerelease</span><br><span class="line">$ npm publish --tag beta</span><br></pre></td></tr></table></figure></p>
<p>比如原来的版本号是 1.0.1，那么以上发布后的版本是 1.0.1-0，用户可以通过 npm install demo@beta 或者 npm install <a href="mailto:demo@1.0.1-0" target="_blank" rel="noopener">demo@1.0.1-0</a> 来安装，用户通过 npm install demo 安装的还是 1.0.1 版本。</p>
<h4 id="3-3、将-beta-版本设置为稳定版本"><a href="#3-3、将-beta-版本设置为稳定版本" class="headerlink" title="3.3、将 beta 版本设置为稳定版本"></a>3.3、将 beta 版本设置为稳定版本</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先可以查看当前所有的最新版本，包括 prerelease 与稳定版本</span></span><br><span class="line">$ npm dist-tag ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 1.0.1-1 版本为稳定版本</span></span><br><span class="line">$ npm dist-tag add demo@1.0.1-1 latest</span><br></pre></td></tr></table></figure>
<p>这时候，latest 稳定版本已经是 1.0.1-1 了，用户可以直接通过 npm install demo 即可安装该版本。</p>
<h4 id="3-4、将-beta-版本移除"><a href="#3-4、将-beta-版本移除" class="headerlink" title="3.4、将 beta 版本移除"></a>3.4、将 beta 版本移除</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将 beta 版本移除</span></span><br><span class="line">$ npm dist-tag rm demo beta</span><br></pre></td></tr></table></figure>
<h3 id="自己实现的一个发包脚本"><a href="#自己实现的一个发包脚本" class="headerlink" title="自己实现的一个发包脚本"></a>自己实现的一个发包脚本</h3><!-- END: #51 -->
<h3 id="发包异常"><a href="#发包异常" class="headerlink" title="发包异常"></a>发包异常</h3><ol>
<li>Error: 402 Payment Required<br>换了个名字，想起了自己见过的库，就模仿加了个 @ 前缀的包，再次发布的时候，报了下面的错误：<br><code>Error: 402 Payment Required - PUT https://registry.npmjs.org/@xx/xx - You must sign up for private packages</code><br>查看文档，发现 @npm/package-name 这种形式的包名，是有作用域的包名形式，执行 npm publish 的时候默认是发布私有的包。因此，第一种方式是花钱买私有包的服务，另外一种方式就是指定参数，表示公开：<br><code>npm publish --access public</code></li>
</ol>
<p>需要注意的是这种形式的包名跟 npm 账户有对应关系，不能随便填写。<br><code>npm init --scope=@my-org</code></p>
<p>这种形式表示是一个组织，my-org 对应是 npm 中的组织名。<br>npm init --scope=@my-username</p>
<h2 id="install和update区别"><a href="#install和update区别" class="headerlink" title="install和update区别"></a>install和update区别</h2><!-- \# 33 [NPM版本号规则以及更新策略](https://www.xncoding.com/2018/05/07/web/npm-version.html) -->
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>:          <span class="string">"my-project"</span>,</span><br><span class="line">  <span class="attr">"version"</span>:       <span class="string">"1.0"</span>,                             <span class="comment">// install   update</span></span><br><span class="line">  <span class="attr">"dependencies"</span>:  &#123;                                  <span class="comment">// ------------------</span></span><br><span class="line">    <span class="attr">"already-installed-versionless-module"</span>:  <span class="string">"*"</span>,     <span class="comment">// ignores   "1.0" -&gt; "1.1"</span></span><br><span class="line">    <span class="attr">"already-installed-semver-module"</span>:       <span class="string">"^1.4.3"</span>, <span class="comment">// ignores   "1.4.3" -&gt; "1.5.2"</span></span><br><span class="line">    <span class="attr">"already-installed-versioned-module"</span>:    <span class="string">"3.4.1"</span>,  <span class="comment">// ignores   ignores</span></span><br><span class="line">    <span class="attr">"not-yet-installed-versionless-module"</span>:  <span class="string">"*"</span>,     <span class="comment">// installs  installs</span></span><br><span class="line">    <span class="attr">"not-yet-installed-semver-module"</span>:       <span class="string">"^4.2.1"</span>, <span class="comment">// installs  installs</span></span><br><span class="line">    <span class="attr">"not-yet-installed-versioned-module"</span>:    <span class="string">"2.7.8"</span>  <span class="comment">// installs  installs</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>总结: 两者最大的区别是在对待已经安装过的模糊版本时候<br>npm install会忽略模糊版本<br>npm update会更新模糊版本至最新</p>
<p>另外: install and update 处理 devDependencies 方式也不同<br>npm install 会安装/更新devDependencies，除非你指定 –production标志<br>npm update 会忽略 devDependencies，除非你指定 –dev 标志<br><!-- END: 33 --></p>
<h2 id="包权限管理"><a href="#包权限管理" class="headerlink" title="包权限管理"></a>包权限管理</h2><p>很多时候，一个项目包往往不只是你一个人在管理的，这时需要给其他一起维护的同学开通发布的权限，相关使用命令如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看模块 owner, 其中 demo 为模块名称</span></span><br><span class="line">$ npm owner ls demo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加一个发布者, 其中 xxx 为要添加同学的 npm 账号</span></span><br><span class="line">$ npm owner add xxx demo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除一个发布者</span></span><br><span class="line">$ npm owner rm xxx demo</span><br></pre></td></tr></table></figure></p>
<!-- \# 51 [一文搞定 npm 包发布与管理](https://juejin.cn/post/6920231981834108942#heading-4) -->
<h2 id="安装npm包"><a href="#安装npm包" class="headerlink" title="安装npm包"></a>安装npm包</h2><h3 id="windows-安装node-sass"><a href="#windows-安装node-sass" class="headerlink" title="windows 安装node-sass"></a>windows 安装node-sass</h3><p>使用node-sass模块，npm install安装一直失败，尝试了很多方法，最终找到了这个方法，简直棒极了！<br>两种方法：</p>
<p>第一种：<br>1.先检查项目的node_modules文件夹是否存在node-sass文件夹，存在，删掉，不存在，执行第二步；<br>2.打开cmd，在项目根目录下输入以下代码<br><code>npm install node-sass --sass-binary-site=http://npm.taobao.org/mirrors/node-sass</code></p>
<p>或<br><code>SASS_BINARY_SITE=https://npm.taobao.org/mirrors/node-sass/ npm install node-sass</code><br><code>set SASS_BINARY_SITE=https://npm.taobao.org/mirrors/node-sass/</code></p>
<p>或者<br>在你的project下创建一个 .npmrc 文件<br>在文件中添加 sass_binary_site=<a href="https://npm.taobao.org/mirrors/node-sass/" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/node-sass/</a></p>
<p>第二种：<br>进入项目的node_modules目录下；<br>2.使用git克隆node-sass源码：Git路径为：git clone <a href="https://github.com/sass/node-sass.git" target="_blank" rel="noopener">https://github.com/sass/node-sass.git</a><br>3.使用编辑器，进入node_modules/node-sass/package.json文件中；<br>4.使用编辑器，将package.json文件中nodeSassConfig&gt;binarySite的值修改为淘宝镜像地址；</p>
<p>5.在cmd进入node-sass文件夹中，执行以下命令：npm install<br>即可等待node-sass安装成功</p>
<p><code>node-sass -v</code></p>
<h3 id="node-sass-gyp-ERR-build-error"><a href="#node-sass-gyp-ERR-build-error" class="headerlink" title="node-sass::gyp ERR! build error"></a>node-sass::gyp ERR! build error</h3><p>c++编译异常问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 只是一下verbose。会安装成功</span><br><span class="line">c++ &apos;-DNODE_GYP_MODULE_NAME=libsass&apos; &apos;-DUSING_UV_SHARED=1&apos; &apos;-DUSING_V8_SHARED=1&apos; &apos;-DV8_DEPRECATION_WARNINGS=1&apos; &apos;-DV8_DEPRECATION_WARNINGS&apos; &apos;-DV8_IMMINENT_DEPRECATION_WARNINGS&apos; &apos;-D_GLIBCXX_USE_CXX11_ABI=1&apos; &apos;-D_DARWIN_USE_64_BIT_INODE=1&apos;</span><br><span class="line"></span><br><span class="line">// 异常信息</span><br><span class="line">make: *** [Release/obj.target/binding/src/binding.o] Error 1</span><br><span class="line">gyp ERR! build error </span><br><span class="line">gyp ERR! stack Error: `make` failed with exit code: 2</span><br><span class="line">gyp ERR! stack     at ChildProcess.onExit (/Applications/XAMPP/xamppfiles/htdocs/bitbucket/sidedigital/node_modules/node-gyp/lib/build.js:285:23)</span><br><span class="line">gyp ERR! stack     at ChildProcess.emit (events.js:182:13)</span><br><span class="line">gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:240:12)</span><br><span class="line">gyp ERR! System Darwin 18.2.0</span><br><span class="line">gyp ERR! command &quot;/usr/local/bin/node&quot; &quot;/Applications/XAMPP/xamppfiles/htdocs/bitbucket/sidedigital/node_modules/node-gyp/bin/node-gyp.js&quot; &quot;rebuild&quot; &quot;--verbose&quot; &quot;--libsass_ext=&quot; &quot;--libsass_cflags=&quot; &quot;--libsass_ldflags=&quot; &quot;--libsass_library=&quot;</span><br><span class="line">gyp ERR! cwd /Applications/XAMPP/xamppfiles/htdocs/bitbucket/sidedigital/node_modules/node-sass</span><br><span class="line">gyp ERR! node -v v10.13.0</span><br><span class="line">gyp ERR! node-gyp -v v3.6.0</span><br><span class="line">gyp ERR! not ok </span><br><span class="line">// ...</span><br></pre></td></tr></table></figure>
<!-- > 
[Error at npm rebuild node-sass #2549](https://github.com/sass/node-sass/issues/2549)
I had the same problem and I solved with the steps:
1. if your are on Apple M1 Chip, run terminal with Rosetta 2 -->
<ol start="2">
<li>check your node-sass version in your package.json and compare with the following table:<br>NodeJS | Supported node-sass version | Node Module<br>– | – | –<br>Node 16 | 6.0+ | 93<br>Node 15 | 5.0+ | 88<br>Node 14 | 4.14+ | 83<br>Node 13 | 4.13+, &lt;5.0 | 79<br>Node 12 | 4.12+ | 72<br>Node 11 | 4.10+, &lt;5.0 | 67<br>Node 10 | 4.9+, &lt;6.0 | 64<br>Node 8 | 4.5.3+, &lt;5.0 | 57<br>Node &lt;8 | &lt;5.0 | &lt;57<br>&lt;!– 3. install the Nodejs version according with your node-sass</li>
<li>clean old node_modules with: rm -rf node_modules</li>
<li>run: npm install –&gt;</li>
</ol>
<h3 id="node-gyp-问题"><a href="#node-gyp-问题" class="headerlink" title="node-gyp 问题"></a>node-gyp 问题</h3><p>Err: <code>sh -c node-pre-gyp install --fallback-to-build</code><br>Err: <code>binding.gyp not found (xxx/xxx/xxx) while trying to load binding.gyp</code></p>
<p>执行：<code>npm install -g node-gyp</code>, 卸载后重新安装.然后再进行<code>npm install</code>。</p>
<p>一般是安装npm包回遇到问题，比如：canvas，ccap图形验证码<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm cache verify</span><br><span class="line"></span><br><span class="line">npm uninstall -g node-gyp</span><br><span class="line">npm uninstall node-gyp</span><br><span class="line">sudo npm install -g node-gyp@3.4.0 --save</span><br><span class="line">npm install -g canvas</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm i -g node-gyp@latest &amp;&amp; npm config set node_gyp "/usr/local/lib/node_modules/node-gyp/bin/node-gyp.js"</span></span><br></pre></td></tr></table></figure></p>
<h4 id="node-canvas"><a href="#node-canvas" class="headerlink" title="node-canvas"></a>node-canvas</h4><p>Err: <code>pkg-config: command not found</code><br><!-- 
[node-canvas-Installation: Mac OS X](https://github.com/Automattic/node-canvas/wiki/Installation%3A-Mac-OS-X)
There are several methods to install cairo on OSX, including MacPorts, Homebrew, and building all dependencies from source.
 --><br><!-- ~~npm 追加 --unsafe-perm=true --allow-root 试试~~ --><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install pkg-config cairo pango libpng jpeg giflib librsvg</span><br></pre></td></tr></table></figure></p>
<!-- 官方提示的 是查看系统是否安装了pkgconfig.将pkgconfig添加到环境变量 -->
<!-- 

#### 相关信息
一般是因为需要下载国外的包，要么连VPN，要么使用淘宝的镜像：
使用cnpm：
`npm install -g cnpm --registry=https://registry.npm.taobao.org` 
-->
<!-- 
[node-pre-gyp install --fallback-to-build 错误(示例代码)](https://www.136.la/tech/show-593776.html)
[node-pre-gyp install --fallback-to-build 错误](https://www.cnblogs.com/tekkaman/p/7351989.html)
> node-gyp
　　Node.js native addon build tool
　　node-gyp is a cross-platform command-line tool written in Node.js for compiling native addon modules for Node.js. It bundles the gyp project used by the Chromium team and takes away the pain of dealing with the various differences in build platforms.
　　node-gyp用于将工具源码编译成ndoejs add-on

Generate Your Projects.
GYP is a Meta-Build system: a build system that generates other build systems.
[GYP](https://gyp.gsrc.io)
GYP is intended to support large projects that need to be built on multiple platforms (e.g., Mac, Windows, Linux), and where it is important that the project can be built using the IDEs that are popular on each platform as if the project is a “native” one.

It can be used to generate XCode projects, Visual Studio projects, Ninja build files, and Makefiles. In each case GYP's goal is to replicate as closely as possible the way one would set up a native build of the project using the IDE.

GYP can also be used to generate “hybrid” projects that provide the IDE scaffolding for a nice user experience but call out to Ninja to do the actual building (which is usually much faster than the native build systems of the IDEs).

For more information on GYP, click on the links above.
 -->
<h3 id="electron安装"><a href="#electron安装" class="headerlink" title="electron安装"></a>electron安装</h3><!-- [使用淘宝npm源加速Electron依赖安装](https://www.jianshu.com/p/f1e3f07ff3a9) -->
<!-- 开发Electron的时候，每次执行“npm i -D electron”，等得我都快哭了，还不一定能下得下来。 -->
<p>在你的npmrc文件里添加淘宝npm源，Windows用户可以参考下面的路径：<br><!-- `C:\Users\[User name]\AppData\Roaming\npm\node_modules\npm\npmrc` --><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">registry=https://registry.npm.taobao.org/</span><br><span class="line">ELECTRON_MIRROR=http://npm.taobao.org/mirrors/electron/</span><br></pre></td></tr></table></figure></p>
<p>也可以使用下面命令：<br><code>ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ npm install --save-dev electron</code></p>
<h3 id="peer-deps"><a href="#peer-deps" class="headerlink" title="peer deps"></a>peer deps</h3><p><code>peer react@&quot;^16.0.0-0&quot; from enzyme-adapter-react-16@1.15.6 npm ERR! node_modules/enzyme-adapter-react-16 npm ERR!   dev enzyme-adapter-react-16@&quot;^1.15.6&quot; from the root project</code><br><code>Could not resolve dependency: npm ERR! peer react@&quot;^16.0&quot; from @react-native-community/masked-view@0.1.10</code></p>
<!-- [Unable to resolve dependency tree Reactjs](https://stackoverflow.com/questions/64718633/unable-to-resolve-dependency-tree-reactjs)
This error comes from version 7.x of npm.

[npm v7 Series - Beta Release! And: SemVer-Major Changes in npm v7](https://blog.npmjs.org/post/626173315965468672/npm-v7-series-beta-release-and-semver-major)
 -->
<blockquote>
<p>Please try again with the –legacy-peer-deps option.<br><!-- 错误输出也有建议项 --><br>The –legacy-peer-deps flag was introduced with v7 of npm as a way to bypass peerDependency auto-installation; it tells NPM to ignore peer deps and proceed with the installation anyway. This can cause some unwanted behavior and I would not suggest it.</p>
</blockquote>
<h2 id="npm安装出错"><a href="#npm安装出错" class="headerlink" title="npm安装出错"></a>npm安装出错</h2><h3 id="SSL-Error-CERT-UNTRUSTED-while-using-npm-command"><a href="#SSL-Error-CERT-UNTRUSTED-while-using-npm-command" class="headerlink" title="SSL Error: CERT_UNTRUSTED while using npm command"></a>SSL Error: CERT_UNTRUSTED while using npm command</h3><p># 实际<br>通过安装n包，更新node成功了。之后出现问题是退出当前工作目录，重新进入就好了。（服务端同学，把工作目录全量更新了，然后npm命令就不可以执行了，不知道他全量更新做了什么）<br># <a href="https://sre.ink/node-npm-install-error-cert_untrusted/" target="_blank" rel="noopener">node npm install Error: CERT_UNTRUSTED</a><br>ssl验证问题，使用下面的命令取消ssl验证即可解决<br>npm config set strict-ssl false</p>
<p>错误error-code-ELIFECYCLE，执行如下命令<br>npm cache clear –force<br>npm install -g npm</p>
<p># <a href="https://stackoverflow.com/questions/21855035/ssl-error-cert-untrusted-while-using-npm-command" target="_blank" rel="noopener">SSL Error: CERT_UNTRUSTED while using npm command</a><br>### 1<br>You can bypass https using below commands:<br><code>npm config set strict-ssl false</code><br>or set the registry URL from https or http like below:<br><code>npm config set registry=&quot;http://registry.npmjs.org/&quot;</code></p>
<p>### 2<br>Update your node.js installation.The following commands should do it (from here):<br>sudo npm cache clean -f<br>sudo npm install -g n<br>sudo n stable</p>
<h3 id="RPC-failed，curl-18-transfer-closed-with-outstanding-read-data-remaining"><a href="#RPC-failed，curl-18-transfer-closed-with-outstanding-read-data-remaining" class="headerlink" title="-RPC failed，curl 18 transfer closed with outstanding read data remaining"></a>-RPC failed，curl 18 transfer closed with outstanding read data remaining</h3><p>项目太久，资源文件太大. $_PS: 最后也没有下载下来，换了一个仓库。<br><!-- 微信小程序破解：https://github.com/Cherrison/CrackMinApp?tdsourcetag=s_pctim_aiomsg --><br>原因1：缓存区溢出。网上大部分解决措施：<br>git config –glob   al http.postBuffer 524288000</p>
<p>可能原因2：网络下载速度缓慢<br>git config –global http.lowSpeedLimit 0<br>git config –global http.lowSpeedTime 999999</p>
<p>第三：如果依旧clone失败，则首先浅层clone，然后更新远程库到本地<br>git clone –depth=1 <a href="http://gitlab.xxx.cn/yyy/zzz.git" target="_blank" rel="noopener">http://gitlab.xxx.cn/yyy/zzz.git</a><br>cd large-repository<br>git fetch –unshallow</p>
<p>其他方式，一般clone http方式的容易产生此问题，改成SSH的方式也有效，即https://改为git://</p>
<!-- 参考：
https://www.cnblogs.com/zjfjava/p/10392150.html
https://blog.csdn.net/it_liuchengli/article/details/77040806 -->
<h3 id="command-not-found"><a href="#command-not-found" class="headerlink" title="command not found"></a>command not found</h3><p><a href="https://blog.csdn.net/EDDYCJY/article/details/77892446" target="_blank" rel="noopener">bash: vue: command not found</a><br>npm 全局路径不对或 node_modules 的路径未设置<br>三、查看npm全局路径：<br><code>npm root -g</code><br>得出/usr/local/node/lib/node_modules，检查是否正确的路径。<br>若存在问题可重新指定：</p>
<p><code>npm config set prefix /usr/local</code>   </p>
<h3 id="MSBUILD-error-MSB3428-未能加载-Visual-C-组件“VCBuild-exe”"><a href="#MSBUILD-error-MSB3428-未能加载-Visual-C-组件“VCBuild-exe”" class="headerlink" title="MSBUILD : error MSB3428: 未能加载 Visual C++ 组件“VCBuild.exe”"></a>MSBUILD : error MSB3428: 未能加载 Visual C++ 组件“VCBuild.exe”</h3><p>错误原因：缺少windows构建插件；<br>全局安装windows构建工具，执行如下命令即可！<br><code>npm install --global --production windows-build-tools</code></p>
<h3 id="ERROR-in-Module-build-failed-from-node-modules-sass-loader-lib-loader-js"><a href="#ERROR-in-Module-build-failed-from-node-modules-sass-loader-lib-loader-js" class="headerlink" title="ERROR in Module build failed (from ./node_modules/sass-loader/lib/loader.js):"></a>ERROR in Module build failed (from ./node_modules/sass-loader/lib/loader.js):</h3><p>sass-loader 降低版本号<br><!-- 根据npm的提升信息，自觉的更新了sass-loader 就引起上述问题。 --></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>knowledge is no pay,reward is kindness</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="Yalhu 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Yalhu 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/nodejs/" rel="tag"><i class="fa fa-tag"></i> nodejs</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/sum/others/程序签名/" rel="next" title="程序签名">
                <i class="fa fa-chevron-left"></i> 程序签名
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/sum/server/node配置相关/" rel="prev" title="Node配置相关">
                Node配置相关 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_fav">收藏夹</a>
<a class="jiathis_button_copy">复制网址</a>
<a class="jiathis_button_email">邮件</a>
<a class="jiathis_button_weixin">微信</a>
<a class="jiathis_button_qzone">QQ空间</a>
<a class="jiathis_button_tqq">腾讯微博</a>
<a class="jiathis_button_douban">豆瓣</a>
<a class="jiathis_button_share">一键分享</a>

<a href="//www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript">
var jiathis_config={
  data_track_clickback:true,
  summary:"",
  shortUrl:false,
  hideMore:false
}
</script>
<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script>
<!-- JiaThis Button END -->
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitment-container"></div>
      
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/robbot.jpg" alt="Yalhu">
            
              <p class="site-author-name" itemprop="name">Yalhu</p>
              <p class="site-description motion-element" itemprop="description">no better,but great !</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">407</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">47</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">51</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:xxxx@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
                <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons">
              </a>
            </div>
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="/home2/" title="Home2" target="_blank">Home2</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="/archives2/" title="Archives2" target="_blank">Archives2</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="/acategories/" title="Acategories" target="_blank">Acategories</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        
          <style>
            .post-toc .nav .nav-child { display: block; }
          </style>
        
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#基础"><span class="nav-text">基础</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#node多版本控制"><span class="nav-text">node多版本控制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#改变全局模块-缓存路劲"><span class="nav-text">改变全局模块/缓存路劲</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置cnpm"><span class="nav-text">设置cnpm</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置镜像"><span class="nav-text">设置镜像</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#nrm"><span class="nav-text">nrm</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为Npm设代理"><span class="nav-text">为Npm设代理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NPM查看包的版本信息"><span class="nav-text">NPM查看包的版本信息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#查看npmjs服务器上的包的版本信息"><span class="nav-text">查看npmjs服务器上的包的版本信息</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#版本号"><span class="nav-text">版本号</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#版本号的扩展"><span class="nav-text">版本号的扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#版本号大小比较"><span class="nav-text">版本号大小比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#版本运算符"><span class="nav-text">版本运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#版本号变更规则"><span class="nav-text">版本号变更规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#npm-version"><span class="nav-text">npm version</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#手动更改版本号"><span class="nav-text">手动更改版本号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自动更新版本"><span class="nav-text">自动更新版本</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tag"><span class="nav-text">tag</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#npm-tag"><span class="nav-text">npm tag</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#npm发包"><span class="nav-text">npm发包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#发包时机脚本"><span class="nav-text">发包时机脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#忽略文件"><span class="nav-text">忽略文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#发布版本"><span class="nav-text">发布版本</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-发布稳定版本"><span class="nav-text">3.1 发布稳定版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-预发布版本"><span class="nav-text">3.2 预发布版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3、将-beta-版本设置为稳定版本"><span class="nav-text">3.3、将 beta 版本设置为稳定版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4、将-beta-版本移除"><span class="nav-text">3.4、将 beta 版本移除</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自己实现的一个发包脚本"><span class="nav-text">自己实现的一个发包脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#发包异常"><span class="nav-text">发包异常</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#install和update区别"><span class="nav-text">install和update区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#包权限管理"><span class="nav-text">包权限管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装npm包"><span class="nav-text">安装npm包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#windows-安装node-sass"><span class="nav-text">windows 安装node-sass</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#node-sass-gyp-ERR-build-error"><span class="nav-text">node-sass::gyp ERR! build error</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#node-gyp-问题"><span class="nav-text">node-gyp 问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#node-canvas"><span class="nav-text">node-canvas</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#electron安装"><span class="nav-text">electron安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#peer-deps"><span class="nav-text">peer deps</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#npm安装出错"><span class="nav-text">npm安装出错</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SSL-Error-CERT-UNTRUSTED-while-using-npm-command"><span class="nav-text">SSL Error: CERT_UNTRUSTED while using npm command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RPC-failed，curl-18-transfer-closed-with-outstanding-read-data-remaining"><span class="nav-text">-RPC failed，curl 18 transfer closed with outstanding read data remaining</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#command-not-found"><span class="nav-text">command not found</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MSBUILD-error-MSB3428-未能加载-Visual-C-组件“VCBuild-exe”"><span class="nav-text">MSBUILD : error MSB3428: 未能加载 Visual C++ 组件“VCBuild.exe”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ERROR-in-Module-build-failed-from-node-modules-sass-loader-lib-loader-js"><span class="nav-text">ERROR in Module build failed (from ./node_modules/sass-loader/lib/loader.js):</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yalhu</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">668.7k</span>
  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    
      <style>
        a.gitment-editor-footer-tip { display: none; }
        .gitment-container.gitment-footer-container { display: none; }
      </style>
    

    
      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitmint({
            id: window.location.pathname, 
            owner: 'yalhu',
            repo: 'ablobComment',
            
            lang: "zh-Hans" || navigator.language || navigator.systemLanguage || navigator.userLanguage,
            
            oauth: {
            
            
                client_secret: 'e2dffa7f47b9523021b9ae56b08f1a8901ec5b47',
            
                client_id: '55b918d3485e51d807dd'
            }});
        gitment.render('gitment-container');
      }

      
      renderGitment();
      
      </script>
    







  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("FR1Ck8VBxN9d1lKPIOSKmvgl-gzGzoHsz", "bLUjHdwtJTf00J8OwVTT8urs");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
