<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Yalhu" type="application/atom+xml" />






<meta name="description" content="好像上周11.12看的，这周补笔记+巩固2017.11.18 六 23:20人民邮电出版社出版发行著　　　　[英] Ben Frain译　　　　王永强2013年 1 月北京第 1 次印刷9章246页## 前言第 1章，HTML5、CSS3及响应式设计入门，定义了什么是响应式网页设计，展示了一些响应式设计的网站示例，重点强调了使用 HTML5和 CSS3的优势。第 2 章，媒体查询：支持不同的视口，">
<meta property="og:type" content="article">
<meta property="og:title" content="响应式Web设计：HTML5和CSS3实战">
<meta property="og:url" content="http://yoursite.com/pdf/css/响应式Web设计：HTML5和CSS3实战/index.html">
<meta property="og:site_name" content="Yalhu">
<meta property="og:description" content="好像上周11.12看的，这周补笔记+巩固2017.11.18 六 23:20人民邮电出版社出版发行著　　　　[英] Ben Frain译　　　　王永强2013年 1 月北京第 1 次印刷9章246页## 前言第 1章，HTML5、CSS3及响应式设计入门，定义了什么是响应式网页设计，展示了一些响应式设计的网站示例，重点强调了使用 HTML5和 CSS3的优势。第 2 章，媒体查询：支持不同的视口，">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://you img base url/myVideoPoster.jpg?e=1603016372&token=your qiniu access key:HwXCZerXFx2m3kQh5ZQXr63vfGA=">
<meta property="og:updated_time" content="2020-02-04T09:13:55.394Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="响应式Web设计：HTML5和CSS3实战">
<meta name="twitter:description" content="好像上周11.12看的，这周补笔记+巩固2017.11.18 六 23:20人民邮电出版社出版发行著　　　　[英] Ben Frain译　　　　王永强2013年 1 月北京第 1 次印刷9章246页## 前言第 1章，HTML5、CSS3及响应式设计入门，定义了什么是响应式网页设计，展示了一些响应式设计的网站示例，重点强调了使用 HTML5和 CSS3的优势。第 2 章，媒体查询：支持不同的视口，">
<meta name="twitter:image" content="http://you img base url/myVideoPoster.jpg?e=1603016372&token=your qiniu access key:HwXCZerXFx2m3kQh5ZQXr63vfGA=">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/pdf/css/响应式Web设计：HTML5和CSS3实战/"/>





  <title>响应式Web设计：HTML5和CSS3实战 | Yalhu</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yalhu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">yalhu's blob</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/pdf/css/响应式Web设计：HTML5和CSS3实战/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yalhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/robbot.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yalhu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">响应式Web设计：HTML5和CSS3实战</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-12T08:00:00+08:00">
                2017-11-12
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-02-04T17:13:55+08:00">
                2020-02-04
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/pdf/" itemprop="url" rel="index">
                    <span itemprop="name">pdf</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/pdf/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                
              
            </span>
          
          
          
            
          

          
          
             <span id="/pdf/css/响应式Web设计：HTML5和CSS3实战/" class="leancloud_visitors" data-flag-title="响应式Web设计：HTML5和CSS3实战">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  17,888
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  67
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p style="text-align:right">好像上周11.12看的，这周补笔记+巩固</p><br><p style="text-align:right">2017.11.18 六 23:20</p><br>人民邮电出版社出版发行<br>著　　　　[英] Ben Frain<br>译　　　　王永强<br>2013年 1 月北京第 1 次印刷<br>9章246页<br><br>## 前言<br>第 1章，HTML5、CSS3及响应式设计入门，定义了什么是响应式网页设计，展示了一些响应式设计的网站示例，重点强调了使用 HTML5和 CSS3的优势。<br><br>第 2 章，媒体查询：支持不同的视口，讲解了什么是媒体查询，如何实现媒体查询，以及如何针对设备能力匹配 CSS样式，将其应用于任意设计。<br><br>第 3 章，拥抱流式布局，讲解了流式布局的优点，以及如何将一个现有的固定宽度设计轻松地转换为流式布局，怎样使用 CSS框架快速搭建响应式网页。<br><br>第 4章，响应式设计中的 HTML5，探讨了使用 HTML5技术的诸多好处，比如更简洁的代码、语义化标签、离线存储，以及无障碍网页应用辅助技术。<br><br>第 5 章，CSS3：选择器、字体和颜色模式，展示了 CSS3 选择器的强大威力，可以让你轻松地指定和改变任何元素。 还讲解了通过@font-face声明来使用漂亮的网络字体， 另外讲解了新的 CSS3颜色模式如 RGB(A)和 HSL(A)。<br><br>第 6章，用 CSS3创造令人惊艳的美，展示了如何使用纯粹的 CSS3代码实现文字阴影、盒阴影和渐变效果。还涵盖了如何使用多重背景图片，以及如何通过字体文件创建图标。<br><br>第 7章，CSS3的过渡、变形和动画，讲解如何仅使用 CSS3来创建和转换屏幕上的元素，并制作动画效果。<br><br>第 8章，用 HTML5和 CSS3征服表单，阐述了在所有设备上（从最新的智能手机到桌面版浏览器）都能良好运行的跨浏览器表单开发技巧。<br><br>第 9章，解决跨浏览器问题，讲解了如何保证老版本的 Internet Explorer可响应，如何将一组链接修改成移动设备上的一个菜单，如何为高分辨率显示器提供不同内容，以及如何使用 Modernizr框架分条件地加载资源文件。<br><br>## 第 1章  HTML5、CSS3及响应式设计入门<br>1. 支持小屏幕设备的重要性、什么是移动网站设计<br>2. 什么是响应式网页设计<br>3. 优秀响应式网页实例赏析<br>4. 视口和屏幕的区别<br>5. 安装和使用修改视口的浏览器扩展程序<br>6. 使用 HTML5编写更简洁的标记<br>7. 使用 CSS3解决常见的设计问题<br>### 1.1 为什么智能手机很重要（而老版的 IE 不再重要）<br>### 1.2 响应式设计一定是最佳选择吗<br>### 1.3 响应式网页设计的定义<br>响应式网页设计（RWD，Responsive Web Design）这个术语，由伊桑·马科特（Ethan<br>Marcotte）提出。他在 A List Apart发表了一篇开创性的文章，<strong>将三种已有的开发技巧（弹<br>性网格布局、弹性图片、媒体和媒体查询）整合起来，并命名为响应式网页设计</strong>。这个<br>术语还有一堆表示相同意思的其他叫法，如流式设计、弹性布局、塑料布局、流体设计、<br>自适应布局、跨设备设计以及弹性设计。<br><br>上面仅列举了其中一部分！不过，正如马科特等人所说， <strong>真正的响应式设计方法</strong>不仅仅只是根据视口大小改变网页布局。相反，它是要从整体上颠覆我们当前设计网页的方法。<br>以往我们先是针对桌面电脑进行固定宽度设计，然后将其缩小并针对小屏幕进行内容重排；现在我们应该首先针对小屏幕进行设计，然后逐步增强针对大屏幕的设计和内容 。<br><br>### 1.5 响应式网页设计示例<br>#### 1.5.1 下载视口调试工具<br>1. Internet Explorer用户请下载安装 Microsoft Internet Explorer Developer Toolbar，下载地址<br>如下：<a href="http://www.microsoft.com/download/en/details.aspx?id=18359" target="_blank" rel="noopener">http://www.microsoft.com/download/en/details.aspx?id=18359</a><br><br>2. 如果你在使用 Safari，虽然 ResizeMe（<a href="http://web.me.com/aaronholla/Safari_Extensions/" target="_blank" rel="noopener">http://web.me.com/aaronholla/Safari_Extensions/</a><br>ResizeMe.html）的功能类似且免费，但我最爱 Resize（<a href="http://resizeSafari.com）" target="_blank" rel="noopener">http://resizeSafari.com）</a><br><br>3. Firefox 用户请下载 Firesizer（<a href="https://addons.mozilla.org/en-US/firefox/addon/firesizer/）" target="_blank" rel="noopener">https://addons.mozilla.org/en-US/firefox/addon/firesizer/）</a><br><br>4. Chrome 请下载 Windows Resizer（<a href="https://chrome.google.com/webstore/detail/kkelicaakdan" target="_blank" rel="noopener">https://chrome.google.com/webstore/detail/kkelicaakdan</a><br>hinjdeammmilcgefonfh）<br><br>不喜欢使用浏览器扩展？还有一个方法：我写了个简单 HTML页面来显示浏览器窗口的当前视口高度和宽度。 页面用了 jQuery框架， 获取当前的视口的高度和宽度并显示出来。你可以在浏览器新标签页中打开这个页面，调整窗口大小，然后切回你要测试的页面查看<br>效果。这个超级简单的“What size is my viewport page?”页面地址如下：<a href="http://benfrain.com/easily-display-the-viewport-size-of-your-page-for-responsive-designs/" target="_blank" rel="noopener">http://benfrain.com/easily-display-the-viewport-size-of-your-page-for-responsive-designs/</a><br><br><br>### 1.6 为什么 HTML5 很优秀<br>#### 1.6.1 省时省力<br>1. 我写页面的时候从来不会手工敲出文档类型声明<br>2. type 属性不再是必需的。链接 CSS文件与此类似(单双引号也可以省)<br>（但 HTML5 并 不介意，这 样的代码照 样能够通过 W3C 的 HTML5 验证 工 具（<a href="http://validator.w3.org/）的验证。）" target="_blank" rel="noopener">http://validator.w3.org/）的验证。）</a><br>#### 1.6.2 新增了语义化标签元素<br>假如看到一个结束标签，你会立即明白哪个标签结束了，不用注释。<br>####<br>####<br><br>### 1.7 CSS3 为响应式设计和更多创新奠定了基础<br>&gt; CSS3是在 CSS 2基础上按模块构建的，以 CSS 2.1标准为核心。每个模块都会增加功能或是替换 CSS 2.1 标准中已有章节。CSS 工作组的设想是新的 CSS 模块不会与 CSS 2.1标准冲突，这些模块只会追加新功能，改进已有规定。<br>#### 1.7.1 底线：CSS3 不破坏任何东西<br><br>#### 1.7.2 CSS3 如何解决日常设计问题<br>界面元素创建圆角效果:滑动门技术  （<a href="http://www.alistapart.com/articles/slidingdoors/）来实现，即将一张背景图片放在另一张后面。" target="_blank" rel="noopener">http://www.alistapart.com/articles/slidingdoors/）来实现，即将一张背景图片放在另一张后面。</a><br><br>不再需要渐变背景图片<br>### 1.8 看呐，不用图片<br>“渐进增强”<br>#### CSS3 还带来了什么<br>### 1.9 HTML5 和 CSS3 现在就能用吗<br>以我的经验，一开始通常会问自己以下问题:<br>### 1.10 响应式网页设计不是灵丹妙药<br>### 1.11 引导客户：网站不必在所有浏览器中表现一致<br>### 1.12 小结<br><br>## 第 2 章  媒体查询：支持不同的视口<br>1.  理解为什么响应式设计需要媒体查询<br>1.  如何构造 CSS3媒体查询<br>1.  我们能够检测哪些设备特性<br>1.  编写第一个 CSS3媒体查询<br>1.  为特定视口设定 CSS样式<br>1.  如何在 iOS和 Android设备上使用媒体查询<br>### 2.1 现在就能使用媒体查询<br>&gt; W3C对规范有一套完整的审批流程（如果你有空， 可以去看看该流程的官方说明，地址：<a href="http://www.w3.org/2005/10/Process-20051014/tr）" target="_blank" rel="noopener">http://www.w3.org/2005/10/Process-20051014/tr）</a> ，从工作 草 案 （ Working Draft ， WD ） ， 到 候 选 推 荐 标 准 （ Candidate Recommendation ， CR ）， 再 到 提 议 推 荐 标 准 （ Proposed Recommendation，PR） ，几年之后，才能成为 W3C 推荐标准（REC） 。<br>&gt;<br>&gt; 所以那些相对成熟的模块使用起来比较安全。比如，<br>### 2.2 为什么响应式设计需要媒体查询<br>#### 2.2.1 媒体查询语法<br>    @media screen and (max-width: 550px) { }<br>    <link rel="stylesheet" media="screen and (orientation: portrait)" href="portrait- 
    screen.css"><br><br>    @import url(“phone.css”) screen and (max-width:360px);<br>切记，使用 CSS 的@import 方式会增加 HTTP 请求（这会影响加载速度） ，所以请谨慎使用该方法。<br>#### 2.2.2  媒体查询能检测那些特性<br>1. width：视口宽度。<br>1. device-width：渲染表面的宽度（对我们来说，就是设备屏幕的宽度） 。<br>1. orientation：检查设备处于横向还是纵向。<br>1. aspect-ratio：基于视口宽度和高度的宽高比。一个 16∶9 比例的显示屏可以这样定义 aspect-ratio: 16/9。<br>1. device-aspect-ratio：和 aspect-ratio 类似，基于设备渲染平面宽度和高度的宽高比。<br>1. color：每种颜色的位数。例如 min-color: 16 会检测设备是否拥有 16位颜色。<br>1. color-index：设备的颜色索引表中的颜色数。值必须是非负整数。<br>1. monochrome：检测单色帧缓冲区中每像素所使用的位数。值必须是非负整数，如monochrome: 2。<br>1. resolution：用来检测屏幕或打印机的分辨率，如 min-resolution: 300dpi。还可以接受每厘米像素点数的度量值，如 min-resolution: 118dpcm。<br>1. scan：电视机的扫描方式，值可设为 progressive（逐行扫描）或 interlace（隔行扫描） 。 如 720p HD电视 （720p的 p即表明是逐行扫描） 匹配 scan: progressive，而 1080i HD 电视（1080i中的 i表明是隔行扫描）匹配 scan: interlace。<br>1. grid：用来检测输出设备是网格设备还是位图设备。<br>#### 2.2.3 用媒体查询改造我们的设计<br>层叠<br>#### 2.2.4 加载媒体查询的最佳方法<br>因此，将不同媒体查询的样式保存到独立的文件中没有太大好处（个人喜好或为便于组织代码除外） 。使用多个独立的文件会增加用于页面渲染的 HTTP请求数量，从而导致页面加载变慢。<br><br>Respond.js（<a href="https://github.com/scottjehl/Respond）是为" target="_blank" rel="noopener">https://github.com/scottjehl/Respond）是为</a> Internet Explorer 8及更低版本增加媒体查询支持的最快的JavaScript工具，但它目前无法解析 CSS的@import 命令。因此，<br>建议在已有的样式表中追加媒体查询样式。使用如下语法即可在已有样式表中加入媒体查询：<br><br>    @media screen and (max-width: 768px) {/<em>样式</em>/}<br>### 2.3 我们的第一个响应式设计<br> <a href="http://www.andthewinnerisnt.com/" target="_blank" rel="noopener">http://www.andthewinnerisnt.com/</a><br>#### 2.3.1 我们的设计是固定宽度的，不要惊讶<br>&gt; 我在 HTML 4页面中使用的重置样式，是在 Eric Meyer 的原版<a href="http://meyerweb.com/eric/tools/css/reset/）基础上加上了我的一些个人偏好及技巧，这些技巧是我从另外一些天才如" target="_blank" rel="noopener">http://meyerweb.com/eric/tools/css/reset/）基础上加上了我的一些个人偏好及技巧，这些技巧是我从另外一些天才如</a> Dan Cederholm （<a href="http://simplebits.com）的代码里学来的" target="_blank" rel="noopener">http://simplebits.com）的代码里学来的</a><br>&gt;<br>&gt; 我 觉 得 针 对 HTML5 文 档 有 更 好 的 选 择 ， 如normalize.css（<a href="http://necolas.github.com/normalize.css/）" target="_blank" rel="noopener">http://necolas.github.com/normalize.css/）</a> ，第 4章会详细介绍。<br>#### 2.3.2 响应式设计中要保证图片尽可能精简<br>不过，所有这些问题都可以使用 HTML5 和 CSS3 来解决。使用 HTML5<br>和 CSS3，而不再是简单插入图片（如我们以前做过的那样） ，会使网站与我们的响应式目标步调一致。  时刻谨记，我们要保证代码和数据都尽可能精简，以便为带宽有限的用户提供愉悦的体验。<br>#### 2.3.3 小视口下的内容剪切<br>### 2.4 阻止移动浏览器自动调整页面大小<br>iOS 和 Android 浏览器都基于 WebKit（<a href="http://www.webkit.org/）核心。这两种浏览器以及很多其他浏览器（如" target="_blank" rel="noopener">http://www.webkit.org/）核心。这两种浏览器以及很多其他浏览器（如</a> Opera Mobile） ，都支持用 viewport meta元素覆盖默认的画布缩放设置。只需要在 HTML的<head><meta name="generator" content="Hexo 3.9.0">标签中插入一个<meta>标签。<meta>标签中可以设置<br>&gt;安装 iOS 模拟器和 Android 模拟器<br>虽然真机测试无可替代， 但还是可以使用Android和iOS模拟器。 Windows、Linux和 Mac版的 Android模拟器都可以免费下载， Android软件开发工具包（SDK）也可以免费安装。下载地址是 <a href="http://developer.android.com/sdk/。" target="_blank" rel="noopener">http://developer.android.com/sdk/。</a> 不过得使用命令行安装，需要你有一颗勇敢的心①。iOS 模拟器是 Xcode开发包（在 Mac App Store中免费下载）的一部分，只能在 Mac OS X上使用。一旦安装了 Xcode，你就可以在这个路径下找到模拟器：~/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications iOS Simulator.app<br>### 2.5 针对不同视口宽度修正设计<br>### 2.6 响应式设计中内容始终优先<br>这样无疑是坚决贯彻“内容优先”原则的合理做法<br>### 2.7 媒体查询只是必要条件之一<br>#### 我们需要流动布局<br>换句话说，它不能适应未来的变化。目前的情形是，页面捕捉到媒体查询设置的断点，然后布局发生变化。但在捕捉到下一个视口断点之前，页面静止不变。<br>我们需要比这更好的策略。针对各种视口的排列组合编写对应的 CSS 样式，无法兼容未来可能出现的设备；而一个完美的设计，往往能在一定程度上适应未来的发展。<br>在这点上我们目前的解决方案尚不完备。目前的效果更像是一个自适应设计，而不是我们想要的真正的响应式设计。我们的设计应该在突变之前保持灵动。要做到这点，需要将呆板的固定布局修改成<strong>灵活的流动布局</strong>。<br>### 2.8 小结<br><br>## 第 3 章  拥抱流式布局<br>1. 理解为什么响应式设计需要百分比布局<br>1. 将元素的固定像素宽度转换为百分比宽度<br>1. 将文字的固定像素大小转换为等量的相对尺寸<br>1. 理解如何找到任意元素的上下文<br>1. 学习如何使图片平滑缩放<br>1. 学习如何为不同的大小的屏幕提供不同的图片<br>1. 学习如何让媒体查询与弹性图片及流式布局协同工作<br>1. 使用 CSS网格系统从头创建一个响应式布局<br>### 3.1 固定布局经不起未来考验<br>因为每次有新东西出来，只要用户要求修改网站，就可以借机收一次费。但是，这种方法不是一种完全兼容未来的网页制作方法。未来，还会出现更多<br>大小不一的视口，我们需要一些适应未知设备的方法。<br>### 3.2 为什么响应式设计需要百分比布局<br>&gt; 百分比布局和媒体查询和谐共处<br>&gt; 事实上，这种网页设计新方法做到了两全其美：使用百分比布局创建流动的弹性界面，同时使用媒体查询来限制元素的变动范围。将这两者组合到一起构成了响应<br>式设计的核心，基于此可以创造出真正完美的设计。<br>### 3.3 将网页从固定布局修改为百分比布局<br>#### 3.3.1 需要牢记的公式<br>#### 3.3.2 设置百分比元素的上下文<br>&gt; 这些数字能四舍五入吗？<br>一些响应式设计技术的批评者（如这篇文章：<a href="http://tripleodeon.com/2010/10/not-a-mobile-web-merely-a-320px-wide-one/）认为在样式表中输入诸如.550724638" target="_blank" rel="noopener">http://tripleodeon.com/2010/10/not-a-mobile-web-merely-a-320px-wide-one/）认为在样式表中输入诸如.550724638</a> 这样的数字很愚蠢。你可能也会疑惑，为什么不将这些小数四舍五入？但支持者们认为，这样做可以提供更加精确的结果。为浏览器提供更加精确的结果可以使其显示效果更加精准。<br>顺便说一下，学过数学的人都应该知道黄金分割率（<a href="http://en.wikipedia.org/wiki/Golden_ratio）" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Golden_ratio）</a> 。黄金分割率是一个很早就被发现且广泛应用于各学科的数学比例，其比值大约为 1:1.61803398874989（如果你想知道保留 10000位小数的黄金分割数，请访问这里：<a href="http://www.maths.surrey.ac.uk/hosted-sites/R.Knott/" target="_blank" rel="noopener">http://www.maths.surrey.ac.uk/hosted-sites/R.Knott/</a> Fibonacci/ phi10000dps.txt） 。怎么看它都不是一个简洁的数字，但是它非常重要。黄金分割率的测量都能做到如此精确，那我相信网页设计同样做得到。<br><br>等等，这不是我们想要的效果。导航链接没再折成两行，但很明显导航链接之间的间距不对。导航链接看上去像一个字典里查不到的长单词……<br>#### 3.3.3 必须时刻牢记上下文<br>这种情况很常见，不过我们有很多方法解决这个问题。我们可以给li标签设置一个明确的宽度值，这个值必须得是一个固定像素宽度或者是一个相对于其包裹元素（#navigation div）的百分比值，但这两种值都无法保证li中的文字灵活可变。<br><br>此外我们可以修改li现在的 CSS代码，将 inline-block 改为 inline：<br>使用 display: inline;（这样可以阻止li元素渲染为块级元素）还可以使导航在不支持 inline-block 的老版本 Internet Explorer（版本 6和 7）中水平显示。<br>不过，我是inline-block 的粉丝，因为它允许我们在现代浏览器中有效的控制外边距和内边距，所以我会让li标签继续保持 inline-blocks 状态（一会可以给 IE6 和 IE7 追加一个覆写样式） ，然后将（没有明确的上下文的）a标签上的百分比外间距挪到li上来。<br><br>我准备先将文字大小从像素尺寸修改为相对单位 em。完成这个工作之后，我们就会注意到另外一个被忽略的问题 ，即让图片随着页面的变化缩放。<br>### 3.4 用 em 替换 px<br>### 3.5 弹性图片<br>    img,object,video,embed { //ie7+<br>        max-width: 100%;<br>    }<br>这些多媒体元素都可以自动缩放了。但是，对于采用的iframe显示视频的网站（比如YouTube） ，这个技术还不行，我们会在第 4 章解决这个问题。眼下，还是专注于图片的缩放问题吧，因为不论何种多媒体元素，原理都是相通的。<br><br>使用这种方法有几个需要斟酌的问题。第一，要提前准备一张足够大的图片，以备大视口使用。但这也就引出了第二个，同时也是非常重要的问题，即无论视口多大，什么设备，都得下载超大图片。可能对某些设备来说，图片大小只要原始图片的 25%就好了。另外，在某些情况下，你还不得不因此而考虑带宽限制。<br>我们呆会儿再说第二个问题，先把图片缩放问题说完。<br>#### 3.5.1 让图片随视口缩放<br>#### 3.5.2 为特定图片指定特定规则<br>    img {<br>        max-width: 100%;<br>    }<br>    .sideBlock img {<br>        max-width: 45%;<br>    }<br>#### 3.5.3 给弹性图片设置阈值<br>    .oscarMain {<br>        float: left;<br>        margin-top: -28px;<br>        width: 28.9398281%; /<em> 698 ÷ 202 </em>/  //3.5.2<br>        max-width: 202px;  //3.5.3<br>    }<br>#### 3.5.4 超级全能的 max-width 属性<br>另一种限制页面无限制扩张的方法是给最外层的#wrapper div 设置max-width 属性，<br>### 3.6 为不同的屏幕尺寸提供不同的图片<br>我们曾指出图片缩放存在一定的问题。图片尺寸必须比其显示尺寸更大以保证渲<br>染效果，否则的话图片可能看起来很糟糕。基于这个原因，图片文件的体积就永远比实际显示所需的大。<br><br>很多人都在研究这个问题，尝试为较小的屏幕尺寸提供较小的图片。第一个著名的例子是 Filament Group的 “响应式图片”（<a href="http://filamentgroup.com/lab/responsive_images_experi" target="_blank" rel="noopener">http://filamentgroup.com/lab/responsive_images_experi</a>_<br>menting_with_context_aware_image_sizing/） 。<br><br>不过最近，我已经转而使用 Matt Wilcox 的“自适应图片” （<a href="http://adaptive-images.com）了。Filament" target="_blank" rel="noopener">http://adaptive-images.com）了。Filament</a> Group的解决方案需要对图片标签做一定修改。Matt Wilcox的解决方案则不需要，而且他的方案会根据标签中已经设定的全尺寸图片自动创建各种尺寸的图片。这种解决方案允许基于一组屏幕尺寸断点，根据用户需要为其提供不同的图片。接下来我们就看一看如何利用该技术实现图片自适应。<br><br>#### 设置自适应图片<br>实现 Adaptive Images解决方案需要 Apache 2、PHP 5.x和 GD库，也就是说<strong>需要 Web服务器端编程</strong>。首先，<br>#### 把背景图片放在其他地方<br>但是在使用自适应图片方案时，建议将那些用于CSS的背景图片（或者那些你不想被缩放的图片）放在另一个目录。自适应图片方案默认为此创建的目录是assets。<br><br>### 3.7 流动网格布局和媒体查询的默契配合<br>你看到了，我们根据视口宽度来改变文字大小，结果就是这组导航链接在 769 像素到无穷大的视口中<strong>都会显示在一行</strong>。这是媒体查询和流动布局和谐共存的又一证据：<strong>媒体查询约束流动布局的变动范围，而流动布局则简化了从一组媒体查询样式过渡到另一组的改变过程</strong>。<br><br>### 3.8 CSS 网格系统<br>褒贬不一.  但同时我也很欣赏它们在快速搭建界面布局上的价值。<br>1. Semantic (<a href="http://semantic.gs)；" target="_blank" rel="noopener">http://semantic.gs)；</a><br>1. Skeleton (<a href="http://getskeleton.com)；" target="_blank" rel="noopener">http://getskeleton.com)；</a><br>1. Less Framework (<a href="http://lessframework.com)；" target="_blank" rel="noopener">http://lessframework.com)；</a><br>1. 1140 CSS Grid (<a href="http://cssgrid.net)；" target="_blank" rel="noopener">http://cssgrid.net)；</a><br>1. Columnal (<a href="http://www.columnal.com)。" target="_blank" rel="noopener">http://www.columnal.com)。</a><br>这些框架中，我个人最喜欢 Columnal 网格系统，因为它有一套内置的集成了媒体查询的流动网格布局，而且它使用了与 960.gs 框架类似的 CSS 命名，960.gs 框架是一套广为开发者和设计师所熟知的非常流行的固定宽度网格系统。<br>#### 使用网格系统快速搭建网站<br>但 Columnal 网格系统最大只支持<br>12列，所以我们将 PSD中的 16列改为 12列。<br>### 3.9 小结<br>响应式设计的 <strong>“移动优先”</strong> （mobile first）思想使它很适宜采纳最简洁、最有效和最具语义的代码。(ar:和本章内容没有关系)<br><br>## 第 4章  响应式设计中的 HTML5<br>1. HTML5的那些部分我们现在就能用？<br>1. 如何编写 HTML5网页<br>1. HTML5的精简之道<br>1. HTML中的废弃零件<br>1. HTML5中的全新语义化元素<br>1. 使用无障碍网页应用技术（WAI-ARIA）来增强语义，支持辅助技术<br>1. 嵌入媒体<br>1. 可响应的 HTML5和 iFrame视频<br>1. 让网站支持离线使用<br>### 4.1 HTML5 的哪些部分现在就能用<br> IE9！当前 HTML 标准草案的内容最终未必全都会出现在 W3C 推荐标准中，但其中有很大一部分新特性现在已经可以用了。<br>#### 4.1.1 大多数网站可以用 HTML5 编写<br>&gt; 什么是腻子脚本？<br>腻子脚本（polyfill）这个词由 Remy Sharp提出，意指使用腻子来补平老版<br>本浏览器的缺陷。因此，腻子脚本具体指的是一段能给老版本浏览器带来新特性的 JavaScript代码。值得注意的是，腻子脚本会给你的代码里追加多余的代码。因此，就算你添加 3个腻子脚本可以让 Internet Explorer 6中网站的渲染效果与其他浏览器一模一样，也并不意味着你一定要这么做<br>#### 4.1.2 腻子脚本和 Modernizr<br>&gt; 想找一种编写优秀 HTML5 代码的捷径？可以考虑 HTML5 样板文件<br>如果你时间紧迫，但却需要一个好的项目起点，可以考虑使用 HTML5样板文件（<a href="http://html5boilerplate.com/）" target="_blank" rel="noopener">http://html5boilerplate.com/）</a> 。样板文件是一个预先做好的融合了“最佳实践”HTML5文件，包含一些基本样式（如之前提到过的normalize.css） 、polyfill和一些必要的工具如 Modernizr。它还包含一个自动合并 CSS和 JS文件、自动删除注释以生成生产环境代码的构建工具。强烈推荐！<br><br>### 4.2 如何编写 HTML5 网页<br>W3C验证器（<a href="http://validator.w3.org/）" target="_blank" rel="noopener">http://validator.w3.org/）</a><br>&gt; HTML5 文档类型为什么这么简短?<br>HTML5的&lt;!DOCTYPE html&gt;文档类型如此简短，目的是以简洁的方式告诉浏览器用 “标准模式” 渲染页面。 这种简洁高效的思想渗透在HTML5的方方面面。<br><br>&gt; 你会说汉语吗?<br>根据 W3C的定义<a href="http://dev.w3.org/html5/spec/Overview.html#attr-lang）" target="_blank" rel="noopener">http://dev.w3.org/html5/spec/Overview.html#attr-lang）</a> ，lang属性用来指定页面元素内容和元素属性值的主语言。如果你的网页不是英语内容， 你最好设定正确的页面语言。 例如对于中文网页， HTML标签应该是。完整的语言列表请见这个网址：<a href="http://www.iana.org/" target="_blank" rel="noopener">http://www.iana.org/</a> assignments/language-subtag-registry。<br><br>最后，..<br>字符编码通常都是 UTF-8，除非你有特殊理由才可能使用其他编码。<br>#### 4.2.1 HTML5 的精简之道<br>这样同样有效。没有结束标签的斜线，没有引号，大小写混杂。甚至，省略head&gt;元素，页面依然有效。XHTML 1.0对这种情况会怎么说呢？<br>#### 4.2.2 HTML5 标签的合理写法<br>对我而言，那些看似多余的字符（用于闭合的斜线和属性值两边的引号）可以提高代码的可读性。因此在编写 HTML5 文档时我倾向于在老式编写风格（这样风格的代码在HTML5 中依然有效，不过可能在验证器或类似检查工具中会产生一些警告）和 HTML5的极简主义之间找到一个平衡。举例说明，以上节的 CSS链接为例，我会这样写：<code>&lt;link href=&quot;CSS/main.css&quot; rel=&quot;stylesheet&quot;/&gt;</code><br>我闭合了标签，使用了引号，但删除了 type 属性。关键是找到一种你自己满意的风格。HTML5不会训斥你，也不会在课堂上批评你糟糕的标签代码，更不会因为你的代码没通过验证而罚你站墙角。<br>#### 4.2.3 伟大的a&gt;标签万岁<br>#### 4.2.4 HTML 的废弃零件<br>你的情况可能和我差不多。如果你好奇，可以在后面这个网址找到完整<br>的非保留废弃零件列表：<a href="http://dev.w3.org/html5/spec/Overview.html#non-conforming-features。" target="_blank" rel="noopener">http://dev.w3.org/html5/spec/Overview.html#non-conforming-features。</a><br>比较常见的非保留废弃零件有 strike、 enter、 font、 acronym、 frame 和 frameset。<br><br>### 4.3 HTML5 的全新语义化元素<br>语义化是给我们的标签赋予意义的过程。为什么语义化很重要？很高兴你问这个问题。<br>#### 4.3.1 section&gt;<br>#### 4.3.2 nav&gt;<br>#### 4.3.3 article&gt;<br>article&gt;元素与section&gt;元素很容易混淆。<br>#### 4.3.4 aside&gt;<br>#### 4.3.5 hgroup&gt;<br>HTML5 的大纲结构算法<br>HTML5允许每个section&gt;容器有自己独立的大纲结构。 这样你就不必总想着现在是几级标题了。例如在一个博客中，博文的标题可以使用h1&gt;标签，同时博客内容的标题也可以包含h1&gt;标签。请见如下代码：<br>1. <a href="http://gsneders.html5.org/outliner/" target="_blank" rel="noopener">http://gsneders.html5.org/outliner/</a><br>1. <a href="http://hoyois.github.com/html5outlier/" target="_blank" rel="noopener">http://hoyois.github.com/html5outlier/</a><br>#### 4.3.6 header&gt;<br>由于header&gt;元素<strong>不计入大纲结构，所以不能用它来划分内容结构</strong>，而是应该用它来包含对区域内容的介绍说明。实际使用中，header&gt;可用作网站头部的“刊头”区域，也可用作对其他内容如article&gt;元素的简要介绍。<br>#### 4.3.7 footer&gt;<br>#### 4.3.8 address&gt;<br>address&gt;元素用于明确地标注离其最近的article&gt;或body&gt;祖先元素的联系信息。<br>为避免产生混淆，请记住ddress&gt;中一般不放具体的邮政地址，除非相应内容确实需要联系地址。而邮政地址和其他可能会改变的联系信息应该使用p&gt;标签来包裹。<br><br>### 4.4 HTML5 结构元素的实际用法<br>&gt; 注意 HTML5 中的元素复用<br>请注意， HTML5页面中可能会有多个\<header>、 \<footer>和\<aside><br>元素，你可能需要为每一个都编写特定的样式。<br><br>需要谨记的是，使用\<section>的目的不是为了美化样式，而是为了标识一个鲜明独立的内容块。一个内容块（section）一般都应该带有标题，这恰好符合我们的需求（用于独立标识） 。考虑到 HTML5的大纲结构，我们可以将上面代码中的\<h4>标签改为\<h1>，这样 HTML5就会为文档生成一个精确的大纲：<br>#### 网站的主体内容怎么办<br>你可能会觉得有点奇怪：没有一个专门的元素用来标记页面主体内容。其实逻辑是这样的，既然可以界定除主体内容之外的其他元素，那么剩下的元素自然就是页面的主体了。<br><br>### 4.5 HTML5 的文本级语义元素<br>除了前面讲过的结构元素，HTML5 还修订了一些被称之为行内元素的标签。HTML5 标准中称这些标签为文本级语义元素<a href="http://dev.w3.org/html5/spec/Overview.html#text-level-" target="_blank" rel="noopener">http://dev.w3.org/html5/spec/Overview.html#text-level-</a><br>semantics） 。<br>#### 4.5.1 b&gt;<br>过去，人们通常利用\<b>元素为文本添加样式，但它的实际用途其实是“给文本加粗” 。<br>不过现在你可以正式地将其仅用作样式钩子了，因为现在 HTML5标准对\<b>的定义是：<br>#### 4.5.2 em&gt;<br>#### 4.5.3 i&gt;<br>HTML5标准中对<i>的描述如下：<br>&gt; ……一小段有不同语态或语气的文字，或者是样子上与普通文章有所差异以便<br>标明不同特点的文字。<br><br>简单地说，它不仅仅是用来给某些文字加斜体效果的。<br>#### 4.5.4 在页面中应用文本层语义元素<br>&gt; 文本层语义元素的默认样式<br>根据过去对\<b>标签的用法，很多浏览器仍会将其渲染为粗体。所以你可以根据实际情况在相关的 CSS代码中重定义其默认样式。<br><br>想要全面了解，请查看 HTML5标准中的相关章节，地址如下：<br><a href="http://dev.w3.org/html5/spec/Overview.html#text-level-semantics" target="_blank" rel="noopener">http://dev.w3.org/html5/spec/Overview.html#text-level-semantics</a><br><br>### 4.6 遵循 WAI-ARIA 实现无障碍站点<br> Web Accessibility Initiative - Accessible Rich Internet Applications<br> 本书着眼点不在于全面讲解无障碍网页应用技术（想要全面了解，请查看 <a href="http://www.w3.org/WAI/intro/aria）" target="_blank" rel="noopener">http://www.w3.org/WAI/intro/aria）</a> ，但我们可以采纳其中一部分容易实施的技术，将其应用到 HTML5网站中，以方便残障用户。<br>### ARIA 的地标角色<br>    <nav role="navigation"><br>1. application：用来定义用作网页应用的区域。<br>1. banner：用来定义一个站点级别（而不是某个特定文档的）的区域。如网站的头部和logo。<br>1. complementary：用来定义一个对页面主要区域进行补充说明的区域。在And the winner isn’t…这个网站中，UNSUNG HEROES和 OVERHYPED NONSENSE区域就可以定义为 complementary。<br>1. contentinfo：用来定义与页面主要内容相关的信息区域。例如页脚的网站版权信息区域。<br>1. form：你猜都能猜到，定义表单！但注意，如果表单用于搜索，则请使用search 来替代。<br>1. main：定义页面的主体内容。<br>1. navigation：用来定义链向当前文档或相关文档的导航链接。<br>1. search：用来定义一个用于搜索的区域。<br>&gt; 无障碍网页应用技术进阶<br>无障碍网页应用技术并非只有地标角色。想要做进阶应用，请参阅完整<br>的角色列表及其简要使用说明：<a href="http://www.w3.org/TR/wai-aria/roles#role_definitions。" target="_blank" rel="noopener">http://www.w3.org/TR/wai-aria/roles#role_definitions。</a><br><br>&gt; 使用非可视桌面阅读器（NVDA）免费测试网站可访问性<br>如果你是在 Windows平台上开发且想使用屏幕阅读器测试网站的可访<br>问性，可以免费使用 NVDA。软件的官方地址如下：<a href="http://www.nvda-project.org/。" target="_blank" rel="noopener">http://www.nvda-project.org/。</a><br><br>&gt; 为使用了无障碍技术的元素设置样式<br>和其他属性一样，可以直接使用属性选择器来为其设置样式。如，使用nav[role=”navigation”] {}可以为导航区域设置样式。<br><br>### 4.7 在 HTML5 中嵌入媒体<br>正如你所预想，IE8及更低版本都不支持 HTML5视频和音频。不过给微软的“先天不足”的浏览器提供备用解决方案也很简单，稍后我们会讨论这个问题。<br>### 4.8 用 HTML5 的方法为页面添加视频或音频<br>#### 4.8.1 提供备用的媒体源文件<br>#### 4.8.2 针对老版本浏览器的备用方案<br>    <video width="640" height="480" controls autoplay reload="auto" loop poster="myVideoPoster.jpg"><br>        <source src="video/myVideo.mp4" type="video/mp4"><br>        <source src="video/myVideo.ogv" type="video/ogg"><br>        <object width="640" height="480" type="application/x-shockwave-flash" data="myFlashVideo.SWF"><br>            <param name="movie" value="myFlashVideo.swf"><br>            <param name="flashvars" value="controlbar=over&amp;image=myVideoPoster.jpg&amp; file=video/myVideo.mp4"><br>            <img src="http://you img base url/myVideoPoster.jpg?e=1603016372&token=your qiniu access key:HwXCZerXFx2m3kQh5ZQXr63vfGA=" width="640" height="480" alt="__TITLE__" title="No video playback capabilities, please download the video below"><br>        </object><br>        <p>  <b>Download Video:</b><br>            MP4 Format:  <a href="myVideo.mp4">“MP4”</a><br>            Ogg Format:  <a href="myVideo.ogv">“Ogg”</a><br>        </p><br>    </video><br>#### 4.8.3 和标签的用法基本一致<br>### 4.9 响应式视频<br>然后在 CSS中追加如下代码：video { max-width: 100%; height: auto; }<br>这种方法对本页面中的视频文件很有用，但它不能解决使用 iframe 嵌入的视频的响应问题 （拜YouTube、 Vimeo等等视频网站所赐） 。<br><br>但截至目前我见过的最简单的办法是使用一个名为 FitVids的 jQuery小插件。<br>### 4.10 离线 Web 应用<br>虽然 HTML5 中的大量新特性对我们的响应式设计没有明显帮助（如地理定位 API） ，但离线 Web 应用应该还有点用处。<br>#### 4.10.1 离线 Web 应用概述<br>离线Web应用的运行机制是每个需要离线使用的网页都指定一个后缀名为.manifest的文本文件。这个文本文件罗列了该网页离线使用时所需的所有资源文件（HTML、图片JavaScript等等） 。支持离线 Web应用的浏览器会自动读取.manifest 文件，下载文件中所罗列的资源文件，并将其缓存在本地以备网络断开时使用。简单吧？那我们来动手试一试……<br>#### 4.10.2 让网页可离线使用<br>    <html lang="en" manifest="/offline.manifest" 该文件的文件名随意，但后缀名建议使用.manifest。> 你必须在每一个准备离线使用的页面的HTML标签中都追加manifest=<br>“/offline.manifest”属性。<br><br>如果使用的是 Apache服务器，你可能还需要修改一下.htaccess 文件，追加一行代码：AddType text/cache-manifest .manifest 这样就保证了.manifest 文件拥有正确的 MIME类型，即 text/cache-manifest。在.htaccess 文件中还可以加入以下代码：<br><br>    <files offline.manifest><br>        ExpiresActive On<br>        ExpiresDefault “access”<br>    </files><br>添加上面这几行代码， 可以阻止浏览器缓存缓存文件。 你没看错。 因为 offline.manifest是一个静态文件，浏览器默认就会缓存 offline.manifest 文件。所以上面这几行代码就是让服务器告诉浏览器不要这么干！<br>现在我们需要给 offline.manifest 填充内容。 即通知浏览器那些文件是用作离线存储的。And the winner isn’t…网站的 offline.manifest 文件内容如下：<br><br>    CACHE MANIFEST<br>    #v1<br><br>    CACHE:<br>    basic_page_layout_ch4.html<br>    css/main.css<br>    img/atwiNavBg.png<br>    img/kingHong.jpg<br>    img/midnightRun.jpg<br>    img/moulinRouge.jpg<br>    img/oscar.png<br>    img/wyattEarp.jpg<br>    img/buntingSlice3Invert.png<br>    img/buntingSlice3.png<br><br>    NETWORK:<br>    <em><br><br>    FALLBACK:<br>    //offline.html<br>#### 4.10.3 理解 manifest 文件<br>manifest 文件必须以 CACHE MANIFEST 开头。第二行就是一句注释，注明了 manifest 文件的版本号。这句注释的用途稍后详细介绍。<br><br>CACHE:部分罗列了所有离线使用所需的文件。 这些文件的路径都是相对 offline.manifest而言的，所以文件路径可能需要根据情况稍作修改。使用绝对路径也是可以的。<br><br>NETWORK:部分罗列了所有不需要被缓存的文件。你可以将其看成是一个“在线白名单” 。此处罗列的文件在网络畅通的情况下都会直接跳过缓存。如果你想网站内容在网络畅通的情况下及时更新（而不是仅在离线缓存中查找） ，可以在此处使用</em>。星号被称为在线白名单通配符。<br><br>FALLBACK:部分使用/字符定义了一个 URL模板。它的作用是访问每个页面时都会问“缓存中有这个页面吗？” ， 如果有则显示缓存页面， 如果没有则显示指定的 offline.html 文件。<br>#### 4.10.4 页面被自动加载到离线缓存<br>根据实际情况，还有一种更简单的办法来设置 offline.manifest 文件。任何指定了离线 manifest 文件的页面（就是在标签中追加了manifest=”/offline.manifest”的页面）在被用户访问时都会被自动加入到本地缓存。浏览器会缓存用户访问过的每一个网页以确保这些网页在离线状态下仍可访问。简化的 manifest文件如下：<br><br>    CACHE MANIFEST<br>    # Cache Manifest v1<br>    FALLBACK:<br>    //offline.html<br>    NETWORK:<br>    *<br>选择使用这个方法时有一点需要注意， 这种方法只会下载和缓存用户访问的 HTML页面，不会缓存页面内引入的图片、 JavaScript或者其他资源文件。 如果这些资源文件是必需的，那么请按照上节中的方法在 CACHE:部分专门声明这类文件。<br>#### 4.10.5 版本注释的用途<br>对网站内容或任何资源文件做了修改之后， 你必须得对 offline.manifest 文件也做点修改并将其重新上传服务器。这样就能让服务器为浏览器提供新版本文件，而浏览器则会下载该新版本文件并再次触发离线存储进程。<br>我效仿了 Mark Pilgrim 的例子（来自著名的《畅游 HTML5》 一书） ，在offline.manifest 文件的头部加了一句注释，每次修改网站都会对应地修改该版本号：<br>&gt; 作者此处说得不是很清楚。补充一下：如果开发者对网站内容或资源做了修改，那么也得通知浏览器更新缓存文件，否则浏览器仍然会使用之前已有的缓存文件。而通知浏览器更新缓存文件的方式通常是更新 manifest 文件，浏览器如果发现 manifest 文件发生了变化，就会更新缓存文件。大多数情况下manifest 中的缓存文件清单不会发生变化，那我们就通过修改注释的方式来改变 manifest文件，注释中的版本号，既能触发文件变化，又能指明当前版本，一举两得。其实注释中还可以加入更新时间等更详细信息，有助于维护。文中提到的《畅游 HTML5》 ，参见 <a href="http://diveintohtml5.com/。——译者注" target="_blank" rel="noopener">http://diveintohtml5.com/。——译者注</a><br>#### 4.10.6 离线访问网站<br>#### 4.10.7 离线 Web 应用的故障诊断<br>### 4.11 小结<br><p style="text-align:right">11.18 02:20</p><br><p style="text-align:right">2017.11.19 日 11:20</p>

<h2 id="第-5-章-CSS3：选择器、字体和颜色模式"><a href="#第-5-章-CSS3：选择器、字体和颜色模式" class="headerlink" title="第 5 章  CSS3：选择器、字体和颜色模式"></a>第 5 章  CSS3：选择器、字体和颜色模式</h2><ol>
<li>CSS3给前端开发人员带来了什么   </li>
<li>快速而便捷的 CSS3技巧（多列布局和文字换行）   </li>
<li>CSS规则解析   </li>
<li>私有前缀的来源和用法  </li>
<li>新的 CSS3选择器的工作原理   </li>
<li>使用@font-face 设定字体    </li>
<li>如何使用带有透明度的 RGB和 HSL颜色模式   <h3 id="5-1-CSS3-给前端开发人员带来了什么"><a href="#5-1-CSS3-给前端开发人员带来了什么" class="headerlink" title="5.1 CSS3 给前端开发人员带来了什么"></a>5.1 CSS3 给前端开发人员带来了什么</h3><h4 id="5-1-1-Internet-Explorer-6-到-8-对-CSS3-的支持"><a href="#5-1-1-Internet-Explorer-6-到-8-对-CSS3-的支持" class="headerlink" title="5.1.1 Internet Explorer 6 到 8 对 CSS3 的支持"></a>5.1.1 Internet Explorer 6 到 8 对 CSS3 的支持</h4>除少数例外（如@font-face） ，老版本的 IE（IE 6、7、8）几乎不支持 CSS3的新特性。<br>那么我们可以在设计开发中使用 CSS3吗？和以前一样，答案依然是： “看情况。 ”<br>就我个人而言，目前我主要将 CSS3用作增强网站，而不是用它提供基本功能。我非常喜欢页面元素在不同的浏览器中看起来有点差异，相信你和你的客户也是这样。<blockquote>
<p>各版本 Internet Explorer对 CSS 2.1和 CSS3特性的支持情况，请见如下<br>网址：<a href="http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx（或" target="_blank" rel="noopener">http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx（或</a> <a href="http://tinyurl.com/495756c）" target="_blank" rel="noopener">http://tinyurl.com/495756c）</a> </p>
</blockquote>
<h4 id="5-1-2-使用-CSS3-设计和开发页面"><a href="#5-1-2-使用-CSS3-设计和开发页面" class="headerlink" title="5.1.2 使用 CSS3 设计和开发页面"></a>5.1.2 使用 CSS3 设计和开发页面</h4><h3 id="5-2-CSS-规则解析"><a href="#5-2-CSS-规则解析" class="headerlink" title="5.2 CSS 规则解析"></a>5.2 CSS 规则解析</h3><h3 id="5-3-私有前缀及其用法"><a href="#5-3-私有前缀及其用法" class="headerlink" title="5.3 私有前缀及其用法"></a>5.3 私有前缀及其用法</h3><blockquote>
<p>可快速编辑 CSS3 前缀的代码片段和 JavaScript 方案<br>建立包含所有必需的私有前缀属性的代码片段会带来极大便利。这样你就可以直接粘贴代码而不用每次都重新输入。很多代码编辑程序（或者集成开发环境） 带有代码片段功能， 这样在开发 CSS3时能节省很多时间。<br>也有可以为 CSS文件自动追加前缀的 JavaScript方案， 比如“-prefix-free” ，很不错的解决方案，网址是<a href="http://leaverou.github.com/prefixfree/。" target="_blank" rel="noopener">http://leaverou.github.com/prefixfree/。</a></p>
</blockquote>
</li>
</ol>
<blockquote>
<p>什么时候可以使用特定的 CSS3 和 HTML5 特性？<br>随着对 CSS3 研究的不断深入，我衷心建议大家去看看这个网站 http://<br>caniuse.com，在这里你可以知道当前浏览器对特定 CSS3和 HTML5特性的<br>支持程度。除了显示浏览器的特性支持情况之外（可按特性搜索） ，它还提<br>供了来自于 <a href="http://gs.statcounter.com的最近的全球浏览器使用率统计" target="_blank" rel="noopener">http://gs.statcounter.com的最近的全球浏览器使用率统计</a></p>
</blockquote>
<h3 id="5-4-快速而有效的-CSS-技巧"><a href="#5-4-快速而有效的-CSS-技巧" class="headerlink" title="5.4 快速而有效的 CSS 技巧"></a>5.4 快速而有效的 CSS 技巧</h3><h4 id="5-4-1-CSS3-多栏布局"><a href="#5-4-1-CSS3-多栏布局" class="headerlink" title="5.4.1 CSS3 多栏布局"></a>5.4.1 CSS3 多栏布局</h4><h5 id="增加栏位间隙和分割线"><a href="#增加栏位间隙和分割线" class="headerlink" title="增加栏位间隙和分割线"></a>增加栏位间隙和分割线</h5><h4 id="5-4-2-文字换行"><a href="#5-4-2-文字换行" class="headerlink" title="5.4.2 文字换行"></a>5.4.2 文字换行</h4><p>CSS3 使用了一个简单的声明解决了这个问题，凑巧的是老版本 IE 均支持该声明，甚至可以追溯到 IE 5.5！<code>word-wrap: break-word;</code> </p>
<h3 id="5-5-CSS3-的新增选择器及其用法"><a href="#5-5-CSS3-的新增选择器及其用法" class="headerlink" title="5.5 CSS3 的新增选择器及其用法"></a>5.5 CSS3 的新增选择器及其用法</h3><h4 id="5-5-1-CSS3-属性选择器"><a href="#5-5-1-CSS3-属性选择器" class="headerlink" title="5.5.1 CSS3 属性选择器"></a>5.5.1 CSS3 属性选择器</h4><ol>
<li>CSS3 的子字符串匹配属性选择器  三种匹配模式分别是</li>
<li>一个活生生的例子 <blockquote>
<p>HTML5 中的 ID 值可以用数字开头<br>如果你还不习惯 HTML5，可能会认为 ID 值以数字开头是无效的，因为HTML 4.01 是这样规定的。HTML5 取消了这个限制，HTML 的 ID 命名方面唯一需要记住的是名字中间不能有空格且保证在页面中唯一。详细信息请参阅<a href="http://dev.w3.org/html5/spec/Overview.html#the-id-attribute。" target="_blank" rel="noopener">http://dev.w3.org/html5/spec/Overview.html#the-id-attribute。</a></p>
</blockquote>
<h4 id="5-5-2-CSS3-结构伪类"><a href="#5-5-2-CSS3-结构伪类" class="headerlink" title="5.5.2 CSS3 结构伪类"></a>5.5.2 CSS3 结构伪类</h4></li>
<li>:last-child 选择器 </li>
<li>nth-child 选择器 </li>
<li><p>理解 nth 规则的作用<br> 而数值表达式对我们来说有点不好理解，我们来分析一下。为了便于理解，我们从括号内表达式的右边开始分析。例如我想确定(2n+3)会选择那些元素，就从右边开始（即从第 3 个元素开始） ，然后就知道它是从这个元素开始每两个元素选择一个。<br> 数值表达式中也可以使用负数，例如:nth-child(3n-2)，即表示从倒数第 2 个元素开始然后每三个元素选择一个。</p>
<p> child 和 last-child 的区别在于，last-child 是从文档节点树的末尾开始算。比如:nth-last-child(-n+3)就是从倒数第 3个元素开始， 向后选择之后的所有元素 （因为使用了-n，所以方向是向后） 。</p>
</li>
</ol>
<p>最后，我们来看看:nth-last-of-type。   </p>
<blockquote>
<p>CSS3 的计数方式和 jQuery 不太一样<br>如果你经常使用 jQuery就会知道，jQuery中的计数是从 0开始的。比如在 jQuery 中使用整数 1 来选择元素，实际上会选中第二个元素。但在CSS3中，计数从 1开始，所以整数 1会匹配第一个元素。 </p>
<ol start="4">
<li>否定（:not）选择器  </li>
</ol>
</blockquote>
<p>除此之外，CSS3还有很多其他选择器。如果你在开发 Web应用，那完整的 UI元素状态伪类列表<a href="http://www.w3.org/TR/selectors/#UIstates）则值得一读，它对你极有帮助，例如可以让你根据元素被选中与否来应用样式规则。" target="_blank" rel="noopener">http://www.w3.org/TR/selectors/#UIstates）则值得一读，它对你极有帮助，例如可以让你根据元素被选中与否来应用样式规则。</a> </p>
<h4 id="5-5-3-对伪元素的修正"><a href="#5-5-3-对伪元素的修正" class="headerlink" title="5.5.3 对伪元素的修正"></a>5.5.3 对伪元素的修正</h4><p>CSS3要求对伪元素使用两个冒号以便与伪类进行区别。因此刚才的例子应该改写为 p::first-letter。<strong>但注意 Internet Explorer 8及更低版本的 IE无法<br>识别两个冒号的语法，它们只识别一个冒号</strong>。</p>
<p><strong>:first-line 对响应式设计来说好用吗</strong><br>于是，在响应式设计中就有了一种方法，不需要修改标签代码，即可方便地将文本第一行内容（即浏览器渲染出来的第一行，不是标签代码中的第一行）显示得与众不同。 </p>
<h3 id="5-6-自定义网页字体"><a href="#5-6-自定义网页字体" class="headerlink" title="5.6 自定义网页字体"></a>5.6 自定义网页字体</h3><p>多年来我们一直被迫使用一组单调乏味的 Web 安全字体。当网页设计中确实需要一些优雅的字体时， 我们通常都是使用图片来替代， 并对元素使用text-indent 规则将实际的文本移出视口范围。<br>曾有一些稍微高级点的备选方案，来为网页增加更加个性的字体效果。sIFR（<a href="http://www.mikeindustries.com/blog/sifr/）和" target="_blank" rel="noopener">http://www.mikeindustries.com/blog/sifr/）和</a> Cufón（<a href="http://cufon.shoqolate.com/generate/）都使用" target="_blank" rel="noopener">http://cufon.shoqolate.com/generate/）都使用</a> Flash和 JavaScript来重建文本元素，然后使用自定义字体来显示内容。但是在响应式设计中，</p>
<h4 id="5-6-1-font-face-规则"><a href="#5-6-1-font-face-规则" class="headerlink" title="5.6.1 @font-face 规则"></a>5.6.1 @font-face 规则</h4><p>@font-face 规则在 CSS2中已经存在（但随后在 CSS 2.1中被删除） 。IE 4甚至对其提供了部分支持（真的，不骗你） ！</p>
<p>但浏览器厂商对不同的字体格式和具体实现仍在争论。如Embedded OpenType（EOT）字体是 Internet Explorer的首选格式（其他浏览器都不支持） ，其他浏览器更钟爱常见的 TrueType格式（TTF） ，还有 Scalable Vector Graphics (SVG)以及 Web Open Font Format (WOFF)。使用@font-face 为网页设定字体时，可谓喜忧参半。</p>
<h4 id="5-6-2-使用-font-face-嵌入网页字体"><a href="#5-6-2-使用-font-face-嵌入网页字体" class="headerlink" title="5.6.2 使用@font-face 嵌入网页字体"></a>5.6.2 使用@font-face 嵌入网页字体</h4><p>首先我们得有字体。 网上有很多很棒的字体资源站点， 有免费的也有收费的。 虽然 Google也提供了免费的网页字体，且基本上都可使用@font-face 规则 （<a href="http://www.google.com/webfonts）" target="_blank" rel="noopener">www.google.com/webfonts）</a> ，但我个人最喜欢 Font Squirrel  （<a href="http://www.fontsquirrel.com）" target="_blank" rel="noopener">www.fontsquirrel.com）</a> 。另外还有 Typekit<br>（<a href="http://www.typekit.com）" target="_blank" rel="noopener">www.typekit.com）</a> 和 Font Deck（<a href="http://www.fontdeck.com）上也有一些非常优秀的付费字体。" target="_blank" rel="noopener">www.fontdeck.com）上也有一些非常优秀的付费字体。</a>  </p>
<h3 id="5-7-帮帮我，标题模糊怎么办"><a href="#5-7-帮帮我，标题模糊怎么办" class="headerlink" title="5.7 帮帮我，标题模糊怎么办"></a>5.7 帮帮我，标题模糊怎么办</h3><p>后来，我发现导致该问题的原因是字体粗细。除非显式声明 font-weight 属性，否则大多数浏览器都会为标题元素应用标准的 font-weight （一般都是 700） 。 因此解决方法就是始终为应用了@font-face 字体的标题元素设定 font-weight 属性。</p>
<p>唯一需要注意的，是在响应式设计中使用该技术时要考虑到字体文件大小。</p>
<blockquote>
<p>真正的响应式字体单位还不能广泛使用<br>当前的 CSS3 字体模块工作草案中引入了视口相对字体（<a href="http://www.w3" target="_blank" rel="noopener">http://www.w3</a>.<br>org/ TR/ css3-values/#viewport-relative-lengths） 。 相对单位 vw （视口宽度） 、vh（视口高度）和 vm（视口最小边长，即 vm 和 vh 中较小的一个）在获得浏览器广泛支持之后，能为我们节省大量开发时间。悲哀的是目前<br>除了 IE 9之外，其他浏览器都不支持视口相对单位。</p>
</blockquote>
<h3 id="5-8-新的-CSS3-颜色格式和透明度"><a href="#5-8-新的-CSS3-颜色格式和透明度" class="headerlink" title="5.8 新的 CSS3 颜色格式和透明度"></a>5.8 新的 CSS3 颜色格式和透明度</h3><h4 id="5-8-1-RGB-颜色"><a href="#5-8-1-RGB-颜色" class="headerlink" title="5.8.1 RGB 颜色"></a>5.8.1 RGB 颜色</h4><h4 id="5-8-2-HSL-颜色"><a href="#5-8-2-HSL-颜色" class="headerlink" title="5.8.2 HSL 颜色"></a>5.8.2 HSL 颜色</h4><p>除了 RGB，CSS3还可使用 HSL（色相、饱和度、亮度）模式来声明颜色。</p>
<blockquote>
<p>HSL 不是 HSB<br>不要错误地认为图片编辑软件如 Photoshop中显示的 HSB（色相、饱和度、明度）值就是 HSL——它们不一样①！<br>HSL模式基于一个 360°的色相环，第一个数字代表色相，其后的两个值分别表示饱和度和亮度，值为百分比，用于改变基础的色相。<br>Young Guys Can Be Messy Rascals 60黄，绿 青 蓝 洋红 360红</p>
</blockquote>
<h4 id="5-8-3-针对-IE6、IE7-和-IE8-提供备用颜色值"><a href="#5-8-3-针对-IE6、IE7-和-IE8-提供备用颜色值" class="headerlink" title="5.8.3 针对 IE6、IE7 和 IE8 提供备用颜色值"></a>5.8.3 针对 IE6、IE7 和 IE8 提供备用颜色值</h4><p>你可能都猜到了，版本 9 以下的 IE 浏览器不支持 RGB 和 HSL。</p>
<h4 id="5-8-4-透明通道"><a href="#5-8-4-透明通道" class="headerlink" title="5.8.4 透明通道"></a>5.8.4 透明通道</h4><h3 id="5-9-小结"><a href="#5-9-小结" class="headerlink" title="5.9 小结"></a>5.9 小结</h3><h2 id="第-6章-用-CSS3创造令人惊艳的美"><a href="#第-6章-用-CSS3创造令人惊艳的美" class="headerlink" title="第 6章  用 CSS3创造令人惊艳的美"></a>第 6章  用 CSS3创造令人惊艳的美</h2><ol>
<li>使用 CSS3制作文字阴影   </li>
<li>使用 CSS3制作盒阴影（即元素投影）   </li>
<li>使用 CSS3制作渐变背景      </li>
<li>使用 CSS3的多重背景图片       </li>
<li>使用 CSS3背景渐变来制作图案     </li>
<li>使用 CSS3的@font-face 规则来制作节省带宽的图标     <h3 id="6-1-文字阴影"><a href="#6-1-文字阴影" class="headerlink" title="6.1 文字阴影"></a>6.1 文字阴影</h3><h4 id="6-1-1-HEX、HSL-或-RGB-颜色都可以"><a href="#6-1-1-HEX、HSL-或-RGB-颜色都可以" class="headerlink" title="6.1.1 HEX、HSL 或 RGB 颜色都可以"></a>6.1.1 HEX、HSL 或 RGB 颜色都可以</h4><h4 id="6-1-2-px、em-或-rem-都行"><a href="#6-1-2-px、em-或-rem-都行" class="headerlink" title="6.1.2 px、em 或 rem 都行"></a>6.1.2 px、em 或 rem 都行</h4>我个人其实很少用 em 或 rem 作为阴影大小的单位。因为阴影一般都比较小，一个或两个像素的阴影，在所有视口中的效果都很不错。 <h4 id="6-1-3-取消文字阴影"><a href="#6-1-3-取消文字阴影" class="headerlink" title="6.1.3 取消文字阴影"></a>6.1.3 取消文字阴影</h4><h5 id="左上方阴影"><a href="#左上方阴影" class="headerlink" title="左上方阴影"></a>左上方阴影</h5>使用负值<h4 id="6-1-4-制作浮雕文字阴影效果"><a href="#6-1-4-制作浮雕文字阴影效果" class="headerlink" title="6.1.4 制作浮雕文字阴影效果"></a>6.1.4 制作浮雕文字阴影效果</h4>这种效果一般最适合应用在非白色背景的深色文字上，搭配以高亮颜色（如纯白色或类似颜色）的阴影。<blockquote>
<p>想要最好的浮雕文字效果，我有诀窍：不要模糊，不要水平阴影，仅在垂直方向设置 1或 2像素的“白影”即可。 </p>
</blockquote>
<h4 id="6-1-5-多重文字阴影"><a href="#6-1-5-多重文字阴影" class="headerlink" title="6.1.5 多重文字阴影"></a>6.1.5 多重文字阴影</h4>只需将两组值使用逗号分隔开即可<h3 id="6-2-盒阴影"><a href="#6-2-盒阴影" class="headerlink" title="6.2 盒阴影"></a>6.2 盒阴影</h3>但是，盒阴影的的跨浏览器支持并不好，所以明智的做法是使用浏览器私有前缀<h4 id="6-2-1-内阴影"><a href="#6-2-1-内阴影" class="headerlink" title="6.2.1 内阴影"></a>6.2.1 内阴影</h4> box-shadow:inset 0 0 40px #000000; <h4 id="6-2-2-多重阴影"><a href="#6-2-2-多重阴影" class="headerlink" title="6.2.2 多重阴影"></a>6.2.2 多重阴影</h4>这样两组阴影就会按照代码中的先后顺序从上到下应用到元素上。换句话说，就是代码中先声明的规则，在浏览器中会覆盖下面的规则。 <h4 id="6-3-背景渐变"><a href="#6-3-背景渐变" class="headerlink" title="6.3 背景渐变"></a>6.3 背景渐变</h4><h5 id="6-3-1-线性背景渐变"><a href="#6-3-1-线性背景渐变" class="headerlink" title="6.3.1 线性背景渐变"></a>6.3.1 线性背景渐变</h5>背景渐变唯一美中不足的是它不像其他一些 CSS3 特性那样被广泛支持。比如 IE 9 就没有对它的原生支持（微软承诺在 IE 10中支持） 。</li>
</ol>
<p>作为老版本浏览器的降级方案，最好先定义一个固定背景颜色，</p>
<h5 id="分解线性渐变语法"><a href="#分解线性渐变语法" class="headerlink" title="分解线性渐变语法"></a>分解线性渐变语法</h5><h4 id="6-3-2-径向背景渐变"><a href="#6-3-2-径向背景渐变" class="headerlink" title="6.3.2 径向背景渐变"></a>6.3.2 径向背景渐变</h4><h5 id="分解径向渐变语法"><a href="#分解径向渐变语法" class="headerlink" title="分解径向渐变语法"></a>分解径向渐变语法</h5><pre><code>background: radial-gradient(center, ellipse cover, #ffffff 72%, #dddddd 100%); 
</code></pre><ol>
<li>closest-side： （渐变形状是圆形时） 以距离中心点最近的一边为渐变半径， 或者 （渐变形状是椭圆形时）以距离中心点最近的水平或垂直边为渐变半径。   </li>
<li>closest-corner：以距离中心点最近的一角为渐变半径。 </li>
<li>farthest-side：和 closest-side 正好相反， （渐变形状是圆形时）以距离中心点最远的一边为渐变半径，或者（渐变形状是椭圆形时）以距离中心点最远的水平或垂直边为渐变半径。   </li>
<li>farthest-corner：以距离中心点最远的一角为渐变半径。   </li>
<li>cover：和 farthest-corner 完全一样。   </li>
<li><p>contain：和 closest-side 完全一样。    </p>
<blockquote>
<p>制作完美 CSS3 渐变的简便方法<br>如果写出一个 CSS3 渐变对你来说有点难度，那你可以考虑使用在线渐变生成器。我个人最喜欢的渐变生成器是 <a href="http://www.colorzilla.com/" target="_blank" rel="noopener">http://www.colorzilla.com/</a><br>gradient-editor/。 它的用户界面风格很像图像处理软件， 你可以选择颜色、过渡点、渐变风格（线性渐变或径向渐变） ，甚至可以选择自己喜欢的<br>颜色空间（HEX、RGB(A)、HSL(A)） 。这个在线渐变生成器还会加载一些预置的渐变供你选用和修改。如果这些还不足以打动你，须知它还提供了可选的代码设置，用来修正 IE 9，让它显示渐变效果，而且还为老版本浏览器提供了备用的背景颜色。还是不动心？它还能基于已有的图片直接生成渐变，这个功能怎么样？我想这下总该打动你了。       </p>
</blockquote>
<h4 id="6-3-3-重复渐变"><a href="#6-3-3-重复渐变" class="headerlink" title="6.3.3 重复渐变"></a>6.3.3 重复渐变</h4><p> background: repeating-linear-gradient(90deg, #ffffff 0px, hsla(0, 1%, 50%,0.1) 5px);<br> background: repeating-radial-gradient(2px 2px, ellipse,  </p>
<pre><code>hsla(0,0%,100%,1) 2px, hsla(0,0%,95%,1) 10px,  
hsla(0,0%,93%,1) 15px, hsla(0,0%,100%,1) 20px);     
</code></pre><h4 id="6-4-背景渐变图案"><a href="#6-4-背景渐变图案" class="headerlink" title="6.4 背景渐变图案"></a>6.4 背景渐变图案</h4><p>CSS 高手 Lea Verou 收集了一系列 CSS3 背景渐变图案，具体请见<a href="http://lea.verou.me/css3patterns/。" target="_blank" rel="noopener">http://lea.verou.me/css3patterns/。</a> </p>
<h4 id="6-5-CSS3-的响应性"><a href="#6-5-CSS3-的响应性" class="headerlink" title="6.5 CSS3 的响应性"></a>6.5 CSS3 的响应性</h4><h4 id="6-6-组合使用-CSS3-属性"><a href="#6-6-组合使用-CSS3-属性" class="headerlink" title="6.6 组合使用 CSS3 属性"></a>6.6 组合使用 CSS3 属性</h4><p>还有最后一个问题，原始设计图中的那两个尖括号（即 HTML中的\&raquo;）使用了与按钮文字不一样的字体。但在此处为这么一个特殊符号专门引入一种字体不太划算，所以我准备将这个符号用一个内联标签包裹起来，然后增大它的字号。</p>
<h4 id="6-7-多重背景图片"><a href="#6-7-多重背景图片" class="headerlink" title="6.7 多重背景图片"></a>6.7 多重背景图片</h4><p>有一种很常见的设计需求，就是制作一个顶部和底部使用不同背景图片的页面。<br>除了 IE 8及更低版本外，其他浏览器均支持该特性。语法如下：</p>
<p> background:  </p>
<pre><code>url(&apos;../img/1.png&apos;) center, 
url(&apos;../img/2.png&apos;), 
url(&apos;../img/3.png&apos;) left bottom, black; 
</code></pre><h5 id="6-7-1-背景图片大小"><a href="#6-7-1-背景图片大小" class="headerlink" title="6.7.1 背景图片大小"></a>6.7.1 背景图片大小</h5></li>
<li>auto：使用图片的原始大小；   </li>
<li>cover：按照原始图片的长宽比缩放图片以填充整个元素区域；   </li>
<li>contain：按照原始图片的长宽比缩放图片以使其较长的一边适应元素大小。<h5 id="6-7-2-背景图片位置"><a href="#6-7-2-背景图片位置" class="headerlink" title="6.7.2 背景图片位置"></a>6.7.2 背景图片位置</h5><h5 id="6-7-3-背景属性的缩写语法"><a href="#6-7-3-背景属性的缩写语法" class="headerlink" title="6.7.3 背景属性的缩写语法"></a>6.7.3 背景属性的缩写语法</h5>可以使用缩写语法将各种背景属性组合起来。但是以我的经验看，这样会产生捉摸不定的结果。所以我更倾向于使用普通写法，先声明多重背景图片，然后声明背景大小，最后声明背景位置。       <h4 id="6-8-更多-CSS-特性"><a href="#6-8-更多-CSS-特性" class="headerlink" title="6.8 更多 CSS 特性"></a>6.8 更多 CSS 特性</h4><h4 id="6-9-可缩放图标：响应式设计中的完美选择"><a href="#6-9-可缩放图标：响应式设计中的完美选择" class="headerlink" title="6.9 可缩放图标：响应式设计中的完美选择"></a>6.9 可缩放图标：响应式设计中的完美选择</h4>@font-face图标就是将字符做成常用图标的特定字体。以往我们都是使用很多单独的图标图片，或者将图标图片组合成一张很大的雪碧图，而@font-face 图标则可以让你只用一种字体就涵盖所有要用的图标（这样就只需要一个 http 请求，唔哈哈！ ） 。另外，因为使用的是字体，所以图标就可以完美缩放了——这与响应式设计真可谓天作之合。Fico 上就有很好的@font-face图标，详情请见 <a href="http://fico.lensco.be/。" target="_blank" rel="noopener">http://fico.lensco.be/。</a><h4 id="6-10-小结"><a href="#6-10-小结" class="headerlink" title="6.10 小结"></a>6.10 小结</h4></li>
</ol>
<h2 id="第-7章-CSS3的过渡、变形和动画"><a href="#第-7章-CSS3的过渡、变形和动画" class="headerlink" title="第 7章  CSS3的过渡、变形和动画"></a>第 7章  CSS3的过渡、变形和动画</h2><ol>
<li>什么是 CSS3过渡以及如何使用它    </li>
<li>如何编写 CSS3过渡以及它的缩写语法    </li>
<li>CSS3过渡时间函数（ease、cubic-bezier等）       </li>
<li>响应式网站中有趣的过滤效果       </li>
<li>什么是 CSS3变换以及如何使用它        </li>
<li>理解不同的 2D变换（scale、rotate、skew,、translate 等）       </li>
<li>尝试 3D变换          </li>
<li>CSS3动画效果（使用关键帧）      <h3 id="7-1-什么是-CSS3-过渡以及如何使用它"><a href="#7-1-什么是-CSS3-过渡以及如何使用它" class="headerlink" title="7.1 什么是 CSS3 过渡以及如何使用它"></a>7.1 什么是 CSS3 过渡以及如何使用它</h3><h4 id="7-1-1-过渡相关的属性"><a href="#7-1-1-过渡相关的属性" class="headerlink" title="7.1.1 过渡相关的属性"></a>7.1.1 过渡相关的属性</h4></li>
<li><p>过渡的简写语法   </p>
<pre><code>transition: all 1s ease 0s; 
</code></pre><p>使用简写语法时要注意，声明中的第一个时间值总被应用给transition-duration，第二个时间值总被应用给 transition-delay。</p>
<blockquote>
<p>过渡的局限性<br>使用过渡时有一点需要说明，即有些属性无法实现过渡，尽管规范上说它应该可以（即使在最新的工作草案 <a href="http://dev.w3.org/csswg/css3-transitions/中也这么说）" target="_blank" rel="noopener">http://dev.w3.org/csswg/css3-transitions/中也这么说）</a> 。例如，background-gradient 属性就无法过渡。 但理论上所有 CSS属性都是可以过渡的（<a href="http://www.w3.org/TR/css3-transitions/" target="_blank" rel="noopener">http://www.w3.org/TR/css3-transitions/</a> #properties-from-css-） 。   </p>
</blockquote>
</li>
<li><p>在不同时间段内过渡不同属性<br>当一条规则要实现多个属性过渡时，这些属性不必步调一致。看看下面这段代码： </p>
<pre><code>#content a { 
    /*……其他样式……*/ 
    transition-property: border, color, text-shadow; 
    transition-duration: 2s, 3s, 8s;  
}  
</code></pre></li>
<li>理解过渡调速函数<br>还是请读者直接看这里吧 <a href="http://cubic-bezier.com/。" target="_blank" rel="noopener">http://cubic-bezier.com/。</a>     <h4 id="7-1-2-响应式网站中的有趣过渡"><a href="#7-1-2-响应式网站中的有趣过渡" class="headerlink" title="7.1.2 响应式网站中的有趣过渡"></a>7.1.2 响应式网站中的有趣过渡</h4></li>
</ol>
<h3 id="7-2-CSS3-的-2D-变形"><a href="#7-2-CSS3-的-2D-变形" class="headerlink" title="7.2 CSS3 的 2D 变形"></a>7.2 CSS3 的 2D 变形</h3><p>现在如果你尝试在 Safari 浏览器中添加这种规则，须注意它需要应用该规则的原始元素必须以块状显示。示例如下：</p>
<h4 id="我们能做哪些变形"><a href="#我们能做哪些变形" class="headerlink" title="我们能做哪些变形"></a>我们能做哪些变形</h4><ol>
<li>scale：用来缩放元素（放大或缩小）   </li>
<li>translate：在屏幕上移动元素（上下左右四个方向）   </li>
<li>rotate：按照一定角度旋转元素（单位为度  ）<br>括号中的值只能以度为单位（如 90deg） 。</li>
<li>skew：沿 X和 Y轴对元素进行斜切<br>第一个值是 X轴上的斜切 （本例中是 10度） ， 第二个值是 Y轴上的斜切 （本例中是 2度） 。省略第二个值意味着仅有的值只会应用在 X轴上（水平方向） 。</li>
<li><p>matrix：允许你以像素精度来控制变形效果   </p>
<pre><code>transform: matrix(1.678, -0.256, 1.522, 2.333, -51.533, -1.989); 
</code></pre><p>它基本上能让你将若干变形效果（scale、rotate、skew等等）组合成单个声明。<br>而且在你看了规范文档之后就会发现问题更难，要完全理解矩阵你得了解相关的数学知识：<a href="http://www.w3.org/TR/css3-2d-transforms/#cssmatrix-interface。" target="_blank" rel="noopener">http://www.w3.org/TR/css3-2d-transforms/#cssmatrix-interface。</a></p>
<h4 id="傻瓜化的矩阵变形工具"><a href="#傻瓜化的矩阵变形工具" class="headerlink" title="傻瓜化的矩阵变形工具"></a>傻瓜化的矩阵变形工具</h4><p>如果你的数学也不太好，我建议你访问这里：<a href="http://www.useragentman.com/matrix/。" target="_blank" rel="noopener">http://www.useragentman.com/matrix/。</a>  </p>
</li>
<li>transform-origin 属性 <h3 id="7-3-尝试-CSS3-的-3D-变形"><a href="#7-3-尝试-CSS3-的-3D-变形" class="headerlink" title="7.3 尝试 CSS3 的 3D 变形"></a>7.3 尝试 CSS3 的 3D 变形</h3>但最新的 IE10都还不支持该特性。尽管缺少“桌面版”浏览器的广泛支持，但多亏了移动平台浏览器基本都是 Webkit血统，所以 3D变形在 Android（V3以后的版本）和 iOS（所有版本）上均被支持。 <h4 id="7-3-1-分析-3D-变形效果"><a href="#7-3-1-分析-3D-变形效果" class="headerlink" title="7.3.1 分析 3D 变形效果"></a>7.3.1 分析 3D 变形效果</h4>第一个要点是在父级元素上设置透视。这样就开启了 3D场景：<br>透视的值越大，就表示你的视点与 3D场景之间的景深越大。因此，如果想要一点隐约的3D 效果，就增大透视值；如果想要非常明显的 3D 效果，则减小透视值。 （3D 效果的立体程度，取决于 3D场景与观察者之间的距离。 ） </li>
</ol>
<p>.Qcontainer 类中添加的透视声明只会应用到其第一个子元素上（即本例中的 class为.film 的 div） 。 因此， 为了延续父元素的透视， 我们给.film 元素设定了 preserve-3d（这样可以设置一个 3D场景） 。 </p>
<p>还好， 我们可以用一点传统的CSS代码为非Webkit核心浏览器提供一个合理的降级方案：  z-index</p>
<pre><code>.Qcontainer {  
    -webkit-perspective: 200; 
} 
.film { 
    -webkit-transform-style: preserve-3d; 
} 
.Qcontainer:hover .film { 
    -webkit-transform: rotateY(180deg); 
} 
.face { 
    position: absolute; 
    -webkit-backface-visibility: hidden; 
}
.back { 
    -webkit-transform: rotateY(180deg); 
    background: #3b3b3b; 
    background: -webkit-linear-gradient(top,  
                            rgba(0,0,0,0.65) 0%,  
                            rgba(0,0,0,0) 100%); 
} 
//降级
z-index
</code></pre><h4 id="7-3-2-3D-变形尚未成熟"><a href="#7-3-2-3D-变形尚未成熟" class="headerlink" title="7.3.2 3D 变形尚未成熟"></a>7.3.2 3D 变形尚未成熟</h4><p>目前，我依然使用 jQuery或类似技术来制作这类变形效果。 </p>
<blockquote>
<p>想了解 W3C有关 CSS 3D变形的最新进展，请见这里：<a href="http://dev.w3.org/" target="_blank" rel="noopener">http://dev.w3.org/</a><br>csswg/css3-3d-transforms/。</p>
</blockquote>
<h3 id="7-4-CSS3-动画效果"><a href="#7-4-CSS3-动画效果" class="headerlink" title="7.4 CSS3 动画效果"></a>7.4 CSS3 动画效果</h3><p>IE 10也决定加入该行列。   </p>
<h4 id="组合使用-CSS3-变形和动画"><a href="#组合使用-CSS3-变形和动画" class="headerlink" title="组合使用 CSS3 变形和动画"></a>组合使用 CSS3 变形和动画</h4><h3 id="7-5-小结"><a href="#7-5-小结" class="headerlink" title="7.5 小结"></a>7.5 小结</h3><h2 id="第-8章-用-HTML5和-CSS3征服表单"><a href="#第-8章-用-HTML5和-CSS3征服表单" class="headerlink" title="第 8章  用 HTML5和 CSS3征服表单"></a>第 8章  用 HTML5和 CSS3征服表单</h2><p> 在表单域中插入占位符文字<br> 在需要时禁用表单域的自动完成功能<br> 将特定表单域设置为必填项<br> 使用不同类型的输入框，如电子邮箱、电话号码和 URL。<br> 制作数字输入滑动条以方便选择数值<br> 使用日期和颜色选择器<br> 学习如何使用正则表达式定义表单值验证规则<br> 为落后的浏览器添加腻子脚本<br> 使用 CSS3轻松灵活地美化 HTML5表单      </p>
<h3 id="8-1-HTML5-表单"><a href="#8-1-HTML5-表单" class="headerlink" title="8.1 HTML5 表单"></a>8.1 HTML5 表单</h3><h4 id="8-1-1-理解-HTML5-表单中的元素"><a href="#8-1-1-理解-HTML5-表单中的元素" class="headerlink" title="8.1.1 理解 HTML5 表单中的元素"></a>8.1.1 理解 HTML5 表单中的元素</h4><p>然后包含一个 HTML5的 hgroup，用于显示表单标题和说明文字：<br>表单中的三块子区域都使用带有 legend 标签的 fieldset 来包裹： </p>
<h4 id="8-1-2-placeholder"><a href="#8-1-2-placeholder" class="headerlink" title="8.1.2 placeholder"></a>8.1.2 placeholder</h4><h4 id="8-1-3-required"><a href="#8-1-3-required" class="headerlink" title="8.1.3 required"></a>8.1.3 required</h4><p>我们的例子中还追加了一个等价的 WAI-ARIA属性：aria-required=”true”。</p>
<h4 id="8-1-4-autofocus"><a href="#8-1-4-autofocus" class="headerlink" title="8.1.4 autofocus"></a>8.1.4 autofocus</h4><p>使用该属性时要小心。如果有多个表单域都被追加了 autofocus 属性，则会造成跨浏览器混乱。 </p>
<p>还有一点需要注意，有些用户会使用空格键让网页内容向下滚动。如果网页的表单中含有带 autofocus 属性的表单域，则会阻止空格键的默认行为，这时敲击空格键会向已聚焦的输入框中输入空格。显然，这会让用户很懊恼。 </p>
<h4 id="8-1-5-autocomplete"><a href="#8-1-5-autocomplete" class="headerlink" title="8.1.5 autocomplete"></a>8.1.5 autocomplete</h4><p>这不仅仅能保护敏感数据 （例如银行账户） ， 还可以让你确保用户用心填写表单，手工输入一些值。<code>autocomplete=&quot;off&quot;</code>   </p>
<p>我们也可以通过给表单本身（不是 fieldset）设置属性来禁用整个表单的自动完成功能。</p>
<h4 id="8-1-6-list（及对应的-datalist-元素）"><a href="#8-1-6-list（及对应的-datalist-元素）" class="headerlink" title="8.1.6 list（及对应的 datalist 元素）"></a>8.1.6 list（及对应的 datalist 元素）</h4><h4 id="8-1-7-HTML5-的新输入类型"><a href="#8-1-7-HTML5-的新输入类型" class="headerlink" title="8.1.7 HTML5 的新输入类型"></a>8.1.7 HTML5 的新输入类型</h4><p>这些新的输入类型最赞的一点，就是在那些不支持新特性的浏览器中，它们会被降级显示为一个标准的文本输入框。此外还有很多很有用的腻子脚本</p>
<ol>
<li>email<br>此外，<strong>许多触摸屏设备（如 Android、iPhone等等）会根据输入类型改变键盘模式</strong>。</li>
<li>number<br>超出范围的数字会（应该）得到特殊对待。浏览器的具体实现也不相同，</li>
<li>url </li>
<li>tel<br>不过好的一点就是，和对待 email 和 url 类型一样，触摸屏设备为这种类型贴心地提供了数字键盘以便完成输入。 <blockquote>
<p>电话号码的输入格式和验证规则，不同地区可能有所不同。不提供统一验证也可以理解。——译者注 </p>
</blockquote>
</li>
<li>search </li>
<li>pattern <blockquote>
<p>学习正则表达式<br><a href="http://en.wikipedia.org/wiki/Regular_expressions。" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Regular_expressions。</a></p>
</blockquote>
</li>
<li>color<br>悲剧的是，目前很少有浏览器支持该特性，好像只有 Opera（v11）支持。如果浏览器默认的颜色选择器中没有所需的颜色， 点击下方的 Other…按钮就会打开操作系统默认的颜色选择器： <h4 id="8-1-8-日期和时间输入类型"><a href="#8-1-8-日期和时间输入类型" class="headerlink" title="8.1.8 日期和时间输入类型"></a>8.1.8 日期和时间输入类型</h4></li>
<li>date</li>
<li>month </li>
<li>week </li>
<li>time </li>
<li><p>datetime 和 datetime-local<br> 日期时间选择器会生成一个由日期、时间和时区组成的值，日期与时间之间用 T 分割，使用 Z 表示协调世界时，使用正负值表示时区偏移。协调世界时的 2009年 10月 25日显示如下：<br> 2009-10-25T05:05:00Z </p>
<p> 协调世界时（UTC）与格林尼治标准时（GMT）在大多数实际应用中基本一样。时区偏移则很好理解，比如，北京时间比格林尼治标准时提前 8小时（UTC +8） ，反映到输入值上，效果如下：<br> 2009-10-25T05:05:00+8:00 </p>
<p> datetime-local 输入类型和 datetime 几乎完全一样，只是省略了时区信息。</p>
<blockquote>
<p>修改步增值<br> 你可以使用 step 属性来修改各种输入类型控制按钮的步增值。比如，要<br> 将时间的步增值改为 4个小时，将 step的属性值设为 14400秒（4×60×60） 即可。将 datetime的步增值改为 4小时的示例代码如下：<br> <code>&lt;input id=&quot;datetime&quot; type=&quot;datetime&quot; name=&quot;datetime&quot; step=&quot;14400&quot;&gt;</code></p>
</blockquote>
</li>
<li>range<br>range 输入类型最大的一个问题是它从来不给用户显示当前的输入值。虽然滑动条仅被设计用来选择模糊的数值， 但我还是经常想看看它的当前值。 使用 HTML5目前无法解决这个问题，但是如果你确实需要显示滑动条的当前输入值，可以通过 JavaScript来实现。<h3 id="8-2-如何给不支持新特性的浏览器打补丁"><a href="#8-2-如何给不支持新特性的浏览器打补丁" class="headerlink" title="8.2 如何给不支持新特性的浏览器打补丁"></a>8.2 如何给不支持新特性的浏览器打补丁</h3>前面把 HTML5表单的功能吹上了天， 但要想实际使用则还有两个非常麻烦的问题： 一是支持表单新特性的浏览器在具体实现上有所不同；二是对完全不支持新特性的浏览器如何处理。万幸的是，Web社区一如既往地拿出了解决办法。</li>
</ol>
<p>回到第 4 章，我提过一个非常棒的 JavaScript 框架叫做 Modernizr（<a href="http://www.modernizr.com）" target="_blank" rel="noopener">http://www.modernizr.com）</a> ，用于向缺少 HTML5/CSS3特性支持的浏览器打补丁。由 Alexander Farkas编写的“Webshims Lib”（<a href="http://afarkas.github.com/webshim/demos/）就是构建于" target="_blank" rel="noopener">http://afarkas.github.com/webshim/demos/）就是构建于</a> Moderniz和无处不在的 jQuery之上的，它可用于插入表单补丁（也可以为其他 HTML5特性打补丁） ，从而使不支持新特性的浏览器可以处理 HTML5 表单。最值得称道的一点是，<strong>它利用了Modernizr 的加载功能，能做到只加载实际所需的补丁</strong>。如果在原生支持 HTML5 新特性的浏览器中查看网页，则仅会给网页加入一丁点儿冗余代码。而对于老版本浏览器，虽然它们需要加载更多的代码（因为它们本身能力不足） ，但通过相关 JavaScript 方法的辅助，它们能提供基本一致的用户体验。<br><a href="http://github.com/aFarkas/webshim/downloads" target="_blank" rel="noopener">http://github.com/aFarkas/webshim/downloads</a></p>
<h3 id="8-3-使用-CSS3-美化-HTML5-表单"><a href="#8-3-使用-CSS3-美化-HTML5-表单" class="headerlink" title="8.3 使用 CSS3 美化 HTML5 表单"></a>8.3 使用 CSS3 美化 HTML5 表单</h3><h4 id="针对表单的-CSS3-伪类选择器"><a href="#针对表单的-CSS3-伪类选择器" class="headerlink" title="针对表单的 CSS3 伪类选择器"></a>针对表单的 CSS3 伪类选择器</h4><p> input:required：选择必填表单域；<br> input:focus:invalid：选择当前聚焦的且含有非法输入值的表单域；<br> input:focus:valid：选择当前聚焦的且含有合法输入值的表单域。   </p>
<h3 id="8-4-小结"><a href="#8-4-小结" class="headerlink" title="8.4 小结"></a>8.4 小结</h3><h2 id="第-9章-解决跨浏览器问题"><a href="#第-9章-解决跨浏览器问题" class="headerlink" title="第 9章  解决跨浏览器问题"></a>第 9章  解决跨浏览器问题</h2><p> 渐进增强和优雅降级之间的根本区别<br> 如何让老版本 Internet Explorer支持响应式设计<br> 何如使用 Modernizr按需加载 CSS文件<br> 何如使用 Modernizr按需加载 JavaScript补丁文件<br> 如何将超长导航列表在小视口中转换为选择菜单<br> 如何为高分辨率（视网膜）显示屏提供匹配图片  </p>
<p>Internet Explorer 8 中的效果惨不忍睹，因为它不支持\<aside>、\<header>、\<nav>和\<footer>等 HTML5元素，这自然就引入了本章的主题——解决跨浏览器问题。 </footer></nav></header></aside></p>
<h3 id="9-1-渐进增强与优雅降级"><a href="#9-1-渐进增强与优雅降级" class="headerlink" title="9.1 渐进增强与优雅降级"></a>9.1 渐进增强与优雅降级</h3><p>优雅降级指的是为现代浏览器制作网站，然后保证为某些老版本浏览器提供基本可用的体验。</p>
<p>渐进增强与优雅降级恰好相反。渐进增强以恪守 Web标准的标签为基础，意味着它在所有浏览器中均可用。然后通过 CSS 样式和必要的 JavaScript 来为更先进的浏览器提供渐进式的增强体验。</p>
<h4 id="现状"><a href="#现状" class="headerlink" title="现状"></a>现状</h4><p>目前，渐进增强被普遍认为是开发网站的最佳实践。然而，冰冷的现实是，我虽然打心眼里喜欢渐进增强并用它来制作网站，但很多情况下可以说我是用优雅降级的方式来做的。怎么会这样呢？ </p>
<h3 id="9-2-该不该修复老版本-IE"><a href="#9-2-该不该修复老版本-IE" class="headerlink" title="9.2 该不该修复老版本 IE"></a>9.2 该不该修复老版本 IE</h3><p>因为我只是告诉你能这么做，并不代表你应该这么做！ </p>
<p>此外，即使不使用补丁（我们稍后会谈谈这个话题） ，以我的经验，为了能让 IE6 和 IE7（以及少量 IE8 和 IE9）的页面渲染效果尽可能与现代标准浏览器类似，开发、测试和配置专属 CSS 代码所花费的时间，至少也和为现代浏览器提供渐进增强所花费的时间一样多——这很让人不爽！你和你的客户就准备这样用掉开发时间？ </p>
<h4 id="9-2-1-统计数据（再看看世界的变化）"><a href="#9-2-1-统计数据（再看看世界的变化）" class="headerlink" title="9.2.1 统计数据（再看看世界的变化）"></a>9.2.1 统计数据（再看看世界的变化）</h4><p>结论就是：老弱的 IE（6、7、8）的使用率正在不断减少，而现代浏览器（包括桌面版和移动版）的使用率则正在不断增加。 </p>
<h4 id="9-2-2-个人选择"><a href="#9-2-2-个人选择" class="headerlink" title="9.2.2 个人选择"></a>9.2.2 个人选择</h4><p>目前我个人的态度是，针对全新制作的网站，要确保其在最新版本的 IE（编写本书时最新版本是 IE9）以及前一个版本（IE8）中效果完美。而针对老版本 IE的布局和样式调整则由于需要额外的时间，所以另行商议。 </p>
<h3 id="9-3-前端的瑞士军刀：Modernizr"><a href="#9-3-前端的瑞士军刀：Modernizr" class="headerlink" title="9.3 前端的瑞士军刀：Modernizr"></a>9.3 前端的瑞士军刀：Modernizr</h3><p>那它到底做了什么？既能给老版本浏览器打补丁，又能保证新浏览器渐进增强的用户体验，它是怎么做到的，而我们又如何使其听任差遣呢？好好听着…… </p>
<p>第一步，下载 Modernizr（<a href="http://www.modernizr.com）" target="_blank" rel="noopener">http://www.modernizr.com）</a> 。 </p>
<h4 id="9-3-1-使用Modernizr辅助修正样式问题"><a href="#9-3-1-使用Modernizr辅助修正样式问题" class="headerlink" title="9.3.1 使用Modernizr辅助修正样式问题"></a>9.3.1 使用Modernizr辅助修正样式问题</h4><h4 id="9-3-2-使用Modernizr让老版本IE支持HTML5-元素"><a href="#9-3-2-使用Modernizr让老版本IE支持HTML5-元素" class="headerlink" title="9.3.2 使用Modernizr让老版本IE支持HTML5 元素"></a>9.3.2 使用Modernizr让老版本IE支持HTML5 元素</h4><h4 id="9-3-3-给IE6、7、8-追加min-max媒体查询功能"><a href="#9-3-3-给IE6、7、8-追加min-max媒体查询功能" class="headerlink" title="9.3.3 给IE6、7、8 追加min/max媒体查询功能"></a>9.3.3 给IE6、7、8 追加min/max媒体查询功能</h4><p>我选择的给老版本 IE添加媒体查询支持的垫片脚本，仅支持追加min/max-width 媒体查询功能。还有很多类似的垫片脚本，可以追加很多媒体查询特性。但对于响应式设计来说，Scott Jehl开发的 Respond.js使用简单、速度快，我一直用得很顺手。<br>Respond.js（<a href="https://github.com/scottjehl/Respond）可以独立于" target="_blank" rel="noopener">https://github.com/scottjehl/Respond）可以独立于</a> Modernizr 使用——只需将其引入到需要的页面，然后就如其作者 Scott Jehl所说： “撬开 IE，击掌相庆。 ”</p>
<p>不错，我们现在给 IE添加了垫片脚本，使其可以支持 min-width 和 max-width，但有一个问题：垫片脚本在每一种浏览器中都会被加载——不论它们需要与否。一种解决办法就是将脚本文件链接放置在 IE条件注释中，像下面这样： </p>
<pre><code>&lt;!--[if lte IE 8]&gt; 
        &lt;script src=&quot;js/respond.min.js&quot;/&gt;&lt;/script&gt; 
&lt;![endif]--&gt; 
</code></pre><h4 id="9-3-4-使用Modernizr按需加载资源"><a href="#9-3-4-使用Modernizr按需加载资源" class="headerlink" title="9.3.4 使用Modernizr按需加载资源"></a>9.3.4 使用Modernizr按需加载资源</h4><p>Modernizr中包含一个名为 YepNope.js的小型 JavaScript库文件（<a href="http://yepnopejs.com/）。使用方法很简单：" target="_blank" rel="noopener">http://yepnopejs.com/）。使用方法很简单：</a> </p>
<pre><code>Modernizr.load({ 
    test: Modernizr.mq(&apos;only all&apos;), //检测的是浏览器是否支持媒体查询：
    nope: &apos;js/respond.min.js&apos; 
}); 

Modernizr.load({ 
    test: Modernizr.mq(&apos;only all&apos;), 
    yep: &apos;js/pass.js&apos;, 
    nope: [&apos;js/respond.min.js&apos;, &apos;fail-polyfill.js&apos;, &apos;fail.css&apos;] , 
    both: &apos;js/for-all.js&apos; 
}); 
</code></pre><blockquote>
<p>下载垫片脚本<br>下面的这个 github库中有很多有用的垫片脚本：<a href="https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills。" target="_blank" rel="noopener">https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills。</a></p>
</blockquote>
<h3 id="9-4-必要时将导航链接转换为下拉菜单"><a href="#9-4-必要时将导航链接转换为下拉菜单" class="headerlink" title="9.4 必要时将导航链接转换为下拉菜单"></a>9.4 必要时将导航链接转换为下拉菜单</h3><p>我想在浏览器视口小于一定宽度时，将这些导航链接转换为一个下拉菜单。你可以自己编 写 一 段 代 码 来 做 这 件 事 。 可 敬 的 Chris Coyier 写 过 一 篇 文 章 来 讲 怎 么 做（<a href="http://css-tricks.com/convert-menu-to-dropdown/）" target="_blank" rel="noopener">http://css-tricks.com/convert-menu-to-dropdown/）</a> 。 不过， 你还可以选择别人已经写好的脚本。为了简便起见，我就选了个现成的脚本。  </p>
<p>首先下载 Responsive Menu脚本（<a href="https://github.com/mattkersley/Responsive-Menu）" target="_blank" rel="noopener">https://github.com/mattkersley/Responsive-Menu）</a> ，</p>
<pre><code>Modernizr.load([ 
{ 
    test: Modernizr.mq(&apos;only all&apos;), 
    nope: &apos;js/respond.min.js&apos; 
}, 
{ 
    // 如果 max-width 等于 600px，则加载菜单转换脚本 
    test: Modernizr.mq(&apos;only screen and (max-width: 600px)&apos;), 
    yep : [&apos;js/jquery-1.7.1.js&apos;, &apos;js/jquery.mobilemenu.js&apos;], 
    complete : function () { 
    // 资源完全加载后运行 
    $(document).ready(function(){ 

        $(&apos;#mainNav&apos;).mobileMenu({ 
        switchWidth: 600,                   //转换宽度 (用 px 表示) 
        topOptionText: &apos;Select a page&apos;,     //第一个选项的内容 
        indentString: &apos;&amp;nbsp;&amp;nbsp;&amp;nbsp;&apos;  //缩进嵌套选项的字符串 
        }); 
    }); 

    } 
} 
]); 
</code></pre><h3 id="9-5-高分辨率设备（未来趋势）"><a href="#9-5-高分辨率设备（未来趋势）" class="headerlink" title="9.5 高分辨率设备（未来趋势）"></a>9.5 高分辨率设备（未来趋势）</h3><pre><code>@media all and (-webkit-min-device-pixel-ratio : 1.5) { 
    #container header[role=&quot;banner&quot;] .logo a { 
        background-image: url(&quot;../img/logo2@x2.png&quot;); 
    } 
} 
</code></pre><p>使用这个技巧时需要慎重。图片尺寸越大，文件体积也越大，所需的加载时间会更长，所以再重申一遍：你可以这么做，但不一定应该这么做。 </p>
<p>另外，如果浏览器支持可缩放矢量图形（SVG） ，那使用该技术替代图片可以解决我们目前面临的很多图片缩放问题。顾名思义，可缩放矢量图形能生成可任意缩放但显示清晰的矢量图片。不过，媒体查询和 SVG对嵌入在页面中的高分辨率图片无能为力。在这种情况下你需要考虑基于 JavaScript的解决方案。    </p>
<h3 id="9-6-小结"><a href="#9-6-小结" class="headerlink" title="9.6 小结"></a>9.6 小结</h3><p style="text-align:right">14:00</p></html></nav></b></i></b></b></h1></h4></section></aside></footer></header></head>
      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>knowledge is no pay,reward is kindness</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="Yalhu 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Yalhu 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        

      </div>
    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/ins/ens/characters-2017/" rel="next" title="2017英语单词">
                <i class="fa fa-chevron-left"></i> 2017英语单词
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/pdf/css/CSS揭秘/" rel="prev" title="CSS 揭秘(CSS Secrets)">
                CSS 揭秘(CSS Secrets) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_fav">收藏夹</a>
<a class="jiathis_button_copy">复制网址</a>
<a class="jiathis_button_email">邮件</a>
<a class="jiathis_button_weixin">微信</a>
<a class="jiathis_button_qzone">QQ空间</a>
<a class="jiathis_button_tqq">腾讯微博</a>
<a class="jiathis_button_douban">豆瓣</a>
<a class="jiathis_button_share">一键分享</a>

<a href="http://www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
  data_track_clickback:true,
  summary:"",
  shortUrl:false,
  hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script>
<!-- JiaThis Button END -->
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitment-container"></div>
      
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/robbot.jpg"
                alt="Yalhu" />
            
              <p class="site-author-name" itemprop="name">Yalhu</p>
              <p class="site-description motion-element" itemprop="description">no better,but great !</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">270</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">41</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">36</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:yalhu@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
                <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
              </a>
            </div>
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="/home2/" title="Home2" target="_blank">Home2</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="/archives2/" title="Archives2" target="_blank">Archives2</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="/acategories/" title="Acategories" target="_blank">Acategories</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#null"><span class="nav-text">标签改为\，这样 HTML5就会为文档生成一个精确的大纲：#### 网站的主体内容怎么办你可能会觉得有点奇怪：没有一个专门的元素用来标记页面主体内容。其实逻辑是这样的，既然可以界定除主体内容之外的其他元素，那么剩下的元素自然就是页面的主体了。### 4.5 HTML5 的文本级语义元素除了前面讲过的结构元素，HTML5 还修订了一些被称之为行内元素的标签。HTML5 标准中称这些标签为文本级语义元素http://dev.w3.org/html5/spec/Overview.html#text-level-semantics） 。#### 4.5.1 b&gt;过去，人们通常利用\元素为文本添加样式，但它的实际用途其实是“给文本加粗” 。不过现在你可以正式地将其仅用作样式钩子了，因为现在 HTML5标准对\的定义是：#### 4.5.2 em&gt;#### 4.5.3 i&gt;HTML5标准中对的描述如下：&gt; ……一小段有不同语态或语气的文字，或者是样子上与普通文章有所差异以便标明不同特点的文字。简单地说，它不仅仅是用来给某些文字加斜体效果的。#### 4.5.4 在页面中应用文本层语义元素&gt; 文本层语义元素的默认样式根据过去对\标签的用法，很多浏览器仍会将其渲染为粗体。所以你可以根据实际情况在相关的 CSS代码中重定义其默认样式。想要全面了解，请查看 HTML5标准中的相关章节，地址如下：http://dev.w3.org/html5/spec/Overview.html#text-level-semantics### 4.6 遵循 WAI-ARIA 实现无障碍站点 Web Accessibility Initiative - Accessible Rich Internet Applications 本书着眼点不在于全面讲解无障碍网页应用技术（想要全面了解，请查看 http://www.w3.org/WAI/intro/aria） ，但我们可以采纳其中一部分容易实施的技术，将其应用到 HTML5网站中，以方便残障用户。### ARIA 的地标角色    1. application：用来定义用作网页应用的区域。1. banner：用来定义一个站点级别（而不是某个特定文档的）的区域。如网站的头部和logo。1. complementary：用来定义一个对页面主要区域进行补充说明的区域。在And the winner isn’t…这个网站中，UNSUNG HEROES和 OVERHYPED NONSENSE区域就可以定义为 complementary。1. contentinfo：用来定义与页面主要内容相关的信息区域。例如页脚的网站版权信息区域。1. form：你猜都能猜到，定义表单！但注意，如果表单用于搜索，则请使用search 来替代。1. main：定义页面的主体内容。1. navigation：用来定义链向当前文档或相关文档的导航链接。1. search：用来定义一个用于搜索的区域。&gt; 无障碍网页应用技术进阶无障碍网页应用技术并非只有地标角色。想要做进阶应用，请参阅完整的角色列表及其简要使用说明：http://www.w3.org/TR/wai-aria/roles#role_definitions。&gt; 使用非可视桌面阅读器（NVDA）免费测试网站可访问性如果你是在 Windows平台上开发且想使用屏幕阅读器测试网站的可访问性，可以免费使用 NVDA。软件的官方地址如下：http://www.nvda-project.org/。&gt; 为使用了无障碍技术的元素设置样式和其他属性一样，可以直接使用属性选择器来为其设置样式。如，使用nav[role=”navigation”] {}可以为导航区域设置样式。### 4.7 在 HTML5 中嵌入媒体正如你所预想，IE8及更低版本都不支持 HTML5视频和音频。不过给微软的“先天不足”的浏览器提供备用解决方案也很简单，稍后我们会讨论这个问题。### 4.8 用 HTML5 的方法为页面添加视频或音频#### 4.8.1 提供备用的媒体源文件#### 4.8.2 针对老版本浏览器的备用方案                                                                                  Download Video:            MP4 Format:  “MP4”            Ogg Format:  “Ogg”            #### 4.8.3 和标签的用法基本一致### 4.9 响应式视频然后在 CSS中追加如下代码：video { max-width: 100%; height: auto; }这种方法对本页面中的视频文件很有用，但它不能解决使用 iframe 嵌入的视频的响应问题 （拜YouTube、 Vimeo等等视频网站所赐） 。但截至目前我见过的最简单的办法是使用一个名为 FitVids的 jQuery小插件。### 4.10 离线 Web 应用虽然 HTML5 中的大量新特性对我们的响应式设计没有明显帮助（如地理定位 API） ，但离线 Web 应用应该还有点用处。#### 4.10.1 离线 Web 应用概述离线Web应用的运行机制是每个需要离线使用的网页都指定一个后缀名为.manifest的文本文件。这个文本文件罗列了该网页离线使用时所需的所有资源文件（HTML、图片JavaScript等等） 。支持离线 Web应用的浏览器会自动读取.manifest 文件，下载文件中所罗列的资源文件，并将其缓存在本地以备网络断开时使用。简单吧？那我们来动手试一试……#### 4.10.2 让网页可离线使用     你必须在每一个准备离线使用的页面的HTML标签中都追加manifest=“/offline.manifest”属性。如果使用的是 Apache服务器，你可能还需要修改一下.htaccess 文件，追加一行代码：AddType text/cache-manifest .manifest 这样就保证了.manifest 文件拥有正确的 MIME类型，即 text/cache-manifest。在.htaccess 文件中还可以加入以下代码：            ExpiresActive On        ExpiresDefault “access”    添加上面这几行代码， 可以阻止浏览器缓存缓存文件。 你没看错。 因为 offline.manifest是一个静态文件，浏览器默认就会缓存 offline.manifest 文件。所以上面这几行代码就是让服务器告诉浏览器不要这么干！现在我们需要给 offline.manifest 填充内容。 即通知浏览器那些文件是用作离线存储的。And the winner isn’t…网站的 offline.manifest 文件内容如下：    CACHE MANIFEST    #v1    CACHE:    basic_page_layout_ch4.html    css/main.css    img/atwiNavBg.png    img/kingHong.jpg    img/midnightRun.jpg    img/moulinRouge.jpg    img/oscar.png    img/wyattEarp.jpg    img/buntingSlice3Invert.png    img/buntingSlice3.png    NETWORK:        FALLBACK:    //offline.html#### 4.10.3 理解 manifest 文件manifest 文件必须以 CACHE MANIFEST 开头。第二行就是一句注释，注明了 manifest 文件的版本号。这句注释的用途稍后详细介绍。CACHE:部分罗列了所有离线使用所需的文件。 这些文件的路径都是相对 offline.manifest而言的，所以文件路径可能需要根据情况稍作修改。使用绝对路径也是可以的。NETWORK:部分罗列了所有不需要被缓存的文件。你可以将其看成是一个“在线白名单” 。此处罗列的文件在网络畅通的情况下都会直接跳过缓存。如果你想网站内容在网络畅通的情况下及时更新（而不是仅在离线缓存中查找） ，可以在此处使用。星号被称为在线白名单通配符。FALLBACK:部分使用/字符定义了一个 URL模板。它的作用是访问每个页面时都会问“缓存中有这个页面吗？” ， 如果有则显示缓存页面， 如果没有则显示指定的 offline.html 文件。#### 4.10.4 页面被自动加载到离线缓存根据实际情况，还有一种更简单的办法来设置 offline.manifest 文件。任何指定了离线 manifest 文件的页面（就是在标签中追加了manifest=”/offline.manifest”的页面）在被用户访问时都会被自动加入到本地缓存。浏览器会缓存用户访问过的每一个网页以确保这些网页在离线状态下仍可访问。简化的 manifest文件如下：    CACHE MANIFEST    # Cache Manifest v1    FALLBACK:    //offline.html    NETWORK:    *选择使用这个方法时有一点需要注意， 这种方法只会下载和缓存用户访问的 HTML页面，不会缓存页面内引入的图片、 JavaScript或者其他资源文件。 如果这些资源文件是必需的，那么请按照上节中的方法在 CACHE:部分专门声明这类文件。#### 4.10.5 版本注释的用途对网站内容或任何资源文件做了修改之后， 你必须得对 offline.manifest 文件也做点修改并将其重新上传服务器。这样就能让服务器为浏览器提供新版本文件，而浏览器则会下载该新版本文件并再次触发离线存储进程。我效仿了 Mark Pilgrim 的例子（来自著名的《畅游 HTML5》 一书） ，在offline.manifest 文件的头部加了一句注释，每次修改网站都会对应地修改该版本号：&gt; 作者此处说得不是很清楚。补充一下：如果开发者对网站内容或资源做了修改，那么也得通知浏览器更新缓存文件，否则浏览器仍然会使用之前已有的缓存文件。而通知浏览器更新缓存文件的方式通常是更新 manifest 文件，浏览器如果发现 manifest 文件发生了变化，就会更新缓存文件。大多数情况下manifest 中的缓存文件清单不会发生变化，那我们就通过修改注释的方式来改变 manifest文件，注释中的版本号，既能触发文件变化，又能指明当前版本，一举两得。其实注释中还可以加入更新时间等更详细信息，有助于维护。文中提到的《畅游 HTML5》 ，参见 http://diveintohtml5.com/。——译者注#### 4.10.6 离线访问网站#### 4.10.7 离线 Web 应用的故障诊断### 4.11 小结11.18 02:202017.11.19 日 11:20

第 5 章  CSS3：选择器、字体和颜色模式
CSS3给前端开发人员带来了什么   
快速而便捷的 CSS3技巧（多列布局和文字换行）   
CSS规则解析   
私有前缀的来源和用法  
新的 CSS3选择器的工作原理   
使用@font-face 设定字体    
如何使用带有透明度的 RGB和 HSL颜色模式   5.1 CSS3 给前端开发人员带来了什么5.1.1 Internet Explorer 6 到 8 对 CSS3 的支持除少数例外（如@font-face） ，老版本的 IE（IE 6、7、8）几乎不支持 CSS3的新特性。那么我们可以在设计开发中使用 CSS3吗？和以前一样，答案依然是： “看情况。 ”就我个人而言，目前我主要将 CSS3用作增强网站，而不是用它提供基本功能。我非常喜欢页面元素在不同的浏览器中看起来有点差异，相信你和你的客户也是这样。
各版本 Internet Explorer对 CSS 2.1和 CSS3特性的支持情况，请见如下网址：http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx（或 http://tinyurl.com/495756c） 

5.1.2 使用 CSS3 设计和开发页面5.2 CSS 规则解析5.3 私有前缀及其用法
可快速编辑 CSS3 前缀的代码片段和 JavaScript 方案建立包含所有必需的私有前缀属性的代码片段会带来极大便利。这样你就可以直接粘贴代码而不用每次都重新输入。很多代码编辑程序（或者集成开发环境） 带有代码片段功能， 这样在开发 CSS3时能节省很多时间。也有可以为 CSS文件自动追加前缀的 JavaScript方案， 比如“-prefix-free” ，很不错的解决方案，网址是http://leaverou.github.com/prefixfree/。




什么时候可以使用特定的 CSS3 和 HTML5 特性？随着对 CSS3 研究的不断深入，我衷心建议大家去看看这个网站 http://caniuse.com，在这里你可以知道当前浏览器对特定 CSS3和 HTML5特性的支持程度。除了显示浏览器的特性支持情况之外（可按特性搜索） ，它还提供了来自于 http://gs.statcounter.com的最近的全球浏览器使用率统计

5.4 快速而有效的 CSS 技巧5.4.1 CSS3 多栏布局增加栏位间隙和分割线5.4.2 文字换行CSS3 使用了一个简单的声明解决了这个问题，凑巧的是老版本 IE 均支持该声明，甚至可以追溯到 IE 5.5！word-wrap: break-word; 
5.5 CSS3 的新增选择器及其用法5.5.1 CSS3 属性选择器
CSS3 的子字符串匹配属性选择器  三种匹配模式分别是
一个活生生的例子 
HTML5 中的 ID 值可以用数字开头如果你还不习惯 HTML5，可能会认为 ID 值以数字开头是无效的，因为HTML 4.01 是这样规定的。HTML5 取消了这个限制，HTML 的 ID 命名方面唯一需要记住的是名字中间不能有空格且保证在页面中唯一。详细信息请参阅http://dev.w3.org/html5/spec/Overview.html#the-id-attribute。

5.5.2 CSS3 结构伪类
:last-child 选择器 
nth-child 选择器 
理解 nth 规则的作用 而数值表达式对我们来说有点不好理解，我们来分析一下。为了便于理解，我们从括号内表达式的右边开始分析。例如我想确定(2n+3)会选择那些元素，就从右边开始（即从第 3 个元素开始） ，然后就知道它是从这个元素开始每两个元素选择一个。 数值表达式中也可以使用负数，例如:nth-child(3n-2)，即表示从倒数第 2 个元素开始然后每三个元素选择一个。
 child 和 last-child 的区别在于，last-child 是从文档节点树的末尾开始算。比如:nth-last-child(-n+3)就是从倒数第 3个元素开始， 向后选择之后的所有元素 （因为使用了-n，所以方向是向后） 。


最后，我们来看看:nth-last-of-type。   

CSS3 的计数方式和 jQuery 不太一样如果你经常使用 jQuery就会知道，jQuery中的计数是从 0开始的。比如在 jQuery 中使用整数 1 来选择元素，实际上会选中第二个元素。但在CSS3中，计数从 1开始，所以整数 1会匹配第一个元素。 

否定（:not）选择器  


除此之外，CSS3还有很多其他选择器。如果你在开发 Web应用，那完整的 UI元素状态伪类列表http://www.w3.org/TR/selectors/#UIstates）则值得一读，它对你极有帮助，例如可以让你根据元素被选中与否来应用样式规则。 
5.5.3 对伪元素的修正CSS3要求对伪元素使用两个冒号以便与伪类进行区别。因此刚才的例子应该改写为 p::first-letter。但注意 Internet Explorer 8及更低版本的 IE无法识别两个冒号的语法，它们只识别一个冒号。
:first-line 对响应式设计来说好用吗于是，在响应式设计中就有了一种方法，不需要修改标签代码，即可方便地将文本第一行内容（即浏览器渲染出来的第一行，不是标签代码中的第一行）显示得与众不同。 
5.6 自定义网页字体多年来我们一直被迫使用一组单调乏味的 Web 安全字体。当网页设计中确实需要一些优雅的字体时， 我们通常都是使用图片来替代， 并对元素使用text-indent 规则将实际的文本移出视口范围。曾有一些稍微高级点的备选方案，来为网页增加更加个性的字体效果。sIFR（http://www.mikeindustries.com/blog/sifr/）和 Cufón（http://cufon.shoqolate.com/generate/）都使用 Flash和 JavaScript来重建文本元素，然后使用自定义字体来显示内容。但是在响应式设计中，
5.6.1 @font-face 规则@font-face 规则在 CSS2中已经存在（但随后在 CSS 2.1中被删除） 。IE 4甚至对其提供了部分支持（真的，不骗你） ！
但浏览器厂商对不同的字体格式和具体实现仍在争论。如Embedded OpenType（EOT）字体是 Internet Explorer的首选格式（其他浏览器都不支持） ，其他浏览器更钟爱常见的 TrueType格式（TTF） ，还有 Scalable Vector Graphics (SVG)以及 Web Open Font Format (WOFF)。使用@font-face 为网页设定字体时，可谓喜忧参半。
5.6.2 使用@font-face 嵌入网页字体首先我们得有字体。 网上有很多很棒的字体资源站点， 有免费的也有收费的。 虽然 Google也提供了免费的网页字体，且基本上都可使用@font-face 规则 （www.google.com/webfonts） ，但我个人最喜欢 Font Squirrel  （www.fontsquirrel.com） 。另外还有 Typekit（www.typekit.com） 和 Font Deck（www.fontdeck.com）上也有一些非常优秀的付费字体。  
5.7 帮帮我，标题模糊怎么办后来，我发现导致该问题的原因是字体粗细。除非显式声明 font-weight 属性，否则大多数浏览器都会为标题元素应用标准的 font-weight （一般都是 700） 。 因此解决方法就是始终为应用了@font-face 字体的标题元素设定 font-weight 属性。
唯一需要注意的，是在响应式设计中使用该技术时要考虑到字体文件大小。

真正的响应式字体单位还不能广泛使用当前的 CSS3 字体模块工作草案中引入了视口相对字体（http://www.w3.org/ TR/ css3-values/#viewport-relative-lengths） 。 相对单位 vw （视口宽度） 、vh（视口高度）和 vm（视口最小边长，即 vm 和 vh 中较小的一个）在获得浏览器广泛支持之后，能为我们节省大量开发时间。悲哀的是目前除了 IE 9之外，其他浏览器都不支持视口相对单位。

5.8 新的 CSS3 颜色格式和透明度5.8.1 RGB 颜色5.8.2 HSL 颜色除了 RGB，CSS3还可使用 HSL（色相、饱和度、亮度）模式来声明颜色。

HSL 不是 HSB不要错误地认为图片编辑软件如 Photoshop中显示的 HSB（色相、饱和度、明度）值就是 HSL——它们不一样①！HSL模式基于一个 360°的色相环，第一个数字代表色相，其后的两个值分别表示饱和度和亮度，值为百分比，用于改变基础的色相。Young Guys Can Be Messy Rascals 60黄，绿 青 蓝 洋红 360红

5.8.3 针对 IE6、IE7 和 IE8 提供备用颜色值你可能都猜到了，版本 9 以下的 IE 浏览器不支持 RGB 和 HSL。
5.8.4 透明通道5.9 小结第 6章  用 CSS3创造令人惊艳的美
使用 CSS3制作文字阴影   
使用 CSS3制作盒阴影（即元素投影）   
使用 CSS3制作渐变背景      
使用 CSS3的多重背景图片       
使用 CSS3背景渐变来制作图案     
使用 CSS3的@font-face 规则来制作节省带宽的图标     6.1 文字阴影6.1.1 HEX、HSL 或 RGB 颜色都可以6.1.2 px、em 或 rem 都行我个人其实很少用 em 或 rem 作为阴影大小的单位。因为阴影一般都比较小，一个或两个像素的阴影，在所有视口中的效果都很不错。 6.1.3 取消文字阴影左上方阴影使用负值6.1.4 制作浮雕文字阴影效果这种效果一般最适合应用在非白色背景的深色文字上，搭配以高亮颜色（如纯白色或类似颜色）的阴影。
想要最好的浮雕文字效果，我有诀窍：不要模糊，不要水平阴影，仅在垂直方向设置 1或 2像素的“白影”即可。 

6.1.5 多重文字阴影只需将两组值使用逗号分隔开即可6.2 盒阴影但是，盒阴影的的跨浏览器支持并不好，所以明智的做法是使用浏览器私有前缀6.2.1 内阴影 box-shadow:inset 0 0 40px #000000; 6.2.2 多重阴影这样两组阴影就会按照代码中的先后顺序从上到下应用到元素上。换句话说，就是代码中先声明的规则，在浏览器中会覆盖下面的规则。 6.3 背景渐变6.3.1 线性背景渐变背景渐变唯一美中不足的是它不像其他一些 CSS3 特性那样被广泛支持。比如 IE 9 就没有对它的原生支持（微软承诺在 IE 10中支持） 。

作为老版本浏览器的降级方案，最好先定义一个固定背景颜色，
分解线性渐变语法6.3.2 径向背景渐变分解径向渐变语法background: radial-gradient(center, ellipse cover, #ffffff 72%, #dddddd 100%); 

closest-side： （渐变形状是圆形时） 以距离中心点最近的一边为渐变半径， 或者 （渐变形状是椭圆形时）以距离中心点最近的水平或垂直边为渐变半径。   
closest-corner：以距离中心点最近的一角为渐变半径。 
farthest-side：和 closest-side 正好相反， （渐变形状是圆形时）以距离中心点最远的一边为渐变半径，或者（渐变形状是椭圆形时）以距离中心点最远的水平或垂直边为渐变半径。   
farthest-corner：以距离中心点最远的一角为渐变半径。   
cover：和 farthest-corner 完全一样。   
contain：和 closest-side 完全一样。    

制作完美 CSS3 渐变的简便方法如果写出一个 CSS3 渐变对你来说有点难度，那你可以考虑使用在线渐变生成器。我个人最喜欢的渐变生成器是 http://www.colorzilla.com/gradient-editor/。 它的用户界面风格很像图像处理软件， 你可以选择颜色、过渡点、渐变风格（线性渐变或径向渐变） ，甚至可以选择自己喜欢的颜色空间（HEX、RGB(A)、HSL(A)） 。这个在线渐变生成器还会加载一些预置的渐变供你选用和修改。如果这些还不足以打动你，须知它还提供了可选的代码设置，用来修正 IE 9，让它显示渐变效果，而且还为老版本浏览器提供了备用的背景颜色。还是不动心？它还能基于已有的图片直接生成渐变，这个功能怎么样？我想这下总该打动你了。       

6.3.3 重复渐变 background: repeating-linear-gradient(90deg, #ffffff 0px, hsla(0, 1%, 50%,0.1) 5px); background: repeating-radial-gradient(2px 2px, ellipse,  
hsla(0,0%,100%,1) 2px, hsla(0,0%,95%,1) 10px,  
hsla(0,0%,93%,1) 15px, hsla(0,0%,100%,1) 20px);     
6.4 背景渐变图案CSS 高手 Lea Verou 收集了一系列 CSS3 背景渐变图案，具体请见http://lea.verou.me/css3patterns/。 
6.5 CSS3 的响应性6.6 组合使用 CSS3 属性还有最后一个问题，原始设计图中的那两个尖括号（即 HTML中的\»）使用了与按钮文字不一样的字体。但在此处为这么一个特殊符号专门引入一种字体不太划算，所以我准备将这个符号用一个内联标签包裹起来，然后增大它的字号。
6.7 多重背景图片有一种很常见的设计需求，就是制作一个顶部和底部使用不同背景图片的页面。除了 IE 8及更低版本外，其他浏览器均支持该特性。语法如下：
 background:  
url(&#39;../img/1.png&#39;) center, 
url(&#39;../img/2.png&#39;), 
url(&#39;../img/3.png&#39;) left bottom, black; 
6.7.1 背景图片大小
auto：使用图片的原始大小；   
cover：按照原始图片的长宽比缩放图片以填充整个元素区域；   
contain：按照原始图片的长宽比缩放图片以使其较长的一边适应元素大小。6.7.2 背景图片位置6.7.3 背景属性的缩写语法可以使用缩写语法将各种背景属性组合起来。但是以我的经验看，这样会产生捉摸不定的结果。所以我更倾向于使用普通写法，先声明多重背景图片，然后声明背景大小，最后声明背景位置。       6.8 更多 CSS 特性6.9 可缩放图标：响应式设计中的完美选择@font-face图标就是将字符做成常用图标的特定字体。以往我们都是使用很多单独的图标图片，或者将图标图片组合成一张很大的雪碧图，而@font-face 图标则可以让你只用一种字体就涵盖所有要用的图标（这样就只需要一个 http 请求，唔哈哈！ ） 。另外，因为使用的是字体，所以图标就可以完美缩放了——这与响应式设计真可谓天作之合。Fico 上就有很好的@font-face图标，详情请见 http://fico.lensco.be/。6.10 小结

第 7章  CSS3的过渡、变形和动画
什么是 CSS3过渡以及如何使用它    
如何编写 CSS3过渡以及它的缩写语法    
CSS3过渡时间函数（ease、cubic-bezier等）       
响应式网站中有趣的过滤效果       
什么是 CSS3变换以及如何使用它        
理解不同的 2D变换（scale、rotate、skew,、translate 等）       
尝试 3D变换          
CSS3动画效果（使用关键帧）      7.1 什么是 CSS3 过渡以及如何使用它7.1.1 过渡相关的属性
过渡的简写语法   
transition: all 1s ease 0s; 
使用简写语法时要注意，声明中的第一个时间值总被应用给transition-duration，第二个时间值总被应用给 transition-delay。

过渡的局限性使用过渡时有一点需要说明，即有些属性无法实现过渡，尽管规范上说它应该可以（即使在最新的工作草案 http://dev.w3.org/csswg/css3-transitions/中也这么说） 。例如，background-gradient 属性就无法过渡。 但理论上所有 CSS属性都是可以过渡的（http://www.w3.org/TR/css3-transitions/ #properties-from-css-） 。   


在不同时间段内过渡不同属性当一条规则要实现多个属性过渡时，这些属性不必步调一致。看看下面这段代码： 
#content a { 
    /*……其他样式……*/ 
    transition-property: border, color, text-shadow; 
    transition-duration: 2s, 3s, 8s;  
}  

理解过渡调速函数还是请读者直接看这里吧 http://cubic-bezier.com/。     7.1.2 响应式网站中的有趣过渡

7.2 CSS3 的 2D 变形现在如果你尝试在 Safari 浏览器中添加这种规则，须注意它需要应用该规则的原始元素必须以块状显示。示例如下：
我们能做哪些变形
scale：用来缩放元素（放大或缩小）   
translate：在屏幕上移动元素（上下左右四个方向）   
rotate：按照一定角度旋转元素（单位为度  ）括号中的值只能以度为单位（如 90deg） 。
skew：沿 X和 Y轴对元素进行斜切第一个值是 X轴上的斜切 （本例中是 10度） ， 第二个值是 Y轴上的斜切 （本例中是 2度） 。省略第二个值意味着仅有的值只会应用在 X轴上（水平方向） 。
matrix：允许你以像素精度来控制变形效果   
transform: matrix(1.678, -0.256, 1.522, 2.333, -51.533, -1.989); 
它基本上能让你将若干变形效果（scale、rotate、skew等等）组合成单个声明。而且在你看了规范文档之后就会发现问题更难，要完全理解矩阵你得了解相关的数学知识：http://www.w3.org/TR/css3-2d-transforms/#cssmatrix-interface。
傻瓜化的矩阵变形工具如果你的数学也不太好，我建议你访问这里：http://www.useragentman.com/matrix/。  

transform-origin 属性 7.3 尝试 CSS3 的 3D 变形但最新的 IE10都还不支持该特性。尽管缺少“桌面版”浏览器的广泛支持，但多亏了移动平台浏览器基本都是 Webkit血统，所以 3D变形在 Android（V3以后的版本）和 iOS（所有版本）上均被支持。 7.3.1 分析 3D 变形效果第一个要点是在父级元素上设置透视。这样就开启了 3D场景：透视的值越大，就表示你的视点与 3D场景之间的景深越大。因此，如果想要一点隐约的3D 效果，就增大透视值；如果想要非常明显的 3D 效果，则减小透视值。 （3D 效果的立体程度，取决于 3D场景与观察者之间的距离。 ） 

.Qcontainer 类中添加的透视声明只会应用到其第一个子元素上（即本例中的 class为.film 的 div） 。 因此， 为了延续父元素的透视， 我们给.film 元素设定了 preserve-3d（这样可以设置一个 3D场景） 。 
还好， 我们可以用一点传统的CSS代码为非Webkit核心浏览器提供一个合理的降级方案：  z-index
.Qcontainer {  
    -webkit-perspective: 200; 
} 
.film { 
    -webkit-transform-style: preserve-3d; 
} 
.Qcontainer:hover .film { 
    -webkit-transform: rotateY(180deg); 
} 
.face { 
    position: absolute; 
    -webkit-backface-visibility: hidden; 
}
.back { 
    -webkit-transform: rotateY(180deg); 
    background: #3b3b3b; 
    background: -webkit-linear-gradient(top,  
                            rgba(0,0,0,0.65) 0%,  
                            rgba(0,0,0,0) 100%); 
} 
//降级
z-index
7.3.2 3D 变形尚未成熟目前，我依然使用 jQuery或类似技术来制作这类变形效果。 

想了解 W3C有关 CSS 3D变形的最新进展，请见这里：http://dev.w3.org/csswg/css3-3d-transforms/。

7.4 CSS3 动画效果IE 10也决定加入该行列。   
组合使用 CSS3 变形和动画7.5 小结第 8章  用 HTML5和 CSS3征服表单 在表单域中插入占位符文字 在需要时禁用表单域的自动完成功能 将特定表单域设置为必填项 使用不同类型的输入框，如电子邮箱、电话号码和 URL。 制作数字输入滑动条以方便选择数值 使用日期和颜色选择器 学习如何使用正则表达式定义表单值验证规则 为落后的浏览器添加腻子脚本 使用 CSS3轻松灵活地美化 HTML5表单      
8.1 HTML5 表单8.1.1 理解 HTML5 表单中的元素然后包含一个 HTML5的 hgroup，用于显示表单标题和说明文字：表单中的三块子区域都使用带有 legend 标签的 fieldset 来包裹： 
8.1.2 placeholder8.1.3 required我们的例子中还追加了一个等价的 WAI-ARIA属性：aria-required=”true”。
8.1.4 autofocus使用该属性时要小心。如果有多个表单域都被追加了 autofocus 属性，则会造成跨浏览器混乱。 
还有一点需要注意，有些用户会使用空格键让网页内容向下滚动。如果网页的表单中含有带 autofocus 属性的表单域，则会阻止空格键的默认行为，这时敲击空格键会向已聚焦的输入框中输入空格。显然，这会让用户很懊恼。 
8.1.5 autocomplete这不仅仅能保护敏感数据 （例如银行账户） ， 还可以让你确保用户用心填写表单，手工输入一些值。autocomplete=&quot;off&quot;   
我们也可以通过给表单本身（不是 fieldset）设置属性来禁用整个表单的自动完成功能。
8.1.6 list（及对应的 datalist 元素）8.1.7 HTML5 的新输入类型这些新的输入类型最赞的一点，就是在那些不支持新特性的浏览器中，它们会被降级显示为一个标准的文本输入框。此外还有很多很有用的腻子脚本

email此外，许多触摸屏设备（如 Android、iPhone等等）会根据输入类型改变键盘模式。
number超出范围的数字会（应该）得到特殊对待。浏览器的具体实现也不相同，
url 
tel不过好的一点就是，和对待 email 和 url 类型一样，触摸屏设备为这种类型贴心地提供了数字键盘以便完成输入。 
电话号码的输入格式和验证规则，不同地区可能有所不同。不提供统一验证也可以理解。——译者注 


search 
pattern 
学习正则表达式http://en.wikipedia.org/wiki/Regular_expressions。


color悲剧的是，目前很少有浏览器支持该特性，好像只有 Opera（v11）支持。如果浏览器默认的颜色选择器中没有所需的颜色， 点击下方的 Other…按钮就会打开操作系统默认的颜色选择器： 8.1.8 日期和时间输入类型
date
month 
week 
time 
datetime 和 datetime-local 日期时间选择器会生成一个由日期、时间和时区组成的值，日期与时间之间用 T 分割，使用 Z 表示协调世界时，使用正负值表示时区偏移。协调世界时的 2009年 10月 25日显示如下： 2009-10-25T05:05:00Z 
 协调世界时（UTC）与格林尼治标准时（GMT）在大多数实际应用中基本一样。时区偏移则很好理解，比如，北京时间比格林尼治标准时提前 8小时（UTC +8） ，反映到输入值上，效果如下： 2009-10-25T05:05:00+8:00 
 datetime-local 输入类型和 datetime 几乎完全一样，只是省略了时区信息。

修改步增值 你可以使用 step 属性来修改各种输入类型控制按钮的步增值。比如，要 将时间的步增值改为 4个小时，将 step的属性值设为 14400秒（4×60×60） 即可。将 datetime的步增值改为 4小时的示例代码如下： &lt;input id=&quot;datetime&quot; type=&quot;datetime&quot; name=&quot;datetime&quot; step=&quot;14400&quot;&gt;


rangerange 输入类型最大的一个问题是它从来不给用户显示当前的输入值。虽然滑动条仅被设计用来选择模糊的数值， 但我还是经常想看看它的当前值。 使用 HTML5目前无法解决这个问题，但是如果你确实需要显示滑动条的当前输入值，可以通过 JavaScript来实现。8.2 如何给不支持新特性的浏览器打补丁前面把 HTML5表单的功能吹上了天， 但要想实际使用则还有两个非常麻烦的问题： 一是支持表单新特性的浏览器在具体实现上有所不同；二是对完全不支持新特性的浏览器如何处理。万幸的是，Web社区一如既往地拿出了解决办法。

回到第 4 章，我提过一个非常棒的 JavaScript 框架叫做 Modernizr（http://www.modernizr.com） ，用于向缺少 HTML5/CSS3特性支持的浏览器打补丁。由 Alexander Farkas编写的“Webshims Lib”（http://afarkas.github.com/webshim/demos/）就是构建于 Moderniz和无处不在的 jQuery之上的，它可用于插入表单补丁（也可以为其他 HTML5特性打补丁） ，从而使不支持新特性的浏览器可以处理 HTML5 表单。最值得称道的一点是，它利用了Modernizr 的加载功能，能做到只加载实际所需的补丁。如果在原生支持 HTML5 新特性的浏览器中查看网页，则仅会给网页加入一丁点儿冗余代码。而对于老版本浏览器，虽然它们需要加载更多的代码（因为它们本身能力不足） ，但通过相关 JavaScript 方法的辅助，它们能提供基本一致的用户体验。http://github.com/aFarkas/webshim/downloads
8.3 使用 CSS3 美化 HTML5 表单针对表单的 CSS3 伪类选择器 input:required：选择必填表单域； input:focus:invalid：选择当前聚焦的且含有非法输入值的表单域； input:focus:valid：选择当前聚焦的且含有合法输入值的表单域。   
8.4 小结第 9章  解决跨浏览器问题 渐进增强和优雅降级之间的根本区别 如何让老版本 Internet Explorer支持响应式设计 何如使用 Modernizr按需加载 CSS文件 何如使用 Modernizr按需加载 JavaScript补丁文件 如何将超长导航列表在小视口中转换为选择菜单 如何为高分辨率（视网膜）显示屏提供匹配图片  
Internet Explorer 8 中的效果惨不忍睹，因为它不支持\、\、\和\等 HTML5元素，这自然就引入了本章的主题——解决跨浏览器问题。 
9.1 渐进增强与优雅降级优雅降级指的是为现代浏览器制作网站，然后保证为某些老版本浏览器提供基本可用的体验。
渐进增强与优雅降级恰好相反。渐进增强以恪守 Web标准的标签为基础，意味着它在所有浏览器中均可用。然后通过 CSS 样式和必要的 JavaScript 来为更先进的浏览器提供渐进式的增强体验。
现状目前，渐进增强被普遍认为是开发网站的最佳实践。然而，冰冷的现实是，我虽然打心眼里喜欢渐进增强并用它来制作网站，但很多情况下可以说我是用优雅降级的方式来做的。怎么会这样呢？ 
9.2 该不该修复老版本 IE因为我只是告诉你能这么做，并不代表你应该这么做！ 
此外，即使不使用补丁（我们稍后会谈谈这个话题） ，以我的经验，为了能让 IE6 和 IE7（以及少量 IE8 和 IE9）的页面渲染效果尽可能与现代标准浏览器类似，开发、测试和配置专属 CSS 代码所花费的时间，至少也和为现代浏览器提供渐进增强所花费的时间一样多——这很让人不爽！你和你的客户就准备这样用掉开发时间？ 
9.2.1 统计数据（再看看世界的变化）结论就是：老弱的 IE（6、7、8）的使用率正在不断减少，而现代浏览器（包括桌面版和移动版）的使用率则正在不断增加。 
9.2.2 个人选择目前我个人的态度是，针对全新制作的网站，要确保其在最新版本的 IE（编写本书时最新版本是 IE9）以及前一个版本（IE8）中效果完美。而针对老版本 IE的布局和样式调整则由于需要额外的时间，所以另行商议。 
9.3 前端的瑞士军刀：Modernizr那它到底做了什么？既能给老版本浏览器打补丁，又能保证新浏览器渐进增强的用户体验，它是怎么做到的，而我们又如何使其听任差遣呢？好好听着…… 
第一步，下载 Modernizr（http://www.modernizr.com） 。 
9.3.1 使用Modernizr辅助修正样式问题9.3.2 使用Modernizr让老版本IE支持HTML5 元素9.3.3 给IE6、7、8 追加min/max媒体查询功能我选择的给老版本 IE添加媒体查询支持的垫片脚本，仅支持追加min/max-width 媒体查询功能。还有很多类似的垫片脚本，可以追加很多媒体查询特性。但对于响应式设计来说，Scott Jehl开发的 Respond.js使用简单、速度快，我一直用得很顺手。Respond.js（https://github.com/scottjehl/Respond）可以独立于 Modernizr 使用——只需将其引入到需要的页面，然后就如其作者 Scott Jehl所说： “撬开 IE，击掌相庆。 ”
不错，我们现在给 IE添加了垫片脚本，使其可以支持 min-width 和 max-width，但有一个问题：垫片脚本在每一种浏览器中都会被加载——不论它们需要与否。一种解决办法就是将脚本文件链接放置在 IE条件注释中，像下面这样： 
&lt;!--[if lte IE 8]&gt; 
        &lt;script src=&quot;js/respond.min.js&quot;/&gt;&lt;/script&gt; 
&lt;![endif]--&gt; 
9.3.4 使用Modernizr按需加载资源Modernizr中包含一个名为 YepNope.js的小型 JavaScript库文件（http://yepnopejs.com/）。使用方法很简单： 
Modernizr.load({ 
    test: Modernizr.mq(&#39;only all&#39;), //检测的是浏览器是否支持媒体查询：
    nope: &#39;js/respond.min.js&#39; 
}); 

Modernizr.load({ 
    test: Modernizr.mq(&#39;only all&#39;), 
    yep: &#39;js/pass.js&#39;, 
    nope: [&#39;js/respond.min.js&#39;, &#39;fail-polyfill.js&#39;, &#39;fail.css&#39;] , 
    both: &#39;js/for-all.js&#39; 
}); 

下载垫片脚本下面的这个 github库中有很多有用的垫片脚本：https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills。

9.4 必要时将导航链接转换为下拉菜单我想在浏览器视口小于一定宽度时，将这些导航链接转换为一个下拉菜单。你可以自己编 写 一 段 代 码 来 做 这 件 事 。 可 敬 的 Chris Coyier 写 过 一 篇 文 章 来 讲 怎 么 做（http://css-tricks.com/convert-menu-to-dropdown/） 。 不过， 你还可以选择别人已经写好的脚本。为了简便起见，我就选了个现成的脚本。  
首先下载 Responsive Menu脚本（https://github.com/mattkersley/Responsive-Menu） ，
Modernizr.load([ 
{ 
    test: Modernizr.mq(&#39;only all&#39;), 
    nope: &#39;js/respond.min.js&#39; 
}, 
{ 
    // 如果 max-width 等于 600px，则加载菜单转换脚本 
    test: Modernizr.mq(&#39;only screen and (max-width: 600px)&#39;), 
    yep : [&#39;js/jquery-1.7.1.js&#39;, &#39;js/jquery.mobilemenu.js&#39;], 
    complete : function () { 
    // 资源完全加载后运行 
    $(document).ready(function(){ 

        $(&#39;#mainNav&#39;).mobileMenu({ 
        switchWidth: 600,                   //转换宽度 (用 px 表示) 
        topOptionText: &#39;Select a page&#39;,     //第一个选项的内容 
        indentString: &#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#39;  //缩进嵌套选项的字符串 
        }); 
    }); 

    } 
} 
]); 
9.5 高分辨率设备（未来趋势）@media all and (-webkit-min-device-pixel-ratio : 1.5) { 
    #container header[role=&quot;banner&quot;] .logo a { 
        background-image: url(&quot;../img/logo2@x2.png&quot;); 
    } 
} 
使用这个技巧时需要慎重。图片尺寸越大，文件体积也越大，所需的加载时间会更长，所以再重申一遍：你可以这么做，但不一定应该这么做。 
另外，如果浏览器支持可缩放矢量图形（SVG） ，那使用该技术替代图片可以解决我们目前面临的很多图片缩放问题。顾名思义，可缩放矢量图形能生成可任意缩放但显示清晰的矢量图片。不过，媒体查询和 SVG对嵌入在页面中的高分辨率图片无能为力。在这种情况下你需要考虑基于 JavaScript的解决方案。    
9.6 小结14:00</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text">，这样 HTML5就会为文档生成一个精确的大纲：#### 网站的主体内容怎么办你可能会觉得有点奇怪：没有一个专门的元素用来标记页面主体内容。其实逻辑是这样的，既然可以界定除主体内容之外的其他元素，那么剩下的元素自然就是页面的主体了。### 4.5 HTML5 的文本级语义元素除了前面讲过的结构元素，HTML5 还修订了一些被称之为行内元素的标签。HTML5 标准中称这些标签为文本级语义元素http://dev.w3.org/html5/spec/Overview.html#text-level-semantics） 。#### 4.5.1 b&gt;过去，人们通常利用\元素为文本添加样式，但它的实际用途其实是“给文本加粗” 。不过现在你可以正式地将其仅用作样式钩子了，因为现在 HTML5标准对\的定义是：#### 4.5.2 em&gt;#### 4.5.3 i&gt;HTML5标准中对的描述如下：&gt; ……一小段有不同语态或语气的文字，或者是样子上与普通文章有所差异以便标明不同特点的文字。简单地说，它不仅仅是用来给某些文字加斜体效果的。#### 4.5.4 在页面中应用文本层语义元素&gt; 文本层语义元素的默认样式根据过去对\标签的用法，很多浏览器仍会将其渲染为粗体。所以你可以根据实际情况在相关的 CSS代码中重定义其默认样式。想要全面了解，请查看 HTML5标准中的相关章节，地址如下：http://dev.w3.org/html5/spec/Overview.html#text-level-semantics### 4.6 遵循 WAI-ARIA 实现无障碍站点 Web Accessibility Initiative - Accessible Rich Internet Applications 本书着眼点不在于全面讲解无障碍网页应用技术（想要全面了解，请查看 http://www.w3.org/WAI/intro/aria） ，但我们可以采纳其中一部分容易实施的技术，将其应用到 HTML5网站中，以方便残障用户。### ARIA 的地标角色    1. application：用来定义用作网页应用的区域。1. banner：用来定义一个站点级别（而不是某个特定文档的）的区域。如网站的头部和logo。1. complementary：用来定义一个对页面主要区域进行补充说明的区域。在And the winner isn’t…这个网站中，UNSUNG HEROES和 OVERHYPED NONSENSE区域就可以定义为 complementary。1. contentinfo：用来定义与页面主要内容相关的信息区域。例如页脚的网站版权信息区域。1. form：你猜都能猜到，定义表单！但注意，如果表单用于搜索，则请使用search 来替代。1. main：定义页面的主体内容。1. navigation：用来定义链向当前文档或相关文档的导航链接。1. search：用来定义一个用于搜索的区域。&gt; 无障碍网页应用技术进阶无障碍网页应用技术并非只有地标角色。想要做进阶应用，请参阅完整的角色列表及其简要使用说明：http://www.w3.org/TR/wai-aria/roles#role_definitions。&gt; 使用非可视桌面阅读器（NVDA）免费测试网站可访问性如果你是在 Windows平台上开发且想使用屏幕阅读器测试网站的可访问性，可以免费使用 NVDA。软件的官方地址如下：http://www.nvda-project.org/。&gt; 为使用了无障碍技术的元素设置样式和其他属性一样，可以直接使用属性选择器来为其设置样式。如，使用nav[role=”navigation”] {}可以为导航区域设置样式。### 4.7 在 HTML5 中嵌入媒体正如你所预想，IE8及更低版本都不支持 HTML5视频和音频。不过给微软的“先天不足”的浏览器提供备用解决方案也很简单，稍后我们会讨论这个问题。### 4.8 用 HTML5 的方法为页面添加视频或音频#### 4.8.1 提供备用的媒体源文件#### 4.8.2 针对老版本浏览器的备用方案                                                                                  Download Video:            MP4 Format:  “MP4”            Ogg Format:  “Ogg”            #### 4.8.3 和标签的用法基本一致### 4.9 响应式视频然后在 CSS中追加如下代码：video { max-width: 100%; height: auto; }这种方法对本页面中的视频文件很有用，但它不能解决使用 iframe 嵌入的视频的响应问题 （拜YouTube、 Vimeo等等视频网站所赐） 。但截至目前我见过的最简单的办法是使用一个名为 FitVids的 jQuery小插件。### 4.10 离线 Web 应用虽然 HTML5 中的大量新特性对我们的响应式设计没有明显帮助（如地理定位 API） ，但离线 Web 应用应该还有点用处。#### 4.10.1 离线 Web 应用概述离线Web应用的运行机制是每个需要离线使用的网页都指定一个后缀名为.manifest的文本文件。这个文本文件罗列了该网页离线使用时所需的所有资源文件（HTML、图片JavaScript等等） 。支持离线 Web应用的浏览器会自动读取.manifest 文件，下载文件中所罗列的资源文件，并将其缓存在本地以备网络断开时使用。简单吧？那我们来动手试一试……#### 4.10.2 让网页可离线使用     你必须在每一个准备离线使用的页面的HTML标签中都追加manifest=“/offline.manifest”属性。如果使用的是 Apache服务器，你可能还需要修改一下.htaccess 文件，追加一行代码：AddType text/cache-manifest .manifest 这样就保证了.manifest 文件拥有正确的 MIME类型，即 text/cache-manifest。在.htaccess 文件中还可以加入以下代码：            ExpiresActive On        ExpiresDefault “access”    添加上面这几行代码， 可以阻止浏览器缓存缓存文件。 你没看错。 因为 offline.manifest是一个静态文件，浏览器默认就会缓存 offline.manifest 文件。所以上面这几行代码就是让服务器告诉浏览器不要这么干！现在我们需要给 offline.manifest 填充内容。 即通知浏览器那些文件是用作离线存储的。And the winner isn’t…网站的 offline.manifest 文件内容如下：    CACHE MANIFEST    #v1    CACHE:    basic_page_layout_ch4.html    css/main.css    img/atwiNavBg.png    img/kingHong.jpg    img/midnightRun.jpg    img/moulinRouge.jpg    img/oscar.png    img/wyattEarp.jpg    img/buntingSlice3Invert.png    img/buntingSlice3.png    NETWORK:        FALLBACK:    //offline.html#### 4.10.3 理解 manifest 文件manifest 文件必须以 CACHE MANIFEST 开头。第二行就是一句注释，注明了 manifest 文件的版本号。这句注释的用途稍后详细介绍。CACHE:部分罗列了所有离线使用所需的文件。 这些文件的路径都是相对 offline.manifest而言的，所以文件路径可能需要根据情况稍作修改。使用绝对路径也是可以的。NETWORK:部分罗列了所有不需要被缓存的文件。你可以将其看成是一个“在线白名单” 。此处罗列的文件在网络畅通的情况下都会直接跳过缓存。如果你想网站内容在网络畅通的情况下及时更新（而不是仅在离线缓存中查找） ，可以在此处使用。星号被称为在线白名单通配符。FALLBACK:部分使用/字符定义了一个 URL模板。它的作用是访问每个页面时都会问“缓存中有这个页面吗？” ， 如果有则显示缓存页面， 如果没有则显示指定的 offline.html 文件。#### 4.10.4 页面被自动加载到离线缓存根据实际情况，还有一种更简单的办法来设置 offline.manifest 文件。任何指定了离线 manifest 文件的页面（就是在标签中追加了manifest=”/offline.manifest”的页面）在被用户访问时都会被自动加入到本地缓存。浏览器会缓存用户访问过的每一个网页以确保这些网页在离线状态下仍可访问。简化的 manifest文件如下：    CACHE MANIFEST    # Cache Manifest v1    FALLBACK:    //offline.html    NETWORK:    *选择使用这个方法时有一点需要注意， 这种方法只会下载和缓存用户访问的 HTML页面，不会缓存页面内引入的图片、 JavaScript或者其他资源文件。 如果这些资源文件是必需的，那么请按照上节中的方法在 CACHE:部分专门声明这类文件。#### 4.10.5 版本注释的用途对网站内容或任何资源文件做了修改之后， 你必须得对 offline.manifest 文件也做点修改并将其重新上传服务器。这样就能让服务器为浏览器提供新版本文件，而浏览器则会下载该新版本文件并再次触发离线存储进程。我效仿了 Mark Pilgrim 的例子（来自著名的《畅游 HTML5》 一书） ，在offline.manifest 文件的头部加了一句注释，每次修改网站都会对应地修改该版本号：&gt; 作者此处说得不是很清楚。补充一下：如果开发者对网站内容或资源做了修改，那么也得通知浏览器更新缓存文件，否则浏览器仍然会使用之前已有的缓存文件。而通知浏览器更新缓存文件的方式通常是更新 manifest 文件，浏览器如果发现 manifest 文件发生了变化，就会更新缓存文件。大多数情况下manifest 中的缓存文件清单不会发生变化，那我们就通过修改注释的方式来改变 manifest文件，注释中的版本号，既能触发文件变化，又能指明当前版本，一举两得。其实注释中还可以加入更新时间等更详细信息，有助于维护。文中提到的《畅游 HTML5》 ，参见 http://diveintohtml5.com/。——译者注#### 4.10.6 离线访问网站#### 4.10.7 离线 Web 应用的故障诊断### 4.11 小结11.18 02:202017.11.19 日 11:20

第 5 章  CSS3：选择器、字体和颜色模式
CSS3给前端开发人员带来了什么   
快速而便捷的 CSS3技巧（多列布局和文字换行）   
CSS规则解析   
私有前缀的来源和用法  
新的 CSS3选择器的工作原理   
使用@font-face 设定字体    
如何使用带有透明度的 RGB和 HSL颜色模式   5.1 CSS3 给前端开发人员带来了什么5.1.1 Internet Explorer 6 到 8 对 CSS3 的支持除少数例外（如@font-face） ，老版本的 IE（IE 6、7、8）几乎不支持 CSS3的新特性。那么我们可以在设计开发中使用 CSS3吗？和以前一样，答案依然是： “看情况。 ”就我个人而言，目前我主要将 CSS3用作增强网站，而不是用它提供基本功能。我非常喜欢页面元素在不同的浏览器中看起来有点差异，相信你和你的客户也是这样。
各版本 Internet Explorer对 CSS 2.1和 CSS3特性的支持情况，请见如下网址：http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx（或 http://tinyurl.com/495756c） 

5.1.2 使用 CSS3 设计和开发页面5.2 CSS 规则解析5.3 私有前缀及其用法
可快速编辑 CSS3 前缀的代码片段和 JavaScript 方案建立包含所有必需的私有前缀属性的代码片段会带来极大便利。这样你就可以直接粘贴代码而不用每次都重新输入。很多代码编辑程序（或者集成开发环境） 带有代码片段功能， 这样在开发 CSS3时能节省很多时间。也有可以为 CSS文件自动追加前缀的 JavaScript方案， 比如“-prefix-free” ，很不错的解决方案，网址是http://leaverou.github.com/prefixfree/。




什么时候可以使用特定的 CSS3 和 HTML5 特性？随着对 CSS3 研究的不断深入，我衷心建议大家去看看这个网站 http://caniuse.com，在这里你可以知道当前浏览器对特定 CSS3和 HTML5特性的支持程度。除了显示浏览器的特性支持情况之外（可按特性搜索） ，它还提供了来自于 http://gs.statcounter.com的最近的全球浏览器使用率统计

5.4 快速而有效的 CSS 技巧5.4.1 CSS3 多栏布局增加栏位间隙和分割线5.4.2 文字换行CSS3 使用了一个简单的声明解决了这个问题，凑巧的是老版本 IE 均支持该声明，甚至可以追溯到 IE 5.5！word-wrap: break-word; 
5.5 CSS3 的新增选择器及其用法5.5.1 CSS3 属性选择器
CSS3 的子字符串匹配属性选择器  三种匹配模式分别是
一个活生生的例子 
HTML5 中的 ID 值可以用数字开头如果你还不习惯 HTML5，可能会认为 ID 值以数字开头是无效的，因为HTML 4.01 是这样规定的。HTML5 取消了这个限制，HTML 的 ID 命名方面唯一需要记住的是名字中间不能有空格且保证在页面中唯一。详细信息请参阅http://dev.w3.org/html5/spec/Overview.html#the-id-attribute。

5.5.2 CSS3 结构伪类
:last-child 选择器 
nth-child 选择器 
理解 nth 规则的作用 而数值表达式对我们来说有点不好理解，我们来分析一下。为了便于理解，我们从括号内表达式的右边开始分析。例如我想确定(2n+3)会选择那些元素，就从右边开始（即从第 3 个元素开始） ，然后就知道它是从这个元素开始每两个元素选择一个。 数值表达式中也可以使用负数，例如:nth-child(3n-2)，即表示从倒数第 2 个元素开始然后每三个元素选择一个。
 child 和 last-child 的区别在于，last-child 是从文档节点树的末尾开始算。比如:nth-last-child(-n+3)就是从倒数第 3个元素开始， 向后选择之后的所有元素 （因为使用了-n，所以方向是向后） 。


最后，我们来看看:nth-last-of-type。   

CSS3 的计数方式和 jQuery 不太一样如果你经常使用 jQuery就会知道，jQuery中的计数是从 0开始的。比如在 jQuery 中使用整数 1 来选择元素，实际上会选中第二个元素。但在CSS3中，计数从 1开始，所以整数 1会匹配第一个元素。 

否定（:not）选择器  


除此之外，CSS3还有很多其他选择器。如果你在开发 Web应用，那完整的 UI元素状态伪类列表http://www.w3.org/TR/selectors/#UIstates）则值得一读，它对你极有帮助，例如可以让你根据元素被选中与否来应用样式规则。 
5.5.3 对伪元素的修正CSS3要求对伪元素使用两个冒号以便与伪类进行区别。因此刚才的例子应该改写为 p::first-letter。但注意 Internet Explorer 8及更低版本的 IE无法识别两个冒号的语法，它们只识别一个冒号。
:first-line 对响应式设计来说好用吗于是，在响应式设计中就有了一种方法，不需要修改标签代码，即可方便地将文本第一行内容（即浏览器渲染出来的第一行，不是标签代码中的第一行）显示得与众不同。 
5.6 自定义网页字体多年来我们一直被迫使用一组单调乏味的 Web 安全字体。当网页设计中确实需要一些优雅的字体时， 我们通常都是使用图片来替代， 并对元素使用text-indent 规则将实际的文本移出视口范围。曾有一些稍微高级点的备选方案，来为网页增加更加个性的字体效果。sIFR（http://www.mikeindustries.com/blog/sifr/）和 Cufón（http://cufon.shoqolate.com/generate/）都使用 Flash和 JavaScript来重建文本元素，然后使用自定义字体来显示内容。但是在响应式设计中，
5.6.1 @font-face 规则@font-face 规则在 CSS2中已经存在（但随后在 CSS 2.1中被删除） 。IE 4甚至对其提供了部分支持（真的，不骗你） ！
但浏览器厂商对不同的字体格式和具体实现仍在争论。如Embedded OpenType（EOT）字体是 Internet Explorer的首选格式（其他浏览器都不支持） ，其他浏览器更钟爱常见的 TrueType格式（TTF） ，还有 Scalable Vector Graphics (SVG)以及 Web Open Font Format (WOFF)。使用@font-face 为网页设定字体时，可谓喜忧参半。
5.6.2 使用@font-face 嵌入网页字体首先我们得有字体。 网上有很多很棒的字体资源站点， 有免费的也有收费的。 虽然 Google也提供了免费的网页字体，且基本上都可使用@font-face 规则 （www.google.com/webfonts） ，但我个人最喜欢 Font Squirrel  （www.fontsquirrel.com） 。另外还有 Typekit（www.typekit.com） 和 Font Deck（www.fontdeck.com）上也有一些非常优秀的付费字体。  
5.7 帮帮我，标题模糊怎么办后来，我发现导致该问题的原因是字体粗细。除非显式声明 font-weight 属性，否则大多数浏览器都会为标题元素应用标准的 font-weight （一般都是 700） 。 因此解决方法就是始终为应用了@font-face 字体的标题元素设定 font-weight 属性。
唯一需要注意的，是在响应式设计中使用该技术时要考虑到字体文件大小。

真正的响应式字体单位还不能广泛使用当前的 CSS3 字体模块工作草案中引入了视口相对字体（http://www.w3.org/ TR/ css3-values/#viewport-relative-lengths） 。 相对单位 vw （视口宽度） 、vh（视口高度）和 vm（视口最小边长，即 vm 和 vh 中较小的一个）在获得浏览器广泛支持之后，能为我们节省大量开发时间。悲哀的是目前除了 IE 9之外，其他浏览器都不支持视口相对单位。

5.8 新的 CSS3 颜色格式和透明度5.8.1 RGB 颜色5.8.2 HSL 颜色除了 RGB，CSS3还可使用 HSL（色相、饱和度、亮度）模式来声明颜色。

HSL 不是 HSB不要错误地认为图片编辑软件如 Photoshop中显示的 HSB（色相、饱和度、明度）值就是 HSL——它们不一样①！HSL模式基于一个 360°的色相环，第一个数字代表色相，其后的两个值分别表示饱和度和亮度，值为百分比，用于改变基础的色相。Young Guys Can Be Messy Rascals 60黄，绿 青 蓝 洋红 360红

5.8.3 针对 IE6、IE7 和 IE8 提供备用颜色值你可能都猜到了，版本 9 以下的 IE 浏览器不支持 RGB 和 HSL。
5.8.4 透明通道5.9 小结第 6章  用 CSS3创造令人惊艳的美
使用 CSS3制作文字阴影   
使用 CSS3制作盒阴影（即元素投影）   
使用 CSS3制作渐变背景      
使用 CSS3的多重背景图片       
使用 CSS3背景渐变来制作图案     
使用 CSS3的@font-face 规则来制作节省带宽的图标     6.1 文字阴影6.1.1 HEX、HSL 或 RGB 颜色都可以6.1.2 px、em 或 rem 都行我个人其实很少用 em 或 rem 作为阴影大小的单位。因为阴影一般都比较小，一个或两个像素的阴影，在所有视口中的效果都很不错。 6.1.3 取消文字阴影左上方阴影使用负值6.1.4 制作浮雕文字阴影效果这种效果一般最适合应用在非白色背景的深色文字上，搭配以高亮颜色（如纯白色或类似颜色）的阴影。
想要最好的浮雕文字效果，我有诀窍：不要模糊，不要水平阴影，仅在垂直方向设置 1或 2像素的“白影”即可。 

6.1.5 多重文字阴影只需将两组值使用逗号分隔开即可6.2 盒阴影但是，盒阴影的的跨浏览器支持并不好，所以明智的做法是使用浏览器私有前缀6.2.1 内阴影 box-shadow:inset 0 0 40px #000000; 6.2.2 多重阴影这样两组阴影就会按照代码中的先后顺序从上到下应用到元素上。换句话说，就是代码中先声明的规则，在浏览器中会覆盖下面的规则。 6.3 背景渐变6.3.1 线性背景渐变背景渐变唯一美中不足的是它不像其他一些 CSS3 特性那样被广泛支持。比如 IE 9 就没有对它的原生支持（微软承诺在 IE 10中支持） 。

作为老版本浏览器的降级方案，最好先定义一个固定背景颜色，
分解线性渐变语法6.3.2 径向背景渐变分解径向渐变语法background: radial-gradient(center, ellipse cover, #ffffff 72%, #dddddd 100%); 

closest-side： （渐变形状是圆形时） 以距离中心点最近的一边为渐变半径， 或者 （渐变形状是椭圆形时）以距离中心点最近的水平或垂直边为渐变半径。   
closest-corner：以距离中心点最近的一角为渐变半径。 
farthest-side：和 closest-side 正好相反， （渐变形状是圆形时）以距离中心点最远的一边为渐变半径，或者（渐变形状是椭圆形时）以距离中心点最远的水平或垂直边为渐变半径。   
farthest-corner：以距离中心点最远的一角为渐变半径。   
cover：和 farthest-corner 完全一样。   
contain：和 closest-side 完全一样。    

制作完美 CSS3 渐变的简便方法如果写出一个 CSS3 渐变对你来说有点难度，那你可以考虑使用在线渐变生成器。我个人最喜欢的渐变生成器是 http://www.colorzilla.com/gradient-editor/。 它的用户界面风格很像图像处理软件， 你可以选择颜色、过渡点、渐变风格（线性渐变或径向渐变） ，甚至可以选择自己喜欢的颜色空间（HEX、RGB(A)、HSL(A)） 。这个在线渐变生成器还会加载一些预置的渐变供你选用和修改。如果这些还不足以打动你，须知它还提供了可选的代码设置，用来修正 IE 9，让它显示渐变效果，而且还为老版本浏览器提供了备用的背景颜色。还是不动心？它还能基于已有的图片直接生成渐变，这个功能怎么样？我想这下总该打动你了。       

6.3.3 重复渐变 background: repeating-linear-gradient(90deg, #ffffff 0px, hsla(0, 1%, 50%,0.1) 5px); background: repeating-radial-gradient(2px 2px, ellipse,  
hsla(0,0%,100%,1) 2px, hsla(0,0%,95%,1) 10px,  
hsla(0,0%,93%,1) 15px, hsla(0,0%,100%,1) 20px);     
6.4 背景渐变图案CSS 高手 Lea Verou 收集了一系列 CSS3 背景渐变图案，具体请见http://lea.verou.me/css3patterns/。 
6.5 CSS3 的响应性6.6 组合使用 CSS3 属性还有最后一个问题，原始设计图中的那两个尖括号（即 HTML中的\»）使用了与按钮文字不一样的字体。但在此处为这么一个特殊符号专门引入一种字体不太划算，所以我准备将这个符号用一个内联标签包裹起来，然后增大它的字号。
6.7 多重背景图片有一种很常见的设计需求，就是制作一个顶部和底部使用不同背景图片的页面。除了 IE 8及更低版本外，其他浏览器均支持该特性。语法如下：
 background:  
url(&#39;../img/1.png&#39;) center, 
url(&#39;../img/2.png&#39;), 
url(&#39;../img/3.png&#39;) left bottom, black; 
6.7.1 背景图片大小
auto：使用图片的原始大小；   
cover：按照原始图片的长宽比缩放图片以填充整个元素区域；   
contain：按照原始图片的长宽比缩放图片以使其较长的一边适应元素大小。6.7.2 背景图片位置6.7.3 背景属性的缩写语法可以使用缩写语法将各种背景属性组合起来。但是以我的经验看，这样会产生捉摸不定的结果。所以我更倾向于使用普通写法，先声明多重背景图片，然后声明背景大小，最后声明背景位置。       6.8 更多 CSS 特性6.9 可缩放图标：响应式设计中的完美选择@font-face图标就是将字符做成常用图标的特定字体。以往我们都是使用很多单独的图标图片，或者将图标图片组合成一张很大的雪碧图，而@font-face 图标则可以让你只用一种字体就涵盖所有要用的图标（这样就只需要一个 http 请求，唔哈哈！ ） 。另外，因为使用的是字体，所以图标就可以完美缩放了——这与响应式设计真可谓天作之合。Fico 上就有很好的@font-face图标，详情请见 http://fico.lensco.be/。6.10 小结

第 7章  CSS3的过渡、变形和动画
什么是 CSS3过渡以及如何使用它    
如何编写 CSS3过渡以及它的缩写语法    
CSS3过渡时间函数（ease、cubic-bezier等）       
响应式网站中有趣的过滤效果       
什么是 CSS3变换以及如何使用它        
理解不同的 2D变换（scale、rotate、skew,、translate 等）       
尝试 3D变换          
CSS3动画效果（使用关键帧）      7.1 什么是 CSS3 过渡以及如何使用它7.1.1 过渡相关的属性
过渡的简写语法   
transition: all 1s ease 0s; 
使用简写语法时要注意，声明中的第一个时间值总被应用给transition-duration，第二个时间值总被应用给 transition-delay。

过渡的局限性使用过渡时有一点需要说明，即有些属性无法实现过渡，尽管规范上说它应该可以（即使在最新的工作草案 http://dev.w3.org/csswg/css3-transitions/中也这么说） 。例如，background-gradient 属性就无法过渡。 但理论上所有 CSS属性都是可以过渡的（http://www.w3.org/TR/css3-transitions/ #properties-from-css-） 。   


在不同时间段内过渡不同属性当一条规则要实现多个属性过渡时，这些属性不必步调一致。看看下面这段代码： 
#content a { 
    /*……其他样式……*/ 
    transition-property: border, color, text-shadow; 
    transition-duration: 2s, 3s, 8s;  
}  

理解过渡调速函数还是请读者直接看这里吧 http://cubic-bezier.com/。     7.1.2 响应式网站中的有趣过渡

7.2 CSS3 的 2D 变形现在如果你尝试在 Safari 浏览器中添加这种规则，须注意它需要应用该规则的原始元素必须以块状显示。示例如下：
我们能做哪些变形
scale：用来缩放元素（放大或缩小）   
translate：在屏幕上移动元素（上下左右四个方向）   
rotate：按照一定角度旋转元素（单位为度  ）括号中的值只能以度为单位（如 90deg） 。
skew：沿 X和 Y轴对元素进行斜切第一个值是 X轴上的斜切 （本例中是 10度） ， 第二个值是 Y轴上的斜切 （本例中是 2度） 。省略第二个值意味着仅有的值只会应用在 X轴上（水平方向） 。
matrix：允许你以像素精度来控制变形效果   
transform: matrix(1.678, -0.256, 1.522, 2.333, -51.533, -1.989); 
它基本上能让你将若干变形效果（scale、rotate、skew等等）组合成单个声明。而且在你看了规范文档之后就会发现问题更难，要完全理解矩阵你得了解相关的数学知识：http://www.w3.org/TR/css3-2d-transforms/#cssmatrix-interface。
傻瓜化的矩阵变形工具如果你的数学也不太好，我建议你访问这里：http://www.useragentman.com/matrix/。  

transform-origin 属性 7.3 尝试 CSS3 的 3D 变形但最新的 IE10都还不支持该特性。尽管缺少“桌面版”浏览器的广泛支持，但多亏了移动平台浏览器基本都是 Webkit血统，所以 3D变形在 Android（V3以后的版本）和 iOS（所有版本）上均被支持。 7.3.1 分析 3D 变形效果第一个要点是在父级元素上设置透视。这样就开启了 3D场景：透视的值越大，就表示你的视点与 3D场景之间的景深越大。因此，如果想要一点隐约的3D 效果，就增大透视值；如果想要非常明显的 3D 效果，则减小透视值。 （3D 效果的立体程度，取决于 3D场景与观察者之间的距离。 ） 

.Qcontainer 类中添加的透视声明只会应用到其第一个子元素上（即本例中的 class为.film 的 div） 。 因此， 为了延续父元素的透视， 我们给.film 元素设定了 preserve-3d（这样可以设置一个 3D场景） 。 
还好， 我们可以用一点传统的CSS代码为非Webkit核心浏览器提供一个合理的降级方案：  z-index
.Qcontainer {  
    -webkit-perspective: 200; 
} 
.film { 
    -webkit-transform-style: preserve-3d; 
} 
.Qcontainer:hover .film { 
    -webkit-transform: rotateY(180deg); 
} 
.face { 
    position: absolute; 
    -webkit-backface-visibility: hidden; 
}
.back { 
    -webkit-transform: rotateY(180deg); 
    background: #3b3b3b; 
    background: -webkit-linear-gradient(top,  
                            rgba(0,0,0,0.65) 0%,  
                            rgba(0,0,0,0) 100%); 
} 
//降级
z-index
7.3.2 3D 变形尚未成熟目前，我依然使用 jQuery或类似技术来制作这类变形效果。 

想了解 W3C有关 CSS 3D变形的最新进展，请见这里：http://dev.w3.org/csswg/css3-3d-transforms/。

7.4 CSS3 动画效果IE 10也决定加入该行列。   
组合使用 CSS3 变形和动画7.5 小结第 8章  用 HTML5和 CSS3征服表单 在表单域中插入占位符文字 在需要时禁用表单域的自动完成功能 将特定表单域设置为必填项 使用不同类型的输入框，如电子邮箱、电话号码和 URL。 制作数字输入滑动条以方便选择数值 使用日期和颜色选择器 学习如何使用正则表达式定义表单值验证规则 为落后的浏览器添加腻子脚本 使用 CSS3轻松灵活地美化 HTML5表单      
8.1 HTML5 表单8.1.1 理解 HTML5 表单中的元素然后包含一个 HTML5的 hgroup，用于显示表单标题和说明文字：表单中的三块子区域都使用带有 legend 标签的 fieldset 来包裹： 
8.1.2 placeholder8.1.3 required我们的例子中还追加了一个等价的 WAI-ARIA属性：aria-required=”true”。
8.1.4 autofocus使用该属性时要小心。如果有多个表单域都被追加了 autofocus 属性，则会造成跨浏览器混乱。 
还有一点需要注意，有些用户会使用空格键让网页内容向下滚动。如果网页的表单中含有带 autofocus 属性的表单域，则会阻止空格键的默认行为，这时敲击空格键会向已聚焦的输入框中输入空格。显然，这会让用户很懊恼。 
8.1.5 autocomplete这不仅仅能保护敏感数据 （例如银行账户） ， 还可以让你确保用户用心填写表单，手工输入一些值。autocomplete=&quot;off&quot;   
我们也可以通过给表单本身（不是 fieldset）设置属性来禁用整个表单的自动完成功能。
8.1.6 list（及对应的 datalist 元素）8.1.7 HTML5 的新输入类型这些新的输入类型最赞的一点，就是在那些不支持新特性的浏览器中，它们会被降级显示为一个标准的文本输入框。此外还有很多很有用的腻子脚本

email此外，许多触摸屏设备（如 Android、iPhone等等）会根据输入类型改变键盘模式。
number超出范围的数字会（应该）得到特殊对待。浏览器的具体实现也不相同，
url 
tel不过好的一点就是，和对待 email 和 url 类型一样，触摸屏设备为这种类型贴心地提供了数字键盘以便完成输入。 
电话号码的输入格式和验证规则，不同地区可能有所不同。不提供统一验证也可以理解。——译者注 


search 
pattern 
学习正则表达式http://en.wikipedia.org/wiki/Regular_expressions。


color悲剧的是，目前很少有浏览器支持该特性，好像只有 Opera（v11）支持。如果浏览器默认的颜色选择器中没有所需的颜色， 点击下方的 Other…按钮就会打开操作系统默认的颜色选择器： 8.1.8 日期和时间输入类型
date
month 
week 
time 
datetime 和 datetime-local 日期时间选择器会生成一个由日期、时间和时区组成的值，日期与时间之间用 T 分割，使用 Z 表示协调世界时，使用正负值表示时区偏移。协调世界时的 2009年 10月 25日显示如下： 2009-10-25T05:05:00Z 
 协调世界时（UTC）与格林尼治标准时（GMT）在大多数实际应用中基本一样。时区偏移则很好理解，比如，北京时间比格林尼治标准时提前 8小时（UTC +8） ，反映到输入值上，效果如下： 2009-10-25T05:05:00+8:00 
 datetime-local 输入类型和 datetime 几乎完全一样，只是省略了时区信息。

修改步增值 你可以使用 step 属性来修改各种输入类型控制按钮的步增值。比如，要 将时间的步增值改为 4个小时，将 step的属性值设为 14400秒（4×60×60） 即可。将 datetime的步增值改为 4小时的示例代码如下： &lt;input id=&quot;datetime&quot; type=&quot;datetime&quot; name=&quot;datetime&quot; step=&quot;14400&quot;&gt;


rangerange 输入类型最大的一个问题是它从来不给用户显示当前的输入值。虽然滑动条仅被设计用来选择模糊的数值， 但我还是经常想看看它的当前值。 使用 HTML5目前无法解决这个问题，但是如果你确实需要显示滑动条的当前输入值，可以通过 JavaScript来实现。8.2 如何给不支持新特性的浏览器打补丁前面把 HTML5表单的功能吹上了天， 但要想实际使用则还有两个非常麻烦的问题： 一是支持表单新特性的浏览器在具体实现上有所不同；二是对完全不支持新特性的浏览器如何处理。万幸的是，Web社区一如既往地拿出了解决办法。

回到第 4 章，我提过一个非常棒的 JavaScript 框架叫做 Modernizr（http://www.modernizr.com） ，用于向缺少 HTML5/CSS3特性支持的浏览器打补丁。由 Alexander Farkas编写的“Webshims Lib”（http://afarkas.github.com/webshim/demos/）就是构建于 Moderniz和无处不在的 jQuery之上的，它可用于插入表单补丁（也可以为其他 HTML5特性打补丁） ，从而使不支持新特性的浏览器可以处理 HTML5 表单。最值得称道的一点是，它利用了Modernizr 的加载功能，能做到只加载实际所需的补丁。如果在原生支持 HTML5 新特性的浏览器中查看网页，则仅会给网页加入一丁点儿冗余代码。而对于老版本浏览器，虽然它们需要加载更多的代码（因为它们本身能力不足） ，但通过相关 JavaScript 方法的辅助，它们能提供基本一致的用户体验。http://github.com/aFarkas/webshim/downloads
8.3 使用 CSS3 美化 HTML5 表单针对表单的 CSS3 伪类选择器 input:required：选择必填表单域； input:focus:invalid：选择当前聚焦的且含有非法输入值的表单域； input:focus:valid：选择当前聚焦的且含有合法输入值的表单域。   
8.4 小结第 9章  解决跨浏览器问题 渐进增强和优雅降级之间的根本区别 如何让老版本 Internet Explorer支持响应式设计 何如使用 Modernizr按需加载 CSS文件 何如使用 Modernizr按需加载 JavaScript补丁文件 如何将超长导航列表在小视口中转换为选择菜单 如何为高分辨率（视网膜）显示屏提供匹配图片  
Internet Explorer 8 中的效果惨不忍睹，因为它不支持\、\、\和\等 HTML5元素，这自然就引入了本章的主题——解决跨浏览器问题。 
9.1 渐进增强与优雅降级优雅降级指的是为现代浏览器制作网站，然后保证为某些老版本浏览器提供基本可用的体验。
渐进增强与优雅降级恰好相反。渐进增强以恪守 Web标准的标签为基础，意味着它在所有浏览器中均可用。然后通过 CSS 样式和必要的 JavaScript 来为更先进的浏览器提供渐进式的增强体验。
现状目前，渐进增强被普遍认为是开发网站的最佳实践。然而，冰冷的现实是，我虽然打心眼里喜欢渐进增强并用它来制作网站，但很多情况下可以说我是用优雅降级的方式来做的。怎么会这样呢？ 
9.2 该不该修复老版本 IE因为我只是告诉你能这么做，并不代表你应该这么做！ 
此外，即使不使用补丁（我们稍后会谈谈这个话题） ，以我的经验，为了能让 IE6 和 IE7（以及少量 IE8 和 IE9）的页面渲染效果尽可能与现代标准浏览器类似，开发、测试和配置专属 CSS 代码所花费的时间，至少也和为现代浏览器提供渐进增强所花费的时间一样多——这很让人不爽！你和你的客户就准备这样用掉开发时间？ 
9.2.1 统计数据（再看看世界的变化）结论就是：老弱的 IE（6、7、8）的使用率正在不断减少，而现代浏览器（包括桌面版和移动版）的使用率则正在不断增加。 
9.2.2 个人选择目前我个人的态度是，针对全新制作的网站，要确保其在最新版本的 IE（编写本书时最新版本是 IE9）以及前一个版本（IE8）中效果完美。而针对老版本 IE的布局和样式调整则由于需要额外的时间，所以另行商议。 
9.3 前端的瑞士军刀：Modernizr那它到底做了什么？既能给老版本浏览器打补丁，又能保证新浏览器渐进增强的用户体验，它是怎么做到的，而我们又如何使其听任差遣呢？好好听着…… 
第一步，下载 Modernizr（http://www.modernizr.com） 。 
9.3.1 使用Modernizr辅助修正样式问题9.3.2 使用Modernizr让老版本IE支持HTML5 元素9.3.3 给IE6、7、8 追加min/max媒体查询功能我选择的给老版本 IE添加媒体查询支持的垫片脚本，仅支持追加min/max-width 媒体查询功能。还有很多类似的垫片脚本，可以追加很多媒体查询特性。但对于响应式设计来说，Scott Jehl开发的 Respond.js使用简单、速度快，我一直用得很顺手。Respond.js（https://github.com/scottjehl/Respond）可以独立于 Modernizr 使用——只需将其引入到需要的页面，然后就如其作者 Scott Jehl所说： “撬开 IE，击掌相庆。 ”
不错，我们现在给 IE添加了垫片脚本，使其可以支持 min-width 和 max-width，但有一个问题：垫片脚本在每一种浏览器中都会被加载——不论它们需要与否。一种解决办法就是将脚本文件链接放置在 IE条件注释中，像下面这样： 
&lt;!--[if lte IE 8]&gt; 
        &lt;script src=&quot;js/respond.min.js&quot;/&gt;&lt;/script&gt; 
&lt;![endif]--&gt; 
9.3.4 使用Modernizr按需加载资源Modernizr中包含一个名为 YepNope.js的小型 JavaScript库文件（http://yepnopejs.com/）。使用方法很简单： 
Modernizr.load({ 
    test: Modernizr.mq(&#39;only all&#39;), //检测的是浏览器是否支持媒体查询：
    nope: &#39;js/respond.min.js&#39; 
}); 

Modernizr.load({ 
    test: Modernizr.mq(&#39;only all&#39;), 
    yep: &#39;js/pass.js&#39;, 
    nope: [&#39;js/respond.min.js&#39;, &#39;fail-polyfill.js&#39;, &#39;fail.css&#39;] , 
    both: &#39;js/for-all.js&#39; 
}); 

下载垫片脚本下面的这个 github库中有很多有用的垫片脚本：https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills。

9.4 必要时将导航链接转换为下拉菜单我想在浏览器视口小于一定宽度时，将这些导航链接转换为一个下拉菜单。你可以自己编 写 一 段 代 码 来 做 这 件 事 。 可 敬 的 Chris Coyier 写 过 一 篇 文 章 来 讲 怎 么 做（http://css-tricks.com/convert-menu-to-dropdown/） 。 不过， 你还可以选择别人已经写好的脚本。为了简便起见，我就选了个现成的脚本。  
首先下载 Responsive Menu脚本（https://github.com/mattkersley/Responsive-Menu） ，
Modernizr.load([ 
{ 
    test: Modernizr.mq(&#39;only all&#39;), 
    nope: &#39;js/respond.min.js&#39; 
}, 
{ 
    // 如果 max-width 等于 600px，则加载菜单转换脚本 
    test: Modernizr.mq(&#39;only screen and (max-width: 600px)&#39;), 
    yep : [&#39;js/jquery-1.7.1.js&#39;, &#39;js/jquery.mobilemenu.js&#39;], 
    complete : function () { 
    // 资源完全加载后运行 
    $(document).ready(function(){ 

        $(&#39;#mainNav&#39;).mobileMenu({ 
        switchWidth: 600,                   //转换宽度 (用 px 表示) 
        topOptionText: &#39;Select a page&#39;,     //第一个选项的内容 
        indentString: &#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#39;  //缩进嵌套选项的字符串 
        }); 
    }); 

    } 
} 
]); 
9.5 高分辨率设备（未来趋势）@media all and (-webkit-min-device-pixel-ratio : 1.5) { 
    #container header[role=&quot;banner&quot;] .logo a { 
        background-image: url(&quot;../img/logo2@x2.png&quot;); 
    } 
} 
使用这个技巧时需要慎重。图片尺寸越大，文件体积也越大，所需的加载时间会更长，所以再重申一遍：你可以这么做，但不一定应该这么做。 
另外，如果浏览器支持可缩放矢量图形（SVG） ，那使用该技术替代图片可以解决我们目前面临的很多图片缩放问题。顾名思义，可缩放矢量图形能生成可任意缩放但显示清晰的矢量图片。不过，媒体查询和 SVG对嵌入在页面中的高分辨率图片无能为力。在这种情况下你需要考虑基于 JavaScript的解决方案。    
9.6 小结14:00</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#第-5-章-CSS3：选择器、字体和颜色模式"><span class="nav-text">第 5 章  CSS3：选择器、字体和颜色模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-CSS3-给前端开发人员带来了什么"><span class="nav-text">5.1 CSS3 给前端开发人员带来了什么</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-1-Internet-Explorer-6-到-8-对-CSS3-的支持"><span class="nav-text">5.1.1 Internet Explorer 6 到 8 对 CSS3 的支持</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-2-使用-CSS3-设计和开发页面"><span class="nav-text">5.1.2 使用 CSS3 设计和开发页面</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-CSS-规则解析"><span class="nav-text">5.2 CSS 规则解析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-私有前缀及其用法"><span class="nav-text">5.3 私有前缀及其用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-快速而有效的-CSS-技巧"><span class="nav-text">5.4 快速而有效的 CSS 技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-1-CSS3-多栏布局"><span class="nav-text">5.4.1 CSS3 多栏布局</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#增加栏位间隙和分割线"><span class="nav-text">增加栏位间隙和分割线</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-2-文字换行"><span class="nav-text">5.4.2 文字换行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-CSS3-的新增选择器及其用法"><span class="nav-text">5.5 CSS3 的新增选择器及其用法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-5-1-CSS3-属性选择器"><span class="nav-text">5.5.1 CSS3 属性选择器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-5-2-CSS3-结构伪类"><span class="nav-text">5.5.2 CSS3 结构伪类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-5-3-对伪元素的修正"><span class="nav-text">5.5.3 对伪元素的修正</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-6-自定义网页字体"><span class="nav-text">5.6 自定义网页字体</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-6-1-font-face-规则"><span class="nav-text">5.6.1 @font-face 规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-6-2-使用-font-face-嵌入网页字体"><span class="nav-text">5.6.2 使用@font-face 嵌入网页字体</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-7-帮帮我，标题模糊怎么办"><span class="nav-text">5.7 帮帮我，标题模糊怎么办</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-8-新的-CSS3-颜色格式和透明度"><span class="nav-text">5.8 新的 CSS3 颜色格式和透明度</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-8-1-RGB-颜色"><span class="nav-text">5.8.1 RGB 颜色</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-8-2-HSL-颜色"><span class="nav-text">5.8.2 HSL 颜色</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-8-3-针对-IE6、IE7-和-IE8-提供备用颜色值"><span class="nav-text">5.8.3 针对 IE6、IE7 和 IE8 提供备用颜色值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-8-4-透明通道"><span class="nav-text">5.8.4 透明通道</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-9-小结"><span class="nav-text">5.9 小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第-6章-用-CSS3创造令人惊艳的美"><span class="nav-text">第 6章  用 CSS3创造令人惊艳的美</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-文字阴影"><span class="nav-text">6.1 文字阴影</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-1-HEX、HSL-或-RGB-颜色都可以"><span class="nav-text">6.1.1 HEX、HSL 或 RGB 颜色都可以</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-2-px、em-或-rem-都行"><span class="nav-text">6.1.2 px、em 或 rem 都行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-3-取消文字阴影"><span class="nav-text">6.1.3 取消文字阴影</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#左上方阴影"><span class="nav-text">左上方阴影</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-4-制作浮雕文字阴影效果"><span class="nav-text">6.1.4 制作浮雕文字阴影效果</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-5-多重文字阴影"><span class="nav-text">6.1.5 多重文字阴影</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-盒阴影"><span class="nav-text">6.2 盒阴影</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-1-内阴影"><span class="nav-text">6.2.1 内阴影</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-2-多重阴影"><span class="nav-text">6.2.2 多重阴影</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-3-背景渐变"><span class="nav-text">6.3 背景渐变</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#6-3-1-线性背景渐变"><span class="nav-text">6.3.1 线性背景渐变</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分解线性渐变语法"><span class="nav-text">分解线性渐变语法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-3-2-径向背景渐变"><span class="nav-text">6.3.2 径向背景渐变</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#分解径向渐变语法"><span class="nav-text">分解径向渐变语法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-3-3-重复渐变"><span class="nav-text">6.3.3 重复渐变</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-4-背景渐变图案"><span class="nav-text">6.4 背景渐变图案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-5-CSS3-的响应性"><span class="nav-text">6.5 CSS3 的响应性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-6-组合使用-CSS3-属性"><span class="nav-text">6.6 组合使用 CSS3 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-7-多重背景图片"><span class="nav-text">6.7 多重背景图片</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#6-7-1-背景图片大小"><span class="nav-text">6.7.1 背景图片大小</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-7-2-背景图片位置"><span class="nav-text">6.7.2 背景图片位置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-7-3-背景属性的缩写语法"><span class="nav-text">6.7.3 背景属性的缩写语法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-8-更多-CSS-特性"><span class="nav-text">6.8 更多 CSS 特性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-9-可缩放图标：响应式设计中的完美选择"><span class="nav-text">6.9 可缩放图标：响应式设计中的完美选择</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-10-小结"><span class="nav-text">6.10 小结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第-7章-CSS3的过渡、变形和动画"><span class="nav-text">第 7章  CSS3的过渡、变形和动画</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-什么是-CSS3-过渡以及如何使用它"><span class="nav-text">7.1 什么是 CSS3 过渡以及如何使用它</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-1-过渡相关的属性"><span class="nav-text">7.1.1 过渡相关的属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-2-响应式网站中的有趣过渡"><span class="nav-text">7.1.2 响应式网站中的有趣过渡</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-CSS3-的-2D-变形"><span class="nav-text">7.2 CSS3 的 2D 变形</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#我们能做哪些变形"><span class="nav-text">我们能做哪些变形</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#傻瓜化的矩阵变形工具"><span class="nav-text">傻瓜化的矩阵变形工具</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-尝试-CSS3-的-3D-变形"><span class="nav-text">7.3 尝试 CSS3 的 3D 变形</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-3-1-分析-3D-变形效果"><span class="nav-text">7.3.1 分析 3D 变形效果</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-3-2-3D-变形尚未成熟"><span class="nav-text">7.3.2 3D 变形尚未成熟</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-CSS3-动画效果"><span class="nav-text">7.4 CSS3 动画效果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#组合使用-CSS3-变形和动画"><span class="nav-text">组合使用 CSS3 变形和动画</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5-小结"><span class="nav-text">7.5 小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第-8章-用-HTML5和-CSS3征服表单"><span class="nav-text">第 8章  用 HTML5和 CSS3征服表单</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-HTML5-表单"><span class="nav-text">8.1 HTML5 表单</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-1-理解-HTML5-表单中的元素"><span class="nav-text">8.1.1 理解 HTML5 表单中的元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-2-placeholder"><span class="nav-text">8.1.2 placeholder</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-3-required"><span class="nav-text">8.1.3 required</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-4-autofocus"><span class="nav-text">8.1.4 autofocus</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-5-autocomplete"><span class="nav-text">8.1.5 autocomplete</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-6-list（及对应的-datalist-元素）"><span class="nav-text">8.1.6 list（及对应的 datalist 元素）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-7-HTML5-的新输入类型"><span class="nav-text">8.1.7 HTML5 的新输入类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-8-日期和时间输入类型"><span class="nav-text">8.1.8 日期和时间输入类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-如何给不支持新特性的浏览器打补丁"><span class="nav-text">8.2 如何给不支持新特性的浏览器打补丁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-使用-CSS3-美化-HTML5-表单"><span class="nav-text">8.3 使用 CSS3 美化 HTML5 表单</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#针对表单的-CSS3-伪类选择器"><span class="nav-text">针对表单的 CSS3 伪类选择器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-小结"><span class="nav-text">8.4 小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第-9章-解决跨浏览器问题"><span class="nav-text">第 9章  解决跨浏览器问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1-渐进增强与优雅降级"><span class="nav-text">9.1 渐进增强与优雅降级</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#现状"><span class="nav-text">现状</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2-该不该修复老版本-IE"><span class="nav-text">9.2 该不该修复老版本 IE</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#9-2-1-统计数据（再看看世界的变化）"><span class="nav-text">9.2.1 统计数据（再看看世界的变化）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-2-2-个人选择"><span class="nav-text">9.2.2 个人选择</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-3-前端的瑞士军刀：Modernizr"><span class="nav-text">9.3 前端的瑞士军刀：Modernizr</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#9-3-1-使用Modernizr辅助修正样式问题"><span class="nav-text">9.3.1 使用Modernizr辅助修正样式问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-3-2-使用Modernizr让老版本IE支持HTML5-元素"><span class="nav-text">9.3.2 使用Modernizr让老版本IE支持HTML5 元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-3-3-给IE6、7、8-追加min-max媒体查询功能"><span class="nav-text">9.3.3 给IE6、7、8 追加min/max媒体查询功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-3-4-使用Modernizr按需加载资源"><span class="nav-text">9.3.4 使用Modernizr按需加载资源</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-4-必要时将导航链接转换为下拉菜单"><span class="nav-text">9.4 必要时将导航链接转换为下拉菜单</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-5-高分辨率设备（未来趋势）"><span class="nav-text">9.5 高分辨率设备（未来趋势）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-6-小结"><span class="nav-text">9.6 小结</span></a></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear"><!--2020-->2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yalhu</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">453.3k</span>
  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    
      <style>
        a.gitment-editor-footer-tip { display: none; }
        .gitment-container.gitment-footer-container { display: none; }
      </style>
    

    
      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitmint({
            id: window.location.pathname, 
            owner: 'yalhu',
            repo: 'ablobComment',
            
            lang: "zh-Hans" || navigator.language || navigator.systemLanguage || navigator.userLanguage,
            
            oauth: {
            
            
                client_secret: 'e2dffa7f47b9523021b9ae56b08f1a8901ec5b47',
            
                client_id: '55b918d3485e51d807dd'
            }});
        gitment.render('gitment-container');
      }

      
      renderGitment();
      
      </script>
    







  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("FR1Ck8VBxN9d1lKPIOSKmvgl-gzGzoHsz", "bLUjHdwtJTf00J8OwVTT8urs");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
